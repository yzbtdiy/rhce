{"config":{"lang":["en"],"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"\u5173\u4e8e Red Hat Enterprise Linux 7 \u5b66\u4e60\u7b14\u8bb0 RH124 RH134 RH254","title":"\u5173\u4e8e"},{"location":"#_1","text":"","title":"\u5173\u4e8e"},{"location":"#red-hat-enterprise-linux-7","text":"","title":"Red Hat Enterprise Linux 7 \u5b66\u4e60\u7b14\u8bb0"},{"location":"#rh124","text":"","title":"RH124"},{"location":"#rh134","text":"","title":"RH134"},{"location":"#rh254","text":"","title":"RH254"},{"location":"RH124/","text":"RH124 \u57fa\u7840\u547d\u4ee4 \u7f16\u8f91\u6587\u4ef6 \u5e2e\u52a9\u6587\u6863 \u7528\u6237\u6743\u9650 \u8fdb\u7a0b\u4efb\u52a1 \u7f51\u7edc\u914d\u7f6e \u65e5\u5fd7\u67e5\u770b \u8f6f\u4ef6\u7ba1\u7406 \u6587\u4ef6\u67e5\u627e","title":"RH124"},{"location":"RH124/#rh124","text":"\u57fa\u7840\u547d\u4ee4 \u7f16\u8f91\u6587\u4ef6 \u5e2e\u52a9\u6587\u6863 \u7528\u6237\u6743\u9650 \u8fdb\u7a0b\u4efb\u52a1 \u7f51\u7edc\u914d\u7f6e \u65e5\u5fd7\u67e5\u770b \u8f6f\u4ef6\u7ba1\u7406 \u6587\u4ef6\u67e5\u627e","title":"RH124"},{"location":"RH124/day1/","text":"\u7b2c1\u5929 \u6587\u4ef6\u76ee\u5f55\u64cd\u4f5c \u76ee\u5f55\u7ed3\u6784 \u4f4d\u7f6e \u76ee\u5f55\u7528\u9014 / \u7cfb\u7edf\u7684\u6839\u76ee\u5f55 /usr/bin \u5b58\u653e\u666e\u901a\u7528\u6237\u7684\u4e8c\u8fdb\u5236\u6587\u4ef6\u548c\u5b9e\u7528\u7a0b\u5e8f /usr/sbin \u5b58\u653eroot\u7528\u6237\u4f7f\u7528\u7684\u7cfb\u7edf\u7ba1\u7406\u4e8c\u8fdb\u5236\u6587\u4ef6 /etc \u5404\u79cd\u670d\u52a1\u914d\u7f6e\u6587\u4ef6 /dev \u8bbe\u5907\u6587\u4ef6\u76ee\u5f55 /proc \u865a\u62df\u6587\u4ef6\u7cfb\u7edf\uff0c\u5185\u5b58\u7684\u6620\u5c04 /var \u6b64\u76ee\u5f55\u5305\u542b\u52a8\u6001\u914d\u7f6e\u6570\u636e\uff0c\u5982\u90ae\u4ef6\u548c\u7f51\u7ad9\u4ee5\u53ca\u7cfb\u7edf\u65e5\u5fd7 /tmp \u5b58\u50a8\u4e34\u65f6\u6587\u4ef6 /usr \u5305\u542b\u5b89\u88c5\u7684\u8f6f\u4ef6\u7a0b\u5e8f\u548c\u5e93 /home \u5b58\u653e\u666e\u901a\u7528\u6237\u4e3b\u76ee\u5f55 /root root\u5e10\u6237\u7684\u4e3b\u76ee\u5f55 /boot \u5f15\u5bfc\u7a0b\u5e8f\u914d\u7f6e\u76ee\u5f55 /lib \u5e93\u6587\u4ef6\u548c\u5185\u6838\u6a21\u5757 /opt \u5b89\u88c5\u7b2c\u4e09\u65b9\u8f6f\u4ef6 /mnt \u4e34\u65f6\u6587\u4ef6\u7cfb\u7edf\u6302\u8f7d\u70b9 /media \u53ef\u79fb\u52a8\u5b58\u50a8\u8bbe\u5907\u6302\u8f7d\u70b9\uff0c\u5982 U\u76d8\uff0c\u8f6f\u76d8\uff0c\u5149\u76d8\u7b49 /srv \u4e3b\u52a8\u751f\u4ea7\u7684\u6570\u636e\u3001\u5bf9\u5916\u63d0\u4f9b\u670d\u52a1 /run \u5305\u542b\u52a8\u6001\u7684\u3001\u975e\u6c38\u4e45\u7684\u5e94\u7528\u8fd0\u884c\u65f6\u6570\u636e \u5e38\u7528\u547d\u4ee4 \u683c\u5f0f\uff1a\u8981\u8fd0\u884c\u7684 \u547d\u4ee4 \u8c03\u6574\u547d\u4ee4\u884c\u4e3a\u7684 \u9009\u9879 \u4f5c\u4e3a\u547d\u4ee4\u76ee\u6807\u7684 \u53c2\u6570 \u64cd\u4f5c \u6587\u4ef6 \u76ee\u5f55 \u589e touch\uff08\u521b\u5efa\u7a7a\u6587\u4ef6\uff09 mkdir\uff08\u521b\u5efa\u7a7a\u76ee\u5f55\uff09 mkdir -p\uff08\u521b\u5efa\u76ee\u5f55\u53ca\u4e0a\u7ea7\u76ee\u5f55\uff09 \u5220 rm -f\uff08\u5220\u9664\u6587\u4ef6\uff09 rmdir\uff08\u5220\u9664\u7a7a\u76ee\u5f55\uff09 rm -rf\uff08\u5220\u9664\u975e\u7a7a\u76ee\u5f55\uff09 \u6539 cp\uff08\u62f7\u8d1d\u6587\u4ef6\uff09 mv\uff08\u79fb\u52a8\uff0c\u91cd\u547d\u540d\u6587\u4ef6\uff09 vim\uff08\u6587\u672c\u7f16\u8f91\u5668\uff0ci \u7f16\u8f91\uff0cesc&:wq \u9000\u51fa\uff09 cd\uff08\u5207\u6362\u76ee\u5f55\uff09 cp -r\uff08\u62f7\u8d1d\u76ee\u5f55\uff09 mv\uff08\u79fb\u52a8\uff0c\u91cd\u547d\u540d\u76ee\u5f55\uff09 \u67e5 cat\uff08\u53ea\u8bfb\u65b9\u5f0f\u6253\u5f00\u6587\u4ef6\uff09 head\uff08\u67e5\u770b\u6587\u4ef6\u5f00\u5934 10 \u884c\uff0c-n \u81ea\u5b9a\u4e49\u884c\u53f7\uff09 tail\uff08\u67e5\u770b\u6587\u4ef6\u7ed3\u5c3e 10 \u884c\uff0c-n \u81ea\u5b9a\u4e49\u884c\u53f7\uff09 more \u5206\u9875\u663e\u793a pwd\uff08\u8f93\u51fa\u5f53\u524d\u8def\u5f84\uff09 ls\uff08\u5217\u51fa\u76ee\u5f55\u5185\u5bb9\uff0c-l \u8be6\u7ec6\u4fe1\u606f\uff0c-a \u6240\u6709\u6587\u4ef6\uff09 \u5176\u5b83\u5e38\u7528\u547d\u4ee4 \u547d\u4ee4 \u4f5c\u7528 date \u663e\u793a\u5f53\u524d\u65f6\u95f4\uff0c--help \u67e5\u770b\u66f4\u591a\u683c\u5f0f echo \u8f93\u51fa\u5b57\u7b26\u4e32 file \u67e5\u770b\u6587\u4ef6\u7c7b\u578b which \u901a\u8fc7 PATH \u53d8\u91cf\u67e5\u627e\u53ef\u6267\u884c\u7a0b\u5e8f\u8def\u5f84 wc \u7edf\u8ba1\uff0c-l \u884c\u6570\uff0c-w \u5355\u8bcd\u6570\uff0c-c \u5b57\u8282\u6570 diff \u6bd4\u8f83\u4e24\u4e2a\u6587\u4ef6\u5185\u5bb9\u4e0d\u540c\u4e4b\u5904 wget \u4e0b\u8f7d\uff0c-r \u9012\u5f52\uff0c-np \u4e0d\u5305\u62ec\u7236\u76ee\u5f55\uff0c--reject=html \u4e0d\u4e0b\u8f7d html \u6587\u4ef6 free \u67e5\u770b\u5185\u5b58\u60c5\u51b5 history \u67e5\u770b\u5386\u53f2\u547d\u4ee4 poweroff \u5173\u673a reboot \u91cd\u542f \u4e2d\u6587 man \u5e2e\u52a9 \u5b89\u88c5\u4e2d\u6587 man \u8f6f\u4ef6\u5305 [root@localhost ~]# yum -y install man-pages-zh-CN \u4f7f\u7528 man -M \u6307\u5b9a\u4e2d\u6587 man [root@localhost ~]# man -M /usr/share/man/zh_CN/ ls \u5b9a\u4e49 alias \u522b\u540d [root@localhost ~]# echo \"alias cman='man -M /usr/share/man/zh_CN/'\" >> /etc/bashrc [root@localhost ~]# source /etc/bashrc [root@localhost ~]# cman ls","title":"\u7b2c1\u5929"},{"location":"RH124/day1/#1","text":"","title":"\u7b2c1\u5929"},{"location":"RH124/day1/#_1","text":"\u76ee\u5f55\u7ed3\u6784 \u4f4d\u7f6e \u76ee\u5f55\u7528\u9014 / \u7cfb\u7edf\u7684\u6839\u76ee\u5f55 /usr/bin \u5b58\u653e\u666e\u901a\u7528\u6237\u7684\u4e8c\u8fdb\u5236\u6587\u4ef6\u548c\u5b9e\u7528\u7a0b\u5e8f /usr/sbin \u5b58\u653eroot\u7528\u6237\u4f7f\u7528\u7684\u7cfb\u7edf\u7ba1\u7406\u4e8c\u8fdb\u5236\u6587\u4ef6 /etc \u5404\u79cd\u670d\u52a1\u914d\u7f6e\u6587\u4ef6 /dev \u8bbe\u5907\u6587\u4ef6\u76ee\u5f55 /proc \u865a\u62df\u6587\u4ef6\u7cfb\u7edf\uff0c\u5185\u5b58\u7684\u6620\u5c04 /var \u6b64\u76ee\u5f55\u5305\u542b\u52a8\u6001\u914d\u7f6e\u6570\u636e\uff0c\u5982\u90ae\u4ef6\u548c\u7f51\u7ad9\u4ee5\u53ca\u7cfb\u7edf\u65e5\u5fd7 /tmp \u5b58\u50a8\u4e34\u65f6\u6587\u4ef6 /usr \u5305\u542b\u5b89\u88c5\u7684\u8f6f\u4ef6\u7a0b\u5e8f\u548c\u5e93 /home \u5b58\u653e\u666e\u901a\u7528\u6237\u4e3b\u76ee\u5f55 /root root\u5e10\u6237\u7684\u4e3b\u76ee\u5f55 /boot \u5f15\u5bfc\u7a0b\u5e8f\u914d\u7f6e\u76ee\u5f55 /lib \u5e93\u6587\u4ef6\u548c\u5185\u6838\u6a21\u5757 /opt \u5b89\u88c5\u7b2c\u4e09\u65b9\u8f6f\u4ef6 /mnt \u4e34\u65f6\u6587\u4ef6\u7cfb\u7edf\u6302\u8f7d\u70b9 /media \u53ef\u79fb\u52a8\u5b58\u50a8\u8bbe\u5907\u6302\u8f7d\u70b9\uff0c\u5982 U\u76d8\uff0c\u8f6f\u76d8\uff0c\u5149\u76d8\u7b49 /srv \u4e3b\u52a8\u751f\u4ea7\u7684\u6570\u636e\u3001\u5bf9\u5916\u63d0\u4f9b\u670d\u52a1 /run \u5305\u542b\u52a8\u6001\u7684\u3001\u975e\u6c38\u4e45\u7684\u5e94\u7528\u8fd0\u884c\u65f6\u6570\u636e \u5e38\u7528\u547d\u4ee4 \u683c\u5f0f\uff1a\u8981\u8fd0\u884c\u7684 \u547d\u4ee4 \u8c03\u6574\u547d\u4ee4\u884c\u4e3a\u7684 \u9009\u9879 \u4f5c\u4e3a\u547d\u4ee4\u76ee\u6807\u7684 \u53c2\u6570 \u64cd\u4f5c \u6587\u4ef6 \u76ee\u5f55 \u589e touch\uff08\u521b\u5efa\u7a7a\u6587\u4ef6\uff09 mkdir\uff08\u521b\u5efa\u7a7a\u76ee\u5f55\uff09 mkdir -p\uff08\u521b\u5efa\u76ee\u5f55\u53ca\u4e0a\u7ea7\u76ee\u5f55\uff09 \u5220 rm -f\uff08\u5220\u9664\u6587\u4ef6\uff09 rmdir\uff08\u5220\u9664\u7a7a\u76ee\u5f55\uff09 rm -rf\uff08\u5220\u9664\u975e\u7a7a\u76ee\u5f55\uff09 \u6539 cp\uff08\u62f7\u8d1d\u6587\u4ef6\uff09 mv\uff08\u79fb\u52a8\uff0c\u91cd\u547d\u540d\u6587\u4ef6\uff09 vim\uff08\u6587\u672c\u7f16\u8f91\u5668\uff0ci \u7f16\u8f91\uff0cesc&:wq \u9000\u51fa\uff09 cd\uff08\u5207\u6362\u76ee\u5f55\uff09 cp -r\uff08\u62f7\u8d1d\u76ee\u5f55\uff09 mv\uff08\u79fb\u52a8\uff0c\u91cd\u547d\u540d\u76ee\u5f55\uff09 \u67e5 cat\uff08\u53ea\u8bfb\u65b9\u5f0f\u6253\u5f00\u6587\u4ef6\uff09 head\uff08\u67e5\u770b\u6587\u4ef6\u5f00\u5934 10 \u884c\uff0c-n \u81ea\u5b9a\u4e49\u884c\u53f7\uff09 tail\uff08\u67e5\u770b\u6587\u4ef6\u7ed3\u5c3e 10 \u884c\uff0c-n \u81ea\u5b9a\u4e49\u884c\u53f7\uff09 more \u5206\u9875\u663e\u793a pwd\uff08\u8f93\u51fa\u5f53\u524d\u8def\u5f84\uff09 ls\uff08\u5217\u51fa\u76ee\u5f55\u5185\u5bb9\uff0c-l \u8be6\u7ec6\u4fe1\u606f\uff0c-a \u6240\u6709\u6587\u4ef6\uff09","title":"\u6587\u4ef6\u76ee\u5f55\u64cd\u4f5c"},{"location":"RH124/day1/#_2","text":"\u547d\u4ee4 \u4f5c\u7528 date \u663e\u793a\u5f53\u524d\u65f6\u95f4\uff0c--help \u67e5\u770b\u66f4\u591a\u683c\u5f0f echo \u8f93\u51fa\u5b57\u7b26\u4e32 file \u67e5\u770b\u6587\u4ef6\u7c7b\u578b which \u901a\u8fc7 PATH \u53d8\u91cf\u67e5\u627e\u53ef\u6267\u884c\u7a0b\u5e8f\u8def\u5f84 wc \u7edf\u8ba1\uff0c-l \u884c\u6570\uff0c-w \u5355\u8bcd\u6570\uff0c-c \u5b57\u8282\u6570 diff \u6bd4\u8f83\u4e24\u4e2a\u6587\u4ef6\u5185\u5bb9\u4e0d\u540c\u4e4b\u5904 wget \u4e0b\u8f7d\uff0c-r \u9012\u5f52\uff0c-np \u4e0d\u5305\u62ec\u7236\u76ee\u5f55\uff0c--reject=html \u4e0d\u4e0b\u8f7d html \u6587\u4ef6 free \u67e5\u770b\u5185\u5b58\u60c5\u51b5 history \u67e5\u770b\u5386\u53f2\u547d\u4ee4 poweroff \u5173\u673a reboot \u91cd\u542f","title":"\u5176\u5b83\u5e38\u7528\u547d\u4ee4"},{"location":"RH124/day1/#man","text":"\u5b89\u88c5\u4e2d\u6587 man \u8f6f\u4ef6\u5305 [root@localhost ~]# yum -y install man-pages-zh-CN \u4f7f\u7528 man -M \u6307\u5b9a\u4e2d\u6587 man [root@localhost ~]# man -M /usr/share/man/zh_CN/ ls \u5b9a\u4e49 alias \u522b\u540d [root@localhost ~]# echo \"alias cman='man -M /usr/share/man/zh_CN/'\" >> /etc/bashrc [root@localhost ~]# source /etc/bashrc [root@localhost ~]# cman ls","title":"\u4e2d\u6587 man \u5e2e\u52a9"},{"location":"RH124/day2/","text":"\u7b2c2\u5929 \u91cd\u5b9a\u5411 linux \u7684\u6807\u51c6\u8f93\u5165\u4e0e\u8f93\u51fa linux\u6807\u51c6\u8f93\u5165\u8bbe\u5907\u662f\u952e\u76d8\uff0c\u6807\u51c6\u8f93\u51fa\u8bbe\u5907\u662f\u663e\u793a\u5668\uff0c\u6807\u51c6\u9519\u8bef\u8f93\u51fa\u662f\u663e\u793a\u5668\u3002 \u8bbe\u5907 \u8bbe\u5907\u540d \u6587\u4ef6\u63cf\u8ff0\u7b26 \u7c7b\u578b \u952e\u76d8 /dev/stdin 0 \u6807\u51c6\u8f93\u5165 \u663e\u793a\u5668 /dev/stdout 1 \u6807\u51c6\u8f93\u51fa \u663e\u793a\u5668 /dev/stderr 2 \u6807\u51c6\u9519\u8bef\u8f93\u51fa Linux \u6587\u4ef6\u63cf\u8ff0\u7b26\uff08\u901a\u9053\uff09 \u6807\u51c6\u8f93\u5165\u6587\u4ef6(stdin) \uff1astdin\u7684\u6587\u4ef6\u63cf\u8ff0\u7b26\u4e3a0\uff0c\u7a0b\u5e8f\u9ed8\u8ba4\u4ece stdin \u8bfb\u53d6\u6570\u636e\u3002 \u6807\u51c6\u8f93\u51fa\u6587\u4ef6(stdout) \uff1astdout \u7684\u6587\u4ef6\u63cf\u8ff0\u7b26\u4e3a1\uff0c\u7a0b\u5e8f\u9ed8\u8ba4\u5411 stdout \u8f93\u51fa\u6570\u636e\u3002 \u6807\u51c6\u9519\u8bef\u6587\u4ef6(stderr) \uff1astderr\u7684\u6587\u4ef6\u63cf\u8ff0\u7b26\u4e3a2\uff0c\u7a0b\u5e8f\u4f1a\u5411 stderr \u6d41\u4e2d\u5199\u5165\u9519\u8bef\u4fe1\u606f\u3002 \u8f93\u5165\u91cd\u5b9a\u5411\u4e0e\u8f93\u51fa\u91cd\u5b9a\u5411 \u8f93\u5165\u91cd\u5b9a\u5411 \uff1a\u662f\u6307\u4e0d\u4f7f\u7528\u7cfb\u7edf\u63d0\u4f9b\u7684\u6807\u51c6\u8f93\u5165\u7aef\u53e3\uff0c\u800c\u8fdb\u884c\u91cd\u65b0\u7684\u6307\u5b9a\u3002\u6362\u8a00\u4e4b\uff0c\u8f93\u5165\u91cd\u5b9a\u5411\u5c31\u662f\u4e0d\u4f7f\u7528\u6807\u51c6\u8f93\u5165\u7aef\u53e3\u8f93\u5165\u6587\u4ef6\uff0c\u800c\u662f\u4f7f\u7528\u6307\u5b9a\u7684\u6587\u4ef6\u4f5c\u4e3a\u6807\u51c6\u8f93\u5165\u8bbe\u5907\u3002 \u8f93\u51fa\u91cd\u5b9a\u5411 \uff1a\u8f93\u51fa\u91cd\u5b9a\u5411\u5c31\u662f\u6307\u4e0d\u4f7f\u7528linux\u9ed8\u8ba4\u7684\u6807\u51c6\u8f93\u51fa\u8bbe\u5907\u663e\u793a\u4fe1\u606f\uff0c\u800c\u662f\u6307\u5b9a\u67d0\u4e2a\u6587\u4ef6\u505a\u4e3a\u6807\u51c6\u8f93\u51fa\u8bbe\u5907\u6765\u5b58\u50a8\u6587\u4ef6\u4fe1\u606f\u3002 tty \u4e0e pts tty \u4e00\u8bcd\u6e90\u4e8e Teletypes\uff0c\u6216\u8005 teletypewriters\uff0c\u539f\u6765\u6307\u7684\u662f\u7535\u4f20\u6253\u5b57\u673a\uff0c\u662f\u901a\u8fc7\u4e32\u884c\u7ebf\u7528\u6253\u5370\u673a\u952e\u76d8\u901a\u8fc7\u9605\u8bfb\u548c\u53d1\u9001\u4fe1\u606f\u7684\u4e1c\u897f\uff0c\u540e\u6765\u8fd9\u4e1c\u897f\u88ab\u952e\u76d8\u4e0e\u663e\u793a\u5668\u53d6\u4ee3\uff0c\u6240\u4ee5\u73b0\u5728\u53eb\u7ec8\u7aef\u6bd4\u8f83\u5408\u9002\u3002 \u4f46\u662f\u5982\u679c\u6211\u4eec\u8fdc\u7a0btelnet\u5230\u4e3b\u673a\u6216\u4f7f\u7528xterm\u65f6\u4e0d\u4e5f\u9700\u8981\u4e00\u4e2a\u7ec8\u7aef\u4ea4\u4e92\u4e48\uff1f\u662f\u7684\uff0c\u8fd9\u5c31\u662f\u865a\u62df\u7ec8\u7aef pty (pseudo-tty) pts (pseudo-terminal slave)\u662fpty\u7684\u5b9e\u73b0\u65b9\u6cd5\uff0c\u4e0eptmx(pseudo-terminal master)\u914d\u5408\u4f7f\u7528\u5b9e\u73b0pty\u3002 \u7ec8\u7aef\u662f\u4e00\u79cd\u5b57\u7b26\u578b\u8bbe\u5907\uff0c\u5b83\u6709\u591a\u79cd\u7c7b\u578b\uff0c\u901a\u5e38\u4f7f\u7528tty\u6765\u7b80\u79f0\u5404\u79cd\u7c7b\u578b\u7684\u7ec8\u7aef\u8bbe\u5907\u3002tty\u662fTeletype\u7684\u7f29\u5199\u3002Teletype\u662f\u6700\u65e9\u51fa\u73b0\u7684\u4e00\u79cd\u7ec8\u7aef\u8bbe\u5907\uff0c\u5f88\u50cf\u7535\u4f20\u6253\u5b57\u673a\uff0c\u662f\u7531Teletype\u516c\u53f8\u751f\u4ea7\u7684\u3002 pts/ptmx (pts/ptmx\u7ed3\u5408\u4f7f\u7528\uff0c\u8fdb\u800c\u5b9e\u73b0pty): pts(pseudo-terminal slave)\u662fpty\u7684\u5b9e\u73b0\u65b9\u6cd5\uff0c\u4e0eptmx(pseudo-terminal master)\u914d\u5408\u4f7f\u7528\u5b9e\u73b0pty\u3002 vim \u4f7f\u7528 \u4e09\u79cd\u6a21\u5f0f \u529f\u80fd \u6a21\u5f0f \u547d\u4ee4\u6a21\u5f0f \u6b64\u6a21\u5f0f\u7528\u4e8e\u6587\u4ef6\u5bfc\u822a\u3001\u526a\u5207\u548c\u7c98\u8d34\u4ee5\u53ca\u7b80\u5355\u547d\u4ee4\u3002\u64a4\u9500\u3001\u6062\u590d\u548c\u5176\u4ed6\u64cd\u4f5c\u4e5f\u4ece\u6b64\u6a21\u5f0f\u4e2d\u6267\u884c\u3002 \u8f93\u5165\u6a21\u5f0f \u6b64\u6a21\u5f0f\u7528\u4e8e\u5e38\u89c4\u6587\u672c\u7f16\u8f91\u3002\u66ff\u6362\u6a21\u5f0f\u662f\u63d2\u5165\u6a21\u5f0f\u7684\u4e00\u79cd\u53d8\u4f53\uff0c\u53ef\u4ee5\u66ff\u6362\u800c\u4e0d\u662f\u63d2\u5165\u6587\u672c\u3002 EX\u6a21\u5f0f \u6b64\u6a21\u5f0f\u7528\u4e8e\u4fdd\u5b58\u3001\u9000\u51fa\u548c\u6253\u5f00\u6587\u4ef6\uff0c\u4ee5\u53ca\u641c\u7d22\u3001\u66ff\u6362\u548c\u5176\u5b83\u66f4\u4e3a\u590d\u6742\u7684\u64cd\u4f5c\u3002 \u57fa\u7840\u64cd\u4f5c \u6309\u952e \u4f5c\u7528 h \u6216 (\u2190) \u5149\u6807\u5411\u5de6\u79fb\u52a8\u4e00\u4e2a\u5b57\u7b26 j \u6216 (\u2193) \u5149\u6807\u5411\u4e0b\u79fb\u52a8\u4e00\u4e2a\u5b57\u7b26 k \u6216 (\u2191) \u5149\u6807\u5411\u4e0a\u79fb\u52a8\u4e00\u4e2a\u5b57\u7b26 l \u6216 (\u2192) \u5149\u6807\u5411\u53f3\u79fb\u52a8\u4e00\u4e2a\u5b57\u7b26 w \u5149\u6807\u79fb\u81f3\u4e0b\u4e00\u5355\u8bcd\u5f00\u5934 b \u5149\u6807\u79fb\u81f3\u4e0a\u4e00\u5355\u8bcd\u5f00\u5934 ( \u5149\u6807\u79fb\u81f3\u5355\u7b7e\u53e5\u5b50\u6216\u4e0a\u4e00\u53e5\u5b50\u7684\u5f00\u5934 ) \u5149\u6807\u79fb\u81f3\u4e0b\u4e00\u53e5\u5b50\u7684\u5f00\u5934 { \u5149\u6807\u79fb\u81f3\u5f53\u524d\u6216\u4e0a\u4e00\u6bb5\u843d\u5f00\u5934 } \u5149\u6807\u79fb\u81f3\u4e0b\u4e00\u6bb5\u843d\u5f00\u5934 ^ \u5149\u6807\u79fb\u81f3\u6240\u5728\u884c\u884c\u9996 $ \u5149\u6807\u79fb\u81f3\u6240\u5728\u884c\u884c\u5c3e gg \u5149\u6807\u79fb\u81f3\u6587\u6863\u7b2c\u4e00\u884c G \u5149\u6807\u79fb\u81f3\u6587\u6863\u6700\u540e\u4e00\u884c yy \u590d\u5236\u5149\u6807\u6240\u5728\u7684\u90a3\u4e00\u884c nyy n \u4e3a\u6570\u5b57\uff0c\u590d\u5236\u5149\u6807\u6240\u5728\u7684\u5411\u4e0b n \u884c dd \u526a\u5207\u5149\u6807\u6240\u5728\u7684\u90a3\u4e00\u6574\u884c ndd n \u4e3a\u6570\u5b57\uff0c\u526a\u5207\u5149\u6807\u6240\u5728\u7684\u5411\u4e0b n \u884c d^, d0 \u6570\u5b57 0 \uff0c\u526a\u5207\u5149\u6807\u6240\u5728\u5904\uff0c\u5230\u8be5\u884c\u9996\u7684\u5b57\u7b26 d$, D \u526a\u5207\u5149\u6807\u6240\u5728\u5904\uff0c\u5230\u8be5\u884c\u5c3e\u7684\u5b57\u7b26 cw \u66ff\u6362\u5149\u6807\u4f4d\u7f6e\u5230\u5355\u8bcd\u7ed3\u5c3e\u7684\u5185\u5bb9 ciw \u66ff\u6362\u5149\u6807\u6240\u5728\u4f4d\u7f6e\u5355\u8bcd caw \u66ff\u6362\u5149\u6807\u6240\u5728\u4f4d\u7f6e\u5355\u8bcd\uff0c\u5305\u62ec\u7a7a\u767d\u533a cc \u5149\u6807\u6240\u5728\u884c\u6574\u884c\u66ff\u6362 c^, c0 \u5149\u6807\u6240\u5728\u4f4d\u7f6e\u66ff\u6362\u5230\u884c\u9996 c$, C \u5149\u6807\u6240\u5728\u4f4d\u7f6e\u66ff\u6362\u5230\u884c\u5c3e ncc n \u4e3a\u6570\u5b57\uff0c\u66ff\u6362\u5149\u6807\u6240\u5728\u7684\u5411\u4e0b n \u884c x, X x \u5149\u6807\u4f4d\u7f6e\u5411\u540e\u5220\u9664\uff0cX \u5149\u6807\u4f4d\u7f6e\u5411\u524d\u5220\u9664 p, P p \u4e3a\u5c06\u5df2\u590d\u5236\u7684\u6570\u636e\u5728\u5149\u6807\u4e0b\u4e00\u884c\u8d34\u4e0a\uff0cP \u5219\u4e3a\u8d34\u5728\u5149\u6807\u4e0a\u4e00\u884c i, I i \u4e3a\u4ece\u5149\u6807\u6240\u5728\u5904\u8f93\u5165\uff1bI \u4e3a\u5728\u6240\u5728\u884c\u7684\u7b2c\u4e00\u4e2a\u975e\u7a7a\u683c\u7b26\u5904\u8f93\u5165 a, A a \u4e3a\u4ece\u5149\u6807\u6240\u5728\u7684\u4e0b\u4e00\u4e2a\u5b57\u7b26\u5904\u8f93\u5165\uff1b A \u4e3a\u4ece\u5149\u6807\u6240\u5728\u884c\u7684\u6700\u540e\u4e00\u4e2a\u5b57\u7b26\u5904\u8f93\u5165 o, O o \u4e3a\u5728\u5149\u6807\u6240\u5728\u7684\u4e0b\u4e00\u884c\u8f93\u5165\uff1b O \u4e3a\u5728\u5149\u6807\u6240\u5728\u4e0a\u4e00\u884c\u8f93\u5165 r, R r \u53ea\u53d6\u4ee3\u5149\u6807\u6240\u5728\u7684\u5b57\u7b26\u4e00\u6b21\uff1bR \u4e00\u76f4\u53d6\u4ee3\u5149\u6807\u6240\u5728\u7684\u5b57\u7b26\uff0c\u76f4\u5230\u6309\u4e0b ESC \u4e3a\u6b62 v, V, ctrl+v v \u5b57\u7b26\u53ef\u89c6\u5316\u7f16\u8f91\uff1bV \u884c\u53ef\u89c6\u5316\u7f16\u8f91\uff1bctrl+v \u5757\u53ef\u89c6\u5316\u7f16\u8f91 :w \u4fdd\u5b58\u66f4\u6539\u5e76\u7559\u5728\u7f16\u8f91\u5668\u4e2d :w filename \u53e6\u5b58\u4e3a\u4e00\u4e2a\u6587\u4ef6 :wq \u4fdd\u5b58\u5e76\u9000\u51fa :x \u4fdd\u5b58\u5f53\u524d\u6587\u4ef6\uff0c\u7136\u540e\u9000\u51fa :q \u9000\u51fa\u5f53\u524d\u6587\u4ef6\uff0c\u6ca1\u6709\u672a\u4fdd\u5b58\u66f4\u6539 :q! \u9000\u51fa\u5f53\u524d\u6587\u4ef6\uff0c\u5ffd\u7565\u672a\u4fdd\u5b58\u66f4\u6539 \u7528\u6237\u7ba1\u7406 \u7528\u6237\u548c\u7ec4 \u7528\u6237 \uff1a\u7cfb\u7edf\u4e2d\u6bcf\u4e2a\u8fdb\u7a0b\uff08\u8fd0\u884c\u7a0b\u5e8f\uff09\u90fd\u7531\u4e00\u4e2a\u7279\u5b9a\u7528\u6237\u8fd0\u884c\u3002\u6bcf\u4e2a\u6587\u4ef6\u5f52\u4e00\u4e2a\u7279\u5b9a\u7528\u6237\u6240\u6709\u3002\u5bf9\u6587\u4ef6\u548c\u76ee\u5f55\u7684\u8bbf\u95ee\u6536\u5230\u7528\u6237\u8eab\u4efd\u7684\u9650\u5236\u3002\u4e0e\u8fd0\u884c\u8fdb\u7a0b\u76f8\u5173\u8fde\u5f97\u7528\u6237\u53ef\u4ee5\u786e\u5b9a\u8be5\u8fdb\u7a0b\u53ef\u8bbf\u95ee\u7684\u6587\u4ef6\u548c\u76ee\u5f55\u3002\u6bcf\u4e2a\u7528\u6237\u90fd\u6709\u81ea\u5df1\u7684\u7528\u6237\u540d\u548c\u7f16\u53f7\uff08UID\uff09\uff0c\u64cd\u4f5c\u7cfb\u7edf\u5185\u90e8\u662f\u901a\u8fc7 UID \u6765\u533a\u5206\u7528\u6237\u7684\u3002 UID \u4e3a 0 \u7684\u662f root \u7528\u6237\u3002 UID \u4e3a 1-200 \u4e3a\u7cfb\u7edf\u7528\u6237\uff0c\u9759\u6001\u5206\u914d\u7ed9\u7ea2\u5e3d\u7684\u7cfb\u7edf\u8fdb\u7a0b\u7684\u3002 UID \u4e3a 201-999 \u4e3a\u7cfb\u7edf\u7528\u6237\uff0c\u4f9b\u6587\u4ef6\u7cfb\u7edf\u4e2d\u6ca1\u6709\u81ea\u5df1\u7684\u6587\u4ef6\u7684\u7cfb\u7edf\u8fdb\u7a0b\u4f7f\u7528\uff0c\u901a\u5e38\u5728\u5b89\u88c5\u8f6f\u4ef6\u65f6\u4ece\u6c60\u4e2d\u52a8\u6001\u5206\u914d\uff0c\u9650\u5236\u5bf9\u5e94\u7a0b\u5e8f\u4ec5\u8bbf\u95ee\u5b83\u4eec\u6b63\u5e38\u8fd0\u884c\u6240\u9700\u7684\u8d44\u6e90\u3002 UID 1000+ \u4f9b\u666e\u901a\u7528\u6237\u4f7f\u7528\u3002 \u7ec4 \uff1a\u7ec4\u662f\u7528\u6237\u7684\u96c6\u5408\uff0c\u7ec4\u4e5f\u6709\u7ec4\u540d\u548c\u7f16\u53f7\uff08GID\uff09\u3002 \u4e3b\u8981\u7ec4 \uff1a\u6bcf\u4e2a\u7528\u6237\u6709\u4e00\u4e2a\u4e3b\u8981\u7ec4\uff0c\u7528\u6237\u521b\u5efa\u7684\u65b0\u6587\u4ef6\u5f52\u5176\u4e3b\u8981\u7ec4\u6240\u6709\u3002\u9ed8\u8ba4\u60c5\u51b5\u65b0\u5efa\u7528\u6237\u7684\u4e3b\u8981\u7ec4\u662f\u4e0e\u7528\u6237\u540c\u540d\u7684\u65b0\u5efa\u7ec4\u3002 \u8865\u5145\u7ec4 \uff1a\u7528\u6237\u53ef\u4ee5\u662f 0 \u4e2a\u6216\u591a\u4e2a\u8865\u5145\u7ec4\u7684\u6210\u5458\u3002\u8865\u5145\u7ec4\u6210\u5458\u8eab\u4efd\u7528\u4e8e\u786e\u4fdd\u7528\u6237\u5177\u6709\u5bf9\u7cfb\u7edf\u4e2d\u67d0\u4e9b\u6587\u4ef6\u53ca\u5176\u5b83\u8d44\u6e90\u7684\u8bbf\u95ee\u6743\u9650\u3002 \u7528\u6237\u7ba1\u7406\u547d\u4ee4 \u547d\u4ee4 \u9009\u9879\u53ca\u4f5c\u7528 id \u67e5\u770b\u7528\u6237\u57fa\u672c\u4fe1\u606f\uff0c\u4e0d\u52a0\u53c2\u6570\u663e\u793a\u5f53\u524d\u7528\u6237 su - \u5207\u6362\u7528\u6237\uff0c\u4f7f\u7528 - \u5728\u5207\u6362\u7528\u6237\u7684\u540c\u65f6\u66f4\u65b0\u73af\u5883\u53d8\u91cf\uff0c\u4e0d\u52a0\u53c2\u6570\u5207\u6362 root \u7528\u6237 useradd \u521b\u5efa\u7528\u6237\uff0c-u \u6307\u5b9a uid\uff0c-g \u6307\u5b9a\u57fa\u672c\u7ec4\uff0c-G \u6307\u5b9a\u6269\u5c55\u7ec4\uff0c-s \u6307\u5b9a\u9ed8\u8ba4 shell\uff0c-N \u4e0d\u521b\u5efa\u540c\u540d\u57fa\u672c\u7ec4\uff0c-d \u6307\u5b9a\u5bb6\u76ee\u5f55 groupadd \u521b\u5efa\u7ec4\uff0c-g \u6307\u5b9a gid usermod \u4fee\u6539\u7528\u6237\uff0c-s \u4fee\u6539shell\uff0c-u \u4fee\u6539 uid\uff0c-g \u4fee\u6539\u57fa\u672c\u7ec4\uff0c-G \u4fee\u6539\u6269\u5c55\u7ec4\uff0c-aG \u6dfb\u52a0\u6269\u5c55\u7ec4\uff0c-L \u9501\u5b9a\uff0c-U \u89e3\u9501\uff0c-m -d \u6307\u5b9a\u65b0\u5bb6\u76ee\u5f55\u5e76\u8f6c\u79fb\u7528\u6237\u6570\u636e userdel \u5220\u9664\u7528\u6237\uff0c-r \u5220\u9664\u7528\u6237\u5bb6\u76ee\u5f55 groupmod \u4fee\u6539\u7ec4\uff0c-g \u4fee\u6539 gid\uff0c-n \u4fee\u6539\u7ec4\u540d chown \u4fee\u6539\u6587\u4ef6\u6216\u76ee\u5f55\u6240\u6709\u8005\u53ca\u6240\u5c5e\u7ec4\uff0c-R \u9012\u5f52 chgrp \u4fee\u6539\u6587\u4ef6\u6216\u76ee\u5f55\u6240\u5c5e\u7ec4\uff0c-R \u9012\u5f52 sudo sudo \u662f linux \u7cfb\u7edf\u7ba1\u7406\u6307\u4ee4\uff0c\u662f\u5141\u8bb8\u7cfb\u7edf\u7ba1\u7406\u5458\u8ba9\u666e\u901a\u7528\u6237\u6267\u884c\u4e00\u4e9b\u6216\u8005\u5168\u90e8\u7684 root \u547d\u4ee4\u7684\u4e00\u4e2a\u5de5\u5177\u51cf\u5c11\u4e86 root \u7528\u6237\u7684\u767b\u5f55 \u548c\u7ba1\u7406\u65f6\u95f4\uff0c\u540c\u6837\u4e5f\u63d0\u9ad8\u4e86\u5b89\u5168\u6027\u3002 \u914d\u7f6e\u6587\u4ef6\uff1a/etc/sudoers \u683c\u5f0f\uff1a user host run_as command user\uff1a\u7528\u6237\u6216\u7ec4\uff0c\u7ec4\u8981\u4ee5%\u5f00\u5934 host\uff1a\u4e3b\u673a\u540d run_as \u4f5c\u4e3a\u54ea\u4e2a\u7528\u6237\u6267\u884c\uff0c\u5e38\u7528 root \u6216 ALL command \u8ba9\u7528\u6237\u6216\u7ec4\u8fd0\u884c\u7684\u4e00\u4e2a\u6216\u591a\u4e2a\u6839\u7ea7\u522b\u547d\u4ee4 \u7ec3\u4e60 1.\u521b\u5efa\u7528\u6237useradmin\uff0clogviewer\uff0cdiskmanager 2.\u901a\u8fc7visudo\u8d4b\u4e88useradmin\u521b\u5efa\u5220\u9664\u7528\u6237\u7684\u6743\u9650\uff0c\u8d4b\u4e88logviewer\u67e5\u770b\u65e5\u5fd7\u7684\u6743\u9650\uff0c\u8d4b\u4e88diskmanager\u5206\u533a\u6743\u9650 3.\u901a\u8fc7useradmin\u7528\u6237\u521b\u5efa\u7528\u6237user1\uff0cuser2\uff0cuser3\uff0cuser4 user1\u662flogviewer\u7ec4\u6210\u5458\uff0c\u53ef\u4ee5\u67e5\u770b\u65e5\u5fd7 user2\u7528\u6237\u7684shell\u4e3a/sbin/nologin user3\u7684\u5bb6\u76ee\u5f55\u4f4d\u4e8e/user3 user4\u7684uid\u4e3a10086 [root@server0 ~]# useradd useradmin [root@server0 ~]# useradd logviewer [root@server0 ~]# useradd diskmanager [root@server0 ~]# echo redhat | passwd --stdin useradmin [root@server0 ~]# echo redhat | passwd --stdin logviewer [root@server0 ~]# echo redhat | passwd --stdin diskmanager [root@server0 ~]# visudo useradmin ALL=(root) NOPASSWD: /usr/sbin/useradd,/usr/sbin/userdel %logviewer ALL=(root) NOPASSWD: /usr/bin/cat diskmanager ALL=(root) NOPASSWD: /usr/sbin/fdisk [root@server0 ~]# su - useradmin [useradmin@server0 ~]$ sudo useradd -G logviewer user1 [useradmin@server0 ~]$ sudo useradd -s /sbin/nologin user2 [useradmin@server0 ~]$ sudo useradd -d /user3 user3 [useradmin@server0 ~]$ sudo useradd -u 10086 user4 [useradmin@server0 ~]$ exit [root@server0 ~]# echo redhat | passwd --stdin user1 [root@server0 ~]# echo redhat | passwd --stdin user2 [root@server0 ~]# echo redhat | passwd --stdin user3 [root@server0 ~]# echo redhat | passwd --stdin user4 [root@server0 ~]# su - logviewer [logviewer@server0 ~]$ cat /var/log/messages [logviewer@server0 ~]$ sudo cat /var/log/messages [logviewer@server0 ~]$ exit [root@server0 ~]# su - user1 [user1@server0 ~]$ cat /var/log/messages [user1@server0 ~]$ sudo cat /var/log/messages [user1@server0 ~]$ exit [root@server0 ~]# su - diskmanager [diskmanager@server0 ~]$ fdisk /dev/vdb [diskmanager@server0 ~]$ sudo fdisk /dev/vdb","title":"\u7b2c2\u5929"},{"location":"RH124/day2/#2","text":"","title":"\u7b2c2\u5929"},{"location":"RH124/day2/#_1","text":"","title":"\u91cd\u5b9a\u5411"},{"location":"RH124/day2/#linux","text":"linux\u6807\u51c6\u8f93\u5165\u8bbe\u5907\u662f\u952e\u76d8\uff0c\u6807\u51c6\u8f93\u51fa\u8bbe\u5907\u662f\u663e\u793a\u5668\uff0c\u6807\u51c6\u9519\u8bef\u8f93\u51fa\u662f\u663e\u793a\u5668\u3002 \u8bbe\u5907 \u8bbe\u5907\u540d \u6587\u4ef6\u63cf\u8ff0\u7b26 \u7c7b\u578b \u952e\u76d8 /dev/stdin 0 \u6807\u51c6\u8f93\u5165 \u663e\u793a\u5668 /dev/stdout 1 \u6807\u51c6\u8f93\u51fa \u663e\u793a\u5668 /dev/stderr 2 \u6807\u51c6\u9519\u8bef\u8f93\u51fa","title":"linux \u7684\u6807\u51c6\u8f93\u5165\u4e0e\u8f93\u51fa"},{"location":"RH124/day2/#linux_1","text":"\u6807\u51c6\u8f93\u5165\u6587\u4ef6(stdin) \uff1astdin\u7684\u6587\u4ef6\u63cf\u8ff0\u7b26\u4e3a0\uff0c\u7a0b\u5e8f\u9ed8\u8ba4\u4ece stdin \u8bfb\u53d6\u6570\u636e\u3002 \u6807\u51c6\u8f93\u51fa\u6587\u4ef6(stdout) \uff1astdout \u7684\u6587\u4ef6\u63cf\u8ff0\u7b26\u4e3a1\uff0c\u7a0b\u5e8f\u9ed8\u8ba4\u5411 stdout \u8f93\u51fa\u6570\u636e\u3002 \u6807\u51c6\u9519\u8bef\u6587\u4ef6(stderr) \uff1astderr\u7684\u6587\u4ef6\u63cf\u8ff0\u7b26\u4e3a2\uff0c\u7a0b\u5e8f\u4f1a\u5411 stderr \u6d41\u4e2d\u5199\u5165\u9519\u8bef\u4fe1\u606f\u3002","title":"Linux \u6587\u4ef6\u63cf\u8ff0\u7b26\uff08\u901a\u9053\uff09"},{"location":"RH124/day2/#_2","text":"\u8f93\u5165\u91cd\u5b9a\u5411 \uff1a\u662f\u6307\u4e0d\u4f7f\u7528\u7cfb\u7edf\u63d0\u4f9b\u7684\u6807\u51c6\u8f93\u5165\u7aef\u53e3\uff0c\u800c\u8fdb\u884c\u91cd\u65b0\u7684\u6307\u5b9a\u3002\u6362\u8a00\u4e4b\uff0c\u8f93\u5165\u91cd\u5b9a\u5411\u5c31\u662f\u4e0d\u4f7f\u7528\u6807\u51c6\u8f93\u5165\u7aef\u53e3\u8f93\u5165\u6587\u4ef6\uff0c\u800c\u662f\u4f7f\u7528\u6307\u5b9a\u7684\u6587\u4ef6\u4f5c\u4e3a\u6807\u51c6\u8f93\u5165\u8bbe\u5907\u3002 \u8f93\u51fa\u91cd\u5b9a\u5411 \uff1a\u8f93\u51fa\u91cd\u5b9a\u5411\u5c31\u662f\u6307\u4e0d\u4f7f\u7528linux\u9ed8\u8ba4\u7684\u6807\u51c6\u8f93\u51fa\u8bbe\u5907\u663e\u793a\u4fe1\u606f\uff0c\u800c\u662f\u6307\u5b9a\u67d0\u4e2a\u6587\u4ef6\u505a\u4e3a\u6807\u51c6\u8f93\u51fa\u8bbe\u5907\u6765\u5b58\u50a8\u6587\u4ef6\u4fe1\u606f\u3002","title":"\u8f93\u5165\u91cd\u5b9a\u5411\u4e0e\u8f93\u51fa\u91cd\u5b9a\u5411"},{"location":"RH124/day2/#tty-pts","text":"tty \u4e00\u8bcd\u6e90\u4e8e Teletypes\uff0c\u6216\u8005 teletypewriters\uff0c\u539f\u6765\u6307\u7684\u662f\u7535\u4f20\u6253\u5b57\u673a\uff0c\u662f\u901a\u8fc7\u4e32\u884c\u7ebf\u7528\u6253\u5370\u673a\u952e\u76d8\u901a\u8fc7\u9605\u8bfb\u548c\u53d1\u9001\u4fe1\u606f\u7684\u4e1c\u897f\uff0c\u540e\u6765\u8fd9\u4e1c\u897f\u88ab\u952e\u76d8\u4e0e\u663e\u793a\u5668\u53d6\u4ee3\uff0c\u6240\u4ee5\u73b0\u5728\u53eb\u7ec8\u7aef\u6bd4\u8f83\u5408\u9002\u3002 \u4f46\u662f\u5982\u679c\u6211\u4eec\u8fdc\u7a0btelnet\u5230\u4e3b\u673a\u6216\u4f7f\u7528xterm\u65f6\u4e0d\u4e5f\u9700\u8981\u4e00\u4e2a\u7ec8\u7aef\u4ea4\u4e92\u4e48\uff1f\u662f\u7684\uff0c\u8fd9\u5c31\u662f\u865a\u62df\u7ec8\u7aef pty (pseudo-tty) pts (pseudo-terminal slave)\u662fpty\u7684\u5b9e\u73b0\u65b9\u6cd5\uff0c\u4e0eptmx(pseudo-terminal master)\u914d\u5408\u4f7f\u7528\u5b9e\u73b0pty\u3002 \u7ec8\u7aef\u662f\u4e00\u79cd\u5b57\u7b26\u578b\u8bbe\u5907\uff0c\u5b83\u6709\u591a\u79cd\u7c7b\u578b\uff0c\u901a\u5e38\u4f7f\u7528tty\u6765\u7b80\u79f0\u5404\u79cd\u7c7b\u578b\u7684\u7ec8\u7aef\u8bbe\u5907\u3002tty\u662fTeletype\u7684\u7f29\u5199\u3002Teletype\u662f\u6700\u65e9\u51fa\u73b0\u7684\u4e00\u79cd\u7ec8\u7aef\u8bbe\u5907\uff0c\u5f88\u50cf\u7535\u4f20\u6253\u5b57\u673a\uff0c\u662f\u7531Teletype\u516c\u53f8\u751f\u4ea7\u7684\u3002 pts/ptmx (pts/ptmx\u7ed3\u5408\u4f7f\u7528\uff0c\u8fdb\u800c\u5b9e\u73b0pty): pts(pseudo-terminal slave)\u662fpty\u7684\u5b9e\u73b0\u65b9\u6cd5\uff0c\u4e0eptmx(pseudo-terminal master)\u914d\u5408\u4f7f\u7528\u5b9e\u73b0pty\u3002","title":"tty \u4e0e pts"},{"location":"RH124/day2/#vim","text":"","title":"vim \u4f7f\u7528"},{"location":"RH124/day2/#_3","text":"\u529f\u80fd \u6a21\u5f0f \u547d\u4ee4\u6a21\u5f0f \u6b64\u6a21\u5f0f\u7528\u4e8e\u6587\u4ef6\u5bfc\u822a\u3001\u526a\u5207\u548c\u7c98\u8d34\u4ee5\u53ca\u7b80\u5355\u547d\u4ee4\u3002\u64a4\u9500\u3001\u6062\u590d\u548c\u5176\u4ed6\u64cd\u4f5c\u4e5f\u4ece\u6b64\u6a21\u5f0f\u4e2d\u6267\u884c\u3002 \u8f93\u5165\u6a21\u5f0f \u6b64\u6a21\u5f0f\u7528\u4e8e\u5e38\u89c4\u6587\u672c\u7f16\u8f91\u3002\u66ff\u6362\u6a21\u5f0f\u662f\u63d2\u5165\u6a21\u5f0f\u7684\u4e00\u79cd\u53d8\u4f53\uff0c\u53ef\u4ee5\u66ff\u6362\u800c\u4e0d\u662f\u63d2\u5165\u6587\u672c\u3002 EX\u6a21\u5f0f \u6b64\u6a21\u5f0f\u7528\u4e8e\u4fdd\u5b58\u3001\u9000\u51fa\u548c\u6253\u5f00\u6587\u4ef6\uff0c\u4ee5\u53ca\u641c\u7d22\u3001\u66ff\u6362\u548c\u5176\u5b83\u66f4\u4e3a\u590d\u6742\u7684\u64cd\u4f5c\u3002","title":"\u4e09\u79cd\u6a21\u5f0f"},{"location":"RH124/day2/#_4","text":"\u6309\u952e \u4f5c\u7528 h \u6216 (\u2190) \u5149\u6807\u5411\u5de6\u79fb\u52a8\u4e00\u4e2a\u5b57\u7b26 j \u6216 (\u2193) \u5149\u6807\u5411\u4e0b\u79fb\u52a8\u4e00\u4e2a\u5b57\u7b26 k \u6216 (\u2191) \u5149\u6807\u5411\u4e0a\u79fb\u52a8\u4e00\u4e2a\u5b57\u7b26 l \u6216 (\u2192) \u5149\u6807\u5411\u53f3\u79fb\u52a8\u4e00\u4e2a\u5b57\u7b26 w \u5149\u6807\u79fb\u81f3\u4e0b\u4e00\u5355\u8bcd\u5f00\u5934 b \u5149\u6807\u79fb\u81f3\u4e0a\u4e00\u5355\u8bcd\u5f00\u5934 ( \u5149\u6807\u79fb\u81f3\u5355\u7b7e\u53e5\u5b50\u6216\u4e0a\u4e00\u53e5\u5b50\u7684\u5f00\u5934 ) \u5149\u6807\u79fb\u81f3\u4e0b\u4e00\u53e5\u5b50\u7684\u5f00\u5934 { \u5149\u6807\u79fb\u81f3\u5f53\u524d\u6216\u4e0a\u4e00\u6bb5\u843d\u5f00\u5934 } \u5149\u6807\u79fb\u81f3\u4e0b\u4e00\u6bb5\u843d\u5f00\u5934 ^ \u5149\u6807\u79fb\u81f3\u6240\u5728\u884c\u884c\u9996 $ \u5149\u6807\u79fb\u81f3\u6240\u5728\u884c\u884c\u5c3e gg \u5149\u6807\u79fb\u81f3\u6587\u6863\u7b2c\u4e00\u884c G \u5149\u6807\u79fb\u81f3\u6587\u6863\u6700\u540e\u4e00\u884c yy \u590d\u5236\u5149\u6807\u6240\u5728\u7684\u90a3\u4e00\u884c nyy n \u4e3a\u6570\u5b57\uff0c\u590d\u5236\u5149\u6807\u6240\u5728\u7684\u5411\u4e0b n \u884c dd \u526a\u5207\u5149\u6807\u6240\u5728\u7684\u90a3\u4e00\u6574\u884c ndd n \u4e3a\u6570\u5b57\uff0c\u526a\u5207\u5149\u6807\u6240\u5728\u7684\u5411\u4e0b n \u884c d^, d0 \u6570\u5b57 0 \uff0c\u526a\u5207\u5149\u6807\u6240\u5728\u5904\uff0c\u5230\u8be5\u884c\u9996\u7684\u5b57\u7b26 d$, D \u526a\u5207\u5149\u6807\u6240\u5728\u5904\uff0c\u5230\u8be5\u884c\u5c3e\u7684\u5b57\u7b26 cw \u66ff\u6362\u5149\u6807\u4f4d\u7f6e\u5230\u5355\u8bcd\u7ed3\u5c3e\u7684\u5185\u5bb9 ciw \u66ff\u6362\u5149\u6807\u6240\u5728\u4f4d\u7f6e\u5355\u8bcd caw \u66ff\u6362\u5149\u6807\u6240\u5728\u4f4d\u7f6e\u5355\u8bcd\uff0c\u5305\u62ec\u7a7a\u767d\u533a cc \u5149\u6807\u6240\u5728\u884c\u6574\u884c\u66ff\u6362 c^, c0 \u5149\u6807\u6240\u5728\u4f4d\u7f6e\u66ff\u6362\u5230\u884c\u9996 c$, C \u5149\u6807\u6240\u5728\u4f4d\u7f6e\u66ff\u6362\u5230\u884c\u5c3e ncc n \u4e3a\u6570\u5b57\uff0c\u66ff\u6362\u5149\u6807\u6240\u5728\u7684\u5411\u4e0b n \u884c x, X x \u5149\u6807\u4f4d\u7f6e\u5411\u540e\u5220\u9664\uff0cX \u5149\u6807\u4f4d\u7f6e\u5411\u524d\u5220\u9664 p, P p \u4e3a\u5c06\u5df2\u590d\u5236\u7684\u6570\u636e\u5728\u5149\u6807\u4e0b\u4e00\u884c\u8d34\u4e0a\uff0cP \u5219\u4e3a\u8d34\u5728\u5149\u6807\u4e0a\u4e00\u884c i, I i \u4e3a\u4ece\u5149\u6807\u6240\u5728\u5904\u8f93\u5165\uff1bI \u4e3a\u5728\u6240\u5728\u884c\u7684\u7b2c\u4e00\u4e2a\u975e\u7a7a\u683c\u7b26\u5904\u8f93\u5165 a, A a \u4e3a\u4ece\u5149\u6807\u6240\u5728\u7684\u4e0b\u4e00\u4e2a\u5b57\u7b26\u5904\u8f93\u5165\uff1b A \u4e3a\u4ece\u5149\u6807\u6240\u5728\u884c\u7684\u6700\u540e\u4e00\u4e2a\u5b57\u7b26\u5904\u8f93\u5165 o, O o \u4e3a\u5728\u5149\u6807\u6240\u5728\u7684\u4e0b\u4e00\u884c\u8f93\u5165\uff1b O \u4e3a\u5728\u5149\u6807\u6240\u5728\u4e0a\u4e00\u884c\u8f93\u5165 r, R r \u53ea\u53d6\u4ee3\u5149\u6807\u6240\u5728\u7684\u5b57\u7b26\u4e00\u6b21\uff1bR \u4e00\u76f4\u53d6\u4ee3\u5149\u6807\u6240\u5728\u7684\u5b57\u7b26\uff0c\u76f4\u5230\u6309\u4e0b ESC \u4e3a\u6b62 v, V, ctrl+v v \u5b57\u7b26\u53ef\u89c6\u5316\u7f16\u8f91\uff1bV \u884c\u53ef\u89c6\u5316\u7f16\u8f91\uff1bctrl+v \u5757\u53ef\u89c6\u5316\u7f16\u8f91 :w \u4fdd\u5b58\u66f4\u6539\u5e76\u7559\u5728\u7f16\u8f91\u5668\u4e2d :w filename \u53e6\u5b58\u4e3a\u4e00\u4e2a\u6587\u4ef6 :wq \u4fdd\u5b58\u5e76\u9000\u51fa :x \u4fdd\u5b58\u5f53\u524d\u6587\u4ef6\uff0c\u7136\u540e\u9000\u51fa :q \u9000\u51fa\u5f53\u524d\u6587\u4ef6\uff0c\u6ca1\u6709\u672a\u4fdd\u5b58\u66f4\u6539 :q! \u9000\u51fa\u5f53\u524d\u6587\u4ef6\uff0c\u5ffd\u7565\u672a\u4fdd\u5b58\u66f4\u6539","title":"\u57fa\u7840\u64cd\u4f5c"},{"location":"RH124/day2/#_5","text":"","title":"\u7528\u6237\u7ba1\u7406"},{"location":"RH124/day2/#_6","text":"\u7528\u6237 \uff1a\u7cfb\u7edf\u4e2d\u6bcf\u4e2a\u8fdb\u7a0b\uff08\u8fd0\u884c\u7a0b\u5e8f\uff09\u90fd\u7531\u4e00\u4e2a\u7279\u5b9a\u7528\u6237\u8fd0\u884c\u3002\u6bcf\u4e2a\u6587\u4ef6\u5f52\u4e00\u4e2a\u7279\u5b9a\u7528\u6237\u6240\u6709\u3002\u5bf9\u6587\u4ef6\u548c\u76ee\u5f55\u7684\u8bbf\u95ee\u6536\u5230\u7528\u6237\u8eab\u4efd\u7684\u9650\u5236\u3002\u4e0e\u8fd0\u884c\u8fdb\u7a0b\u76f8\u5173\u8fde\u5f97\u7528\u6237\u53ef\u4ee5\u786e\u5b9a\u8be5\u8fdb\u7a0b\u53ef\u8bbf\u95ee\u7684\u6587\u4ef6\u548c\u76ee\u5f55\u3002\u6bcf\u4e2a\u7528\u6237\u90fd\u6709\u81ea\u5df1\u7684\u7528\u6237\u540d\u548c\u7f16\u53f7\uff08UID\uff09\uff0c\u64cd\u4f5c\u7cfb\u7edf\u5185\u90e8\u662f\u901a\u8fc7 UID \u6765\u533a\u5206\u7528\u6237\u7684\u3002 UID \u4e3a 0 \u7684\u662f root \u7528\u6237\u3002 UID \u4e3a 1-200 \u4e3a\u7cfb\u7edf\u7528\u6237\uff0c\u9759\u6001\u5206\u914d\u7ed9\u7ea2\u5e3d\u7684\u7cfb\u7edf\u8fdb\u7a0b\u7684\u3002 UID \u4e3a 201-999 \u4e3a\u7cfb\u7edf\u7528\u6237\uff0c\u4f9b\u6587\u4ef6\u7cfb\u7edf\u4e2d\u6ca1\u6709\u81ea\u5df1\u7684\u6587\u4ef6\u7684\u7cfb\u7edf\u8fdb\u7a0b\u4f7f\u7528\uff0c\u901a\u5e38\u5728\u5b89\u88c5\u8f6f\u4ef6\u65f6\u4ece\u6c60\u4e2d\u52a8\u6001\u5206\u914d\uff0c\u9650\u5236\u5bf9\u5e94\u7a0b\u5e8f\u4ec5\u8bbf\u95ee\u5b83\u4eec\u6b63\u5e38\u8fd0\u884c\u6240\u9700\u7684\u8d44\u6e90\u3002 UID 1000+ \u4f9b\u666e\u901a\u7528\u6237\u4f7f\u7528\u3002 \u7ec4 \uff1a\u7ec4\u662f\u7528\u6237\u7684\u96c6\u5408\uff0c\u7ec4\u4e5f\u6709\u7ec4\u540d\u548c\u7f16\u53f7\uff08GID\uff09\u3002 \u4e3b\u8981\u7ec4 \uff1a\u6bcf\u4e2a\u7528\u6237\u6709\u4e00\u4e2a\u4e3b\u8981\u7ec4\uff0c\u7528\u6237\u521b\u5efa\u7684\u65b0\u6587\u4ef6\u5f52\u5176\u4e3b\u8981\u7ec4\u6240\u6709\u3002\u9ed8\u8ba4\u60c5\u51b5\u65b0\u5efa\u7528\u6237\u7684\u4e3b\u8981\u7ec4\u662f\u4e0e\u7528\u6237\u540c\u540d\u7684\u65b0\u5efa\u7ec4\u3002 \u8865\u5145\u7ec4 \uff1a\u7528\u6237\u53ef\u4ee5\u662f 0 \u4e2a\u6216\u591a\u4e2a\u8865\u5145\u7ec4\u7684\u6210\u5458\u3002\u8865\u5145\u7ec4\u6210\u5458\u8eab\u4efd\u7528\u4e8e\u786e\u4fdd\u7528\u6237\u5177\u6709\u5bf9\u7cfb\u7edf\u4e2d\u67d0\u4e9b\u6587\u4ef6\u53ca\u5176\u5b83\u8d44\u6e90\u7684\u8bbf\u95ee\u6743\u9650\u3002","title":"\u7528\u6237\u548c\u7ec4"},{"location":"RH124/day2/#_7","text":"\u547d\u4ee4 \u9009\u9879\u53ca\u4f5c\u7528 id \u67e5\u770b\u7528\u6237\u57fa\u672c\u4fe1\u606f\uff0c\u4e0d\u52a0\u53c2\u6570\u663e\u793a\u5f53\u524d\u7528\u6237 su - \u5207\u6362\u7528\u6237\uff0c\u4f7f\u7528 - \u5728\u5207\u6362\u7528\u6237\u7684\u540c\u65f6\u66f4\u65b0\u73af\u5883\u53d8\u91cf\uff0c\u4e0d\u52a0\u53c2\u6570\u5207\u6362 root \u7528\u6237 useradd \u521b\u5efa\u7528\u6237\uff0c-u \u6307\u5b9a uid\uff0c-g \u6307\u5b9a\u57fa\u672c\u7ec4\uff0c-G \u6307\u5b9a\u6269\u5c55\u7ec4\uff0c-s \u6307\u5b9a\u9ed8\u8ba4 shell\uff0c-N \u4e0d\u521b\u5efa\u540c\u540d\u57fa\u672c\u7ec4\uff0c-d \u6307\u5b9a\u5bb6\u76ee\u5f55 groupadd \u521b\u5efa\u7ec4\uff0c-g \u6307\u5b9a gid usermod \u4fee\u6539\u7528\u6237\uff0c-s \u4fee\u6539shell\uff0c-u \u4fee\u6539 uid\uff0c-g \u4fee\u6539\u57fa\u672c\u7ec4\uff0c-G \u4fee\u6539\u6269\u5c55\u7ec4\uff0c-aG \u6dfb\u52a0\u6269\u5c55\u7ec4\uff0c-L \u9501\u5b9a\uff0c-U \u89e3\u9501\uff0c-m -d \u6307\u5b9a\u65b0\u5bb6\u76ee\u5f55\u5e76\u8f6c\u79fb\u7528\u6237\u6570\u636e userdel \u5220\u9664\u7528\u6237\uff0c-r \u5220\u9664\u7528\u6237\u5bb6\u76ee\u5f55 groupmod \u4fee\u6539\u7ec4\uff0c-g \u4fee\u6539 gid\uff0c-n \u4fee\u6539\u7ec4\u540d chown \u4fee\u6539\u6587\u4ef6\u6216\u76ee\u5f55\u6240\u6709\u8005\u53ca\u6240\u5c5e\u7ec4\uff0c-R \u9012\u5f52 chgrp \u4fee\u6539\u6587\u4ef6\u6216\u76ee\u5f55\u6240\u5c5e\u7ec4\uff0c-R \u9012\u5f52","title":"\u7528\u6237\u7ba1\u7406\u547d\u4ee4"},{"location":"RH124/day2/#sudo","text":"sudo \u662f linux \u7cfb\u7edf\u7ba1\u7406\u6307\u4ee4\uff0c\u662f\u5141\u8bb8\u7cfb\u7edf\u7ba1\u7406\u5458\u8ba9\u666e\u901a\u7528\u6237\u6267\u884c\u4e00\u4e9b\u6216\u8005\u5168\u90e8\u7684 root \u547d\u4ee4\u7684\u4e00\u4e2a\u5de5\u5177\u51cf\u5c11\u4e86 root \u7528\u6237\u7684\u767b\u5f55 \u548c\u7ba1\u7406\u65f6\u95f4\uff0c\u540c\u6837\u4e5f\u63d0\u9ad8\u4e86\u5b89\u5168\u6027\u3002 \u914d\u7f6e\u6587\u4ef6\uff1a/etc/sudoers \u683c\u5f0f\uff1a user host run_as command user\uff1a\u7528\u6237\u6216\u7ec4\uff0c\u7ec4\u8981\u4ee5%\u5f00\u5934 host\uff1a\u4e3b\u673a\u540d run_as \u4f5c\u4e3a\u54ea\u4e2a\u7528\u6237\u6267\u884c\uff0c\u5e38\u7528 root \u6216 ALL command \u8ba9\u7528\u6237\u6216\u7ec4\u8fd0\u884c\u7684\u4e00\u4e2a\u6216\u591a\u4e2a\u6839\u7ea7\u522b\u547d\u4ee4","title":"sudo"},{"location":"RH124/day2/#_8","text":"1.\u521b\u5efa\u7528\u6237useradmin\uff0clogviewer\uff0cdiskmanager 2.\u901a\u8fc7visudo\u8d4b\u4e88useradmin\u521b\u5efa\u5220\u9664\u7528\u6237\u7684\u6743\u9650\uff0c\u8d4b\u4e88logviewer\u67e5\u770b\u65e5\u5fd7\u7684\u6743\u9650\uff0c\u8d4b\u4e88diskmanager\u5206\u533a\u6743\u9650 3.\u901a\u8fc7useradmin\u7528\u6237\u521b\u5efa\u7528\u6237user1\uff0cuser2\uff0cuser3\uff0cuser4 user1\u662flogviewer\u7ec4\u6210\u5458\uff0c\u53ef\u4ee5\u67e5\u770b\u65e5\u5fd7 user2\u7528\u6237\u7684shell\u4e3a/sbin/nologin user3\u7684\u5bb6\u76ee\u5f55\u4f4d\u4e8e/user3 user4\u7684uid\u4e3a10086 [root@server0 ~]# useradd useradmin [root@server0 ~]# useradd logviewer [root@server0 ~]# useradd diskmanager [root@server0 ~]# echo redhat | passwd --stdin useradmin [root@server0 ~]# echo redhat | passwd --stdin logviewer [root@server0 ~]# echo redhat | passwd --stdin diskmanager [root@server0 ~]# visudo useradmin ALL=(root) NOPASSWD: /usr/sbin/useradd,/usr/sbin/userdel %logviewer ALL=(root) NOPASSWD: /usr/bin/cat diskmanager ALL=(root) NOPASSWD: /usr/sbin/fdisk [root@server0 ~]# su - useradmin [useradmin@server0 ~]$ sudo useradd -G logviewer user1 [useradmin@server0 ~]$ sudo useradd -s /sbin/nologin user2 [useradmin@server0 ~]$ sudo useradd -d /user3 user3 [useradmin@server0 ~]$ sudo useradd -u 10086 user4 [useradmin@server0 ~]$ exit [root@server0 ~]# echo redhat | passwd --stdin user1 [root@server0 ~]# echo redhat | passwd --stdin user2 [root@server0 ~]# echo redhat | passwd --stdin user3 [root@server0 ~]# echo redhat | passwd --stdin user4 [root@server0 ~]# su - logviewer [logviewer@server0 ~]$ cat /var/log/messages [logviewer@server0 ~]$ sudo cat /var/log/messages [logviewer@server0 ~]$ exit [root@server0 ~]# su - user1 [user1@server0 ~]$ cat /var/log/messages [user1@server0 ~]$ sudo cat /var/log/messages [user1@server0 ~]$ exit [root@server0 ~]# su - diskmanager [diskmanager@server0 ~]$ fdisk /dev/vdb [diskmanager@server0 ~]$ sudo fdisk /dev/vdb","title":"\u7ec3\u4e60"},{"location":"RH124/day3/","text":"\u7b2c3\u5929 \u6743\u9650\u63a7\u5236 \u6743\u9650\u67e5\u770b [root@server ~]# ls -l -rw-------. 1 root root 1100 Jan 22 10:25 anaconda-ks.cfg \u6587\u4ef6\u7c7b\u578b\u3001\u6743\u9650 \u786c\u94fe\u63a5\u6570 \u6240\u6709\u8005\u540d \u6240\u5c5e\u7ec4\u540d \u5927\u5c0f \u4fee\u6539\u65f6\u95f4 \u6587\u4ef6\u540d UGO \u6743\u9650 \u6743\u9650 \u6587\u4ef6 \u76ee\u5f55 r\uff08Read\uff0c\u8bfb\u53d6\uff09 \u5bf9\u6587\u4ef6\u800c\u8a00\uff0c\u5177\u6709\u8bfb\u53d6\u6587\u4ef6\u5185\u5bb9\u7684\u6743\u9650\u3002 \u5bf9\u76ee\u5f55\u800c\u8a00\uff0c\u5177\u6709\u6d4f\u89c8\u76ee\u5f55\u7684\u6743\u9650\u3002 w\uff08Write\uff0c\u5199\u5165\uff09 \u5bf9\u6587\u4ef6\u800c\u8a00\uff0c\u5177\u6709\u65b0\u589e\u3001\u4fee\u6539\u3001\u5220\u9664\u6587\u4ef6\u5185\u5bb9\u7684\u6743\u9650 \u5bf9\u76ee\u5f55\u800c\u8a00\uff0c\u5177\u6709\u65b0\u5efa\u3001\u5220\u9664\u3001\u4fee\u6539\u3001\u79fb\u52a8\u76ee\u5f55\u5185\u6587\u4ef6\u7684\u6743\u9650\u3002 x\uff08eXecute\uff0c\u6267\u884c\uff09 \u5bf9\u6587\u4ef6\u800c\u8a00\uff0c\u5177\u6709\u6267\u884c\u6587\u4ef6\u7684\u6743\u9650\u3002 \u5bf9\u76ee\u5f55\u800c\u8a00\uff0c\u5177\u6709\u8fdb\u5165\u8be5\u76ee\u5f55\u7684\u6743\u9650\u3002 \u7279\u6b8a\u6743\u9650\uff08UGO+\uff09 \u7279\u6b8a\u6743\u9650 \u6587\u4ef6 \u76ee\u5f55 suid\uff08u+s\uff09 \u4ee5\u6587\u4ef6\u6240\u6709\u8005\u8eab\u4efd\u53bb\u6267\u884c\u4e8c\u8fdb\u5236\u6587\u4ef6\uff0c\u800c\u4e0d\u662f\u8fd0\u884c\u6587\u4ef6\u7684\u7528\u6237\u8eab\u4efd\u6267\u884c\u3002 \u65e0\u5f71\u54cd\u3002 sgid\uff08g+s\uff09 \u4ee5\u6587\u4ef6\u7684\u6240\u5c5e\u7ec4\u8eab\u4efd\u6267\u884c\u4e8c\u8fdb\u5236\u6587\u4ef6\u3002 \u5728\u8be5\u76ee\u5f55\u4e2d\u65b0\u5efa\u7684\u6587\u4ef6\u6216\u76ee\u5f55\u6240\u5c5e\u7ec4\u7ee7\u627f\u8be5\u76ee\u5f55\u7684\u6240\u5c5e\u7ec4\u3002 sticky\uff08o+t\uff09 \u65e0\u5f71\u54cd\u3002 \u5bf9\u8be5\u76ee\u5f55\u6709\u5199\u6743\u9650\u7684\u7528\u6237\u4ec5\u53ef\u4ee5\u5220\u9664\u81ea\u5df1\u7684\u6587\u4ef6\uff0c\u65e0\u6cd5\u5220\u9664\u6216\u5f3a\u5236\u4fdd\u5b58\u66f4\u6539\u5230\u5176\u4ed6\u7528\u6237\u6240\u62e5\u6709\u7684\u7684\u6587\u4ef6\uff0croot \u7528\u6237\u9664\u5916\u3002 \u6743\u9650\u4fee\u6539 \u7b26\u53f7\u5173\u952e\u5b57 \uff1a chmod WhoWhatWhich file|directory Who\uff1au\uff08\u6240\u6709\u8005\uff09\uff0cg\uff08\u6240\u5c5e\u7ec4\uff09\uff0co\uff08\u5176\u4ed6\u4eba\uff09\uff0ca\uff08\u6240\u6709\uff09 What\uff1a+\uff0c-\uff0c= Which\uff1ar\uff08\u8bfb\uff09\uff0cw\uff08\u5199\uff09\uff0cx\uff08\u6267\u884c\uff09,s\uff08suid\uff0csgid\uff09\uff0ct\uff08sticky\uff09 \u4fee\u6539\u76ee\u5f55\u53ef\u4ee5\u4f7f\u7528 -R \u9009\u9879\u9012\u5f52 \u6570\u503c \uff1a chmod [0-7][0-7][0-7][0-7] file|directory \u7b2c\u4e00\u4f4d\uff1a\u7279\u6b8a\u6743\u9650\uff08u+s:4\uff0cg+s:2\uff0co+t:1\uff09 \u7b2c\u4e8c\u4f4d\uff1a\u6240\u6709\u8005\uff08r:4\uff0cw:2\uff0cx:1\uff09 \u7b2c\u4e09\u4f4d\uff1a\u6240\u5c5e\u7ec4\uff08r:4\uff0cw:2\uff0cx:1\uff09 \u7b2c\u56db\u4f4d\uff1a\u5176\u4ed6\u4eba\uff08r:4\uff0cw:2\uff0cx:1\uff09 \u82e5\u65e0\u7279\u6b8a\u6743\u9650\u7528\u540e\u4e09\u4f4d\u8868\u793a umask root \u9ed8\u8ba4 umask\uff1a0022 \u666e\u901a\u7528\u6237\u9ed8\u8ba4 umask\uff1a0002 \u6587\u4ef6\u9ed8\u8ba4\u6743\u9650\uff1a777 - umask \u76ee\u5f55\u9ed8\u8ba4\u6743\u9650\uff1a666 - umask \u8fdb\u7a0b\u76d1\u63a7 \u4ec0\u4e48\u662f\u8fdb\u7a0b\uff1f \u7a0b\u5e8f\u662f\u4e00\u4e2a\u5305\u542b\u53ef\u4ee5\u6267\u884c\u4ee3\u7801\u7684\u9759\u6001\u7684\u6587\u4ef6\u3002\u8fdb\u7a0b\u662f\u4e00\u4e2a\u5f00\u59cb\u6267\u884c\u4f46\u662f\u8fd8\u6ca1\u6709\u7ed3\u675f\u7684\u7a0b\u5e8f\u7684\u5b9e\u4f8b\u3002 \u5f53\u7a0b\u5e8f\u88ab\u7cfb\u7edf\u8c03\u7528\u5230\u5185\u5b58\u4ee5\u540e\uff0c\u7cfb\u7edf\u4f1a\u7ed9\u7a0b\u5e8f\u5206\u914d\u4e00\u5b9a\u7684\u8d44\u6e90\uff08\u5185\u5b58\uff0c\u8bbe\u5907\u7b49\u7b49\uff09\u7136\u540e\u8fdb\u884c\u4e00\u7cfb\u5217\u7684\u590d\u6742\u64cd\u4f5c\uff0c\u4f7f\u7a0b\u5e8f\u53d8\u6210\u8fdb\u7a0b\u4ee5\u4f9b\u7cfb\u7edf\u8c03\u7528\u3002 \u8fdb\u7a0b\u7684\u5206\u7c7b \u7cfb\u7edf\u8fdb\u7a0b \u53ef\u4ee5\u6267\u884c\u5185\u5b58\u8d44\u6e90\u5206\u914d\u548c\u8fdb\u7a0b\u5207\u6362\u7b49\u7ba1\u7406\u5de5\u4f5c\uff0c\u800c\u4e14\u8be5\u8fdb\u7a0b\u7684\u8fd0\u884c\u4e0d\u53d7\u7528\u6237\u7684\u5e72\u9884\uff0c\u5373\u4f7f\u662froot\u7528\u6237\u4e5f\u4e0d\u80fd\u5e72\u9884\u7cfb\u7edf\u8fdb\u7a0b\u7684\u8fd0\u884c\u3002 \u7528\u6237\u8fdb\u7a0b \u901a\u8fc7\u6267\u884c\u7528\u6237\u7a0b\u5e8f\u3001\u5e94\u7528\u7a0b\u5e8f\u6216\u5185\u6838\u4e4b\u5916\u7684\u7cfb\u7edf\u7a0b\u5e8f\u800c\u4ea7\u751f\u7684\u8fdb\u7a0b\uff0c\u6b64\u7c7b\u8fdb\u7a0b\u53ef\u4ee5\u5728\u7528\u6237\u7684\u63a7\u5236\u4e0b\u8fd0\u884c\u6216\u5173\u95ed\u3002\u7528\u6237\u8fdb\u7a0b\u53ef\u4ee5\u5206\u4e3a3\u7c7b\uff1a \u4ea4\u4e92\u8fdb\u7a0b \uff1a\u7531\u4e00\u4e2aShell\u7ec8\u7aef\u5176\u4ed6\u7684\u8fdb\u7a0b\uff0c\u5728\u6267\u884c\u8fc7\u7a0b\u4e2d\uff0c\u9700\u8981\u4e0e\u7528\u6237\u8fdb\u884c\u4ea4\u4e92\u64cd\u4f5c\uff0c\u53ef\u4ee5\u8fd0\u884c\u4e8e\u524d\u53f0\uff0c\u4e5f\u53ef\u4ee5\u8fd0\u884c\u4e8e\u540e\u53f0\u3002 \u6279\u5904\u7406\u8fdb\u7a0b \uff1a\u8be5\u8fdb\u7a0b\u662f\u4e00\u4e2a\u8fdb\u7a0b\u96c6\u5408\uff0c\u8d1f\u8d23\u6309\u987a\u5e8f\u542f\u52a8\u5176\u4ed6\u7684\u8fdb\u7a0b\u3002 \u5b88\u62a4\u8fdb\u7a0b \uff1a\u5b88\u62a4\u8fdb\u7a0b\u662f\u4e00\u76f4\u8fd0\u884c\u7684\u4e00\u79cd\u8fdb\u7a0b\uff0c\u7ecf\u5e38\u5728Linux\u7cfb\u7edf\u65f6\u542f\u52a8\uff0c\u5728\u7cfb\u7edf\u5173\u95ed\u65f6\u7ec8\u6b62\u3002\u5b83\u4eec\u72ec\u7acb\u4e8e\u63a7\u5236\u7ec8\u7aef\u4e14\u5468\u671f\u6027\u5730\u8d28\u5b66\u67d0\u79cd\u4efb\u52a1\u6216\u7b49\u5f85\u5904\u7406\u67d0\u4e9b\u53d1\u751f\u7684\u65f6\u95f4\u3002\u4f8b\uff0chttpd\u8fdb\u7a0b\uff0ccrond\u8fdb\u7a0b\u7b49\u3002 \u67e5\u770b\u8fdb\u7a0b ps aux a \u663e\u793a\u73b0\u884c\u7ec8\u7aef\u4e0b\u8fdb\u7a0b\uff0c\u5305\u62ec\u5176\u4ed6\u7528\u6237\u7684 u \u4ee5\u7528\u6237\u4e3a\u4e3b\u663e\u793a x \u663e\u793a\u6ca1\u6709\u7ec8\u7aef\u7684\u8fdb\u7a0b ps -ef -e \u6240\u6709\u8fdb\u7a0b -f \u5168\u683c\u5f0f top \u5b9e\u65f6\u8fdb\u7a0b\u72b6\u6001 \u8fdb\u7a0b\u72b6\u6001 \u72b6\u6001 \u63cf\u8ff0 R \u8fdb\u7a0b\u6b63\u5728\u6267\u884c\u7cfb\u7edf\u8c03\u7528 \u8fdb\u7a0b\u5df2\u8c03\u5ea6\uff0c\u4f46\u5c1a\u672a\u5728 CPU \u4e0a S \u8fdb\u7a0b\u5728\u63d0\u793a\u7b26\u5904\uff0c\u9700\u8981\u7528\u6237\u8f93\u5165 \u8fdb\u7a0b\u6b63\u5728\u7b49\u5f85 I/O D \u8fdb\u7a0b\u4e0d\u53ef\u4e2d\u65ad\u7b49\u5f85\u8bbe\u5907\u54cd\u5e94 T \u8fdb\u7a0b\u5df2\u88ab\u4e34\u65f6\u505c\u6b62 Z \u8fdb\u7a0b\u521a\u88ab\u7ec8\u6b62 \u524d\u53f0\u3001\u540e\u53f0\u4f5c\u4e1a \u6267\u884c\u547d\u4ee4\u65f6\u7ed3\u5c3e\u52a0 & \u53ef\u5c06\u4efb\u52a1\u7f6e\u4e8e\u540e\u53f0\u6267\u884c jobs \u53ef\u4ee5\u67e5\u770b\u540e\u53f0\u4f5c\u4e1a bg ID \u53ef\u5c06\u540e\u53f0\u505c\u6b62\u4f5c\u4e1a\u91cd\u65b0\u5728\u540e\u53f0\u6267\u884c fg ID \u53ef\u5c06\u540e\u53f0\u4f5c\u4e1a\u7f6e\u4e8e\u524d\u53f0\u8fd0\u884c \u8fdb\u7a0b\u53d1\u9001\u4fe1\u53f7 kill killall pkill \u4fe1\u53f7\u7f16\u53f7 \u540d\u79f0 \u4f5c\u7528 1 SIGHUP \u6302\u8d77 2 SIGINT \u952e\u76d8\u4e2d\u65ad\uff08ctrl+c\uff09 3 SIGQUIT \u952e\u76d8\u9000\u51fa 9 SIGKILL \u5f3a\u5236\u7ec8\u6b62\uff0c\u65e0\u6cd5\u62e6\u622a 15 SIGTERM \u53cb\u597d\u7ec8\u6b62 18 SIGCONT \u7ee7\u7eed\uff0c\u65e0\u6cd5\u62e6\u622a 19 SIGSTOP \u505c\u6b62\uff0c\u65e0\u6cd5\u62e6\u622a 20 SIGTSTP \u952e\u76d8\u505c\u6b62\uff08ctrl+z\uff09 \u7b28\u529e\u6cd5\u5b66Linux-\u5904\u7406\u8fdb\u7a0b, ps, kill","title":"\u7b2c3\u5929"},{"location":"RH124/day3/#3","text":"","title":"\u7b2c3\u5929"},{"location":"RH124/day3/#_1","text":"","title":"\u6743\u9650\u63a7\u5236"},{"location":"RH124/day3/#_2","text":"[root@server ~]# ls -l -rw-------. 1 root root 1100 Jan 22 10:25 anaconda-ks.cfg \u6587\u4ef6\u7c7b\u578b\u3001\u6743\u9650 \u786c\u94fe\u63a5\u6570 \u6240\u6709\u8005\u540d \u6240\u5c5e\u7ec4\u540d \u5927\u5c0f \u4fee\u6539\u65f6\u95f4 \u6587\u4ef6\u540d","title":"\u6743\u9650\u67e5\u770b"},{"location":"RH124/day3/#ugo","text":"\u6743\u9650 \u6587\u4ef6 \u76ee\u5f55 r\uff08Read\uff0c\u8bfb\u53d6\uff09 \u5bf9\u6587\u4ef6\u800c\u8a00\uff0c\u5177\u6709\u8bfb\u53d6\u6587\u4ef6\u5185\u5bb9\u7684\u6743\u9650\u3002 \u5bf9\u76ee\u5f55\u800c\u8a00\uff0c\u5177\u6709\u6d4f\u89c8\u76ee\u5f55\u7684\u6743\u9650\u3002 w\uff08Write\uff0c\u5199\u5165\uff09 \u5bf9\u6587\u4ef6\u800c\u8a00\uff0c\u5177\u6709\u65b0\u589e\u3001\u4fee\u6539\u3001\u5220\u9664\u6587\u4ef6\u5185\u5bb9\u7684\u6743\u9650 \u5bf9\u76ee\u5f55\u800c\u8a00\uff0c\u5177\u6709\u65b0\u5efa\u3001\u5220\u9664\u3001\u4fee\u6539\u3001\u79fb\u52a8\u76ee\u5f55\u5185\u6587\u4ef6\u7684\u6743\u9650\u3002 x\uff08eXecute\uff0c\u6267\u884c\uff09 \u5bf9\u6587\u4ef6\u800c\u8a00\uff0c\u5177\u6709\u6267\u884c\u6587\u4ef6\u7684\u6743\u9650\u3002 \u5bf9\u76ee\u5f55\u800c\u8a00\uff0c\u5177\u6709\u8fdb\u5165\u8be5\u76ee\u5f55\u7684\u6743\u9650\u3002","title":"UGO \u6743\u9650"},{"location":"RH124/day3/#ugo_1","text":"\u7279\u6b8a\u6743\u9650 \u6587\u4ef6 \u76ee\u5f55 suid\uff08u+s\uff09 \u4ee5\u6587\u4ef6\u6240\u6709\u8005\u8eab\u4efd\u53bb\u6267\u884c\u4e8c\u8fdb\u5236\u6587\u4ef6\uff0c\u800c\u4e0d\u662f\u8fd0\u884c\u6587\u4ef6\u7684\u7528\u6237\u8eab\u4efd\u6267\u884c\u3002 \u65e0\u5f71\u54cd\u3002 sgid\uff08g+s\uff09 \u4ee5\u6587\u4ef6\u7684\u6240\u5c5e\u7ec4\u8eab\u4efd\u6267\u884c\u4e8c\u8fdb\u5236\u6587\u4ef6\u3002 \u5728\u8be5\u76ee\u5f55\u4e2d\u65b0\u5efa\u7684\u6587\u4ef6\u6216\u76ee\u5f55\u6240\u5c5e\u7ec4\u7ee7\u627f\u8be5\u76ee\u5f55\u7684\u6240\u5c5e\u7ec4\u3002 sticky\uff08o+t\uff09 \u65e0\u5f71\u54cd\u3002 \u5bf9\u8be5\u76ee\u5f55\u6709\u5199\u6743\u9650\u7684\u7528\u6237\u4ec5\u53ef\u4ee5\u5220\u9664\u81ea\u5df1\u7684\u6587\u4ef6\uff0c\u65e0\u6cd5\u5220\u9664\u6216\u5f3a\u5236\u4fdd\u5b58\u66f4\u6539\u5230\u5176\u4ed6\u7528\u6237\u6240\u62e5\u6709\u7684\u7684\u6587\u4ef6\uff0croot \u7528\u6237\u9664\u5916\u3002","title":"\u7279\u6b8a\u6743\u9650\uff08UGO+\uff09"},{"location":"RH124/day3/#_3","text":"\u7b26\u53f7\u5173\u952e\u5b57 \uff1a chmod WhoWhatWhich file|directory Who\uff1au\uff08\u6240\u6709\u8005\uff09\uff0cg\uff08\u6240\u5c5e\u7ec4\uff09\uff0co\uff08\u5176\u4ed6\u4eba\uff09\uff0ca\uff08\u6240\u6709\uff09 What\uff1a+\uff0c-\uff0c= Which\uff1ar\uff08\u8bfb\uff09\uff0cw\uff08\u5199\uff09\uff0cx\uff08\u6267\u884c\uff09,s\uff08suid\uff0csgid\uff09\uff0ct\uff08sticky\uff09 \u4fee\u6539\u76ee\u5f55\u53ef\u4ee5\u4f7f\u7528 -R \u9009\u9879\u9012\u5f52 \u6570\u503c \uff1a chmod [0-7][0-7][0-7][0-7] file|directory \u7b2c\u4e00\u4f4d\uff1a\u7279\u6b8a\u6743\u9650\uff08u+s:4\uff0cg+s:2\uff0co+t:1\uff09 \u7b2c\u4e8c\u4f4d\uff1a\u6240\u6709\u8005\uff08r:4\uff0cw:2\uff0cx:1\uff09 \u7b2c\u4e09\u4f4d\uff1a\u6240\u5c5e\u7ec4\uff08r:4\uff0cw:2\uff0cx:1\uff09 \u7b2c\u56db\u4f4d\uff1a\u5176\u4ed6\u4eba\uff08r:4\uff0cw:2\uff0cx:1\uff09 \u82e5\u65e0\u7279\u6b8a\u6743\u9650\u7528\u540e\u4e09\u4f4d\u8868\u793a","title":"\u6743\u9650\u4fee\u6539"},{"location":"RH124/day3/#umask","text":"root \u9ed8\u8ba4 umask\uff1a0022 \u666e\u901a\u7528\u6237\u9ed8\u8ba4 umask\uff1a0002 \u6587\u4ef6\u9ed8\u8ba4\u6743\u9650\uff1a777 - umask \u76ee\u5f55\u9ed8\u8ba4\u6743\u9650\uff1a666 - umask","title":"umask"},{"location":"RH124/day3/#_4","text":"","title":"\u8fdb\u7a0b\u76d1\u63a7"},{"location":"RH124/day3/#_5","text":"\u7a0b\u5e8f\u662f\u4e00\u4e2a\u5305\u542b\u53ef\u4ee5\u6267\u884c\u4ee3\u7801\u7684\u9759\u6001\u7684\u6587\u4ef6\u3002\u8fdb\u7a0b\u662f\u4e00\u4e2a\u5f00\u59cb\u6267\u884c\u4f46\u662f\u8fd8\u6ca1\u6709\u7ed3\u675f\u7684\u7a0b\u5e8f\u7684\u5b9e\u4f8b\u3002 \u5f53\u7a0b\u5e8f\u88ab\u7cfb\u7edf\u8c03\u7528\u5230\u5185\u5b58\u4ee5\u540e\uff0c\u7cfb\u7edf\u4f1a\u7ed9\u7a0b\u5e8f\u5206\u914d\u4e00\u5b9a\u7684\u8d44\u6e90\uff08\u5185\u5b58\uff0c\u8bbe\u5907\u7b49\u7b49\uff09\u7136\u540e\u8fdb\u884c\u4e00\u7cfb\u5217\u7684\u590d\u6742\u64cd\u4f5c\uff0c\u4f7f\u7a0b\u5e8f\u53d8\u6210\u8fdb\u7a0b\u4ee5\u4f9b\u7cfb\u7edf\u8c03\u7528\u3002","title":"\u4ec0\u4e48\u662f\u8fdb\u7a0b\uff1f"},{"location":"RH124/day3/#_6","text":"\u7cfb\u7edf\u8fdb\u7a0b \u53ef\u4ee5\u6267\u884c\u5185\u5b58\u8d44\u6e90\u5206\u914d\u548c\u8fdb\u7a0b\u5207\u6362\u7b49\u7ba1\u7406\u5de5\u4f5c\uff0c\u800c\u4e14\u8be5\u8fdb\u7a0b\u7684\u8fd0\u884c\u4e0d\u53d7\u7528\u6237\u7684\u5e72\u9884\uff0c\u5373\u4f7f\u662froot\u7528\u6237\u4e5f\u4e0d\u80fd\u5e72\u9884\u7cfb\u7edf\u8fdb\u7a0b\u7684\u8fd0\u884c\u3002 \u7528\u6237\u8fdb\u7a0b \u901a\u8fc7\u6267\u884c\u7528\u6237\u7a0b\u5e8f\u3001\u5e94\u7528\u7a0b\u5e8f\u6216\u5185\u6838\u4e4b\u5916\u7684\u7cfb\u7edf\u7a0b\u5e8f\u800c\u4ea7\u751f\u7684\u8fdb\u7a0b\uff0c\u6b64\u7c7b\u8fdb\u7a0b\u53ef\u4ee5\u5728\u7528\u6237\u7684\u63a7\u5236\u4e0b\u8fd0\u884c\u6216\u5173\u95ed\u3002\u7528\u6237\u8fdb\u7a0b\u53ef\u4ee5\u5206\u4e3a3\u7c7b\uff1a \u4ea4\u4e92\u8fdb\u7a0b \uff1a\u7531\u4e00\u4e2aShell\u7ec8\u7aef\u5176\u4ed6\u7684\u8fdb\u7a0b\uff0c\u5728\u6267\u884c\u8fc7\u7a0b\u4e2d\uff0c\u9700\u8981\u4e0e\u7528\u6237\u8fdb\u884c\u4ea4\u4e92\u64cd\u4f5c\uff0c\u53ef\u4ee5\u8fd0\u884c\u4e8e\u524d\u53f0\uff0c\u4e5f\u53ef\u4ee5\u8fd0\u884c\u4e8e\u540e\u53f0\u3002 \u6279\u5904\u7406\u8fdb\u7a0b \uff1a\u8be5\u8fdb\u7a0b\u662f\u4e00\u4e2a\u8fdb\u7a0b\u96c6\u5408\uff0c\u8d1f\u8d23\u6309\u987a\u5e8f\u542f\u52a8\u5176\u4ed6\u7684\u8fdb\u7a0b\u3002 \u5b88\u62a4\u8fdb\u7a0b \uff1a\u5b88\u62a4\u8fdb\u7a0b\u662f\u4e00\u76f4\u8fd0\u884c\u7684\u4e00\u79cd\u8fdb\u7a0b\uff0c\u7ecf\u5e38\u5728Linux\u7cfb\u7edf\u65f6\u542f\u52a8\uff0c\u5728\u7cfb\u7edf\u5173\u95ed\u65f6\u7ec8\u6b62\u3002\u5b83\u4eec\u72ec\u7acb\u4e8e\u63a7\u5236\u7ec8\u7aef\u4e14\u5468\u671f\u6027\u5730\u8d28\u5b66\u67d0\u79cd\u4efb\u52a1\u6216\u7b49\u5f85\u5904\u7406\u67d0\u4e9b\u53d1\u751f\u7684\u65f6\u95f4\u3002\u4f8b\uff0chttpd\u8fdb\u7a0b\uff0ccrond\u8fdb\u7a0b\u7b49\u3002","title":"\u8fdb\u7a0b\u7684\u5206\u7c7b"},{"location":"RH124/day3/#_7","text":"ps aux a \u663e\u793a\u73b0\u884c\u7ec8\u7aef\u4e0b\u8fdb\u7a0b\uff0c\u5305\u62ec\u5176\u4ed6\u7528\u6237\u7684 u \u4ee5\u7528\u6237\u4e3a\u4e3b\u663e\u793a x \u663e\u793a\u6ca1\u6709\u7ec8\u7aef\u7684\u8fdb\u7a0b ps -ef -e \u6240\u6709\u8fdb\u7a0b -f \u5168\u683c\u5f0f top \u5b9e\u65f6\u8fdb\u7a0b\u72b6\u6001 \u8fdb\u7a0b\u72b6\u6001 \u72b6\u6001 \u63cf\u8ff0 R \u8fdb\u7a0b\u6b63\u5728\u6267\u884c\u7cfb\u7edf\u8c03\u7528 \u8fdb\u7a0b\u5df2\u8c03\u5ea6\uff0c\u4f46\u5c1a\u672a\u5728 CPU \u4e0a S \u8fdb\u7a0b\u5728\u63d0\u793a\u7b26\u5904\uff0c\u9700\u8981\u7528\u6237\u8f93\u5165 \u8fdb\u7a0b\u6b63\u5728\u7b49\u5f85 I/O D \u8fdb\u7a0b\u4e0d\u53ef\u4e2d\u65ad\u7b49\u5f85\u8bbe\u5907\u54cd\u5e94 T \u8fdb\u7a0b\u5df2\u88ab\u4e34\u65f6\u505c\u6b62 Z \u8fdb\u7a0b\u521a\u88ab\u7ec8\u6b62","title":"\u67e5\u770b\u8fdb\u7a0b"},{"location":"RH124/day3/#_8","text":"\u6267\u884c\u547d\u4ee4\u65f6\u7ed3\u5c3e\u52a0 & \u53ef\u5c06\u4efb\u52a1\u7f6e\u4e8e\u540e\u53f0\u6267\u884c jobs \u53ef\u4ee5\u67e5\u770b\u540e\u53f0\u4f5c\u4e1a bg ID \u53ef\u5c06\u540e\u53f0\u505c\u6b62\u4f5c\u4e1a\u91cd\u65b0\u5728\u540e\u53f0\u6267\u884c fg ID \u53ef\u5c06\u540e\u53f0\u4f5c\u4e1a\u7f6e\u4e8e\u524d\u53f0\u8fd0\u884c","title":"\u524d\u53f0\u3001\u540e\u53f0\u4f5c\u4e1a"},{"location":"RH124/day3/#_9","text":"kill killall pkill \u4fe1\u53f7\u7f16\u53f7 \u540d\u79f0 \u4f5c\u7528 1 SIGHUP \u6302\u8d77 2 SIGINT \u952e\u76d8\u4e2d\u65ad\uff08ctrl+c\uff09 3 SIGQUIT \u952e\u76d8\u9000\u51fa 9 SIGKILL \u5f3a\u5236\u7ec8\u6b62\uff0c\u65e0\u6cd5\u62e6\u622a 15 SIGTERM \u53cb\u597d\u7ec8\u6b62 18 SIGCONT \u7ee7\u7eed\uff0c\u65e0\u6cd5\u62e6\u622a 19 SIGSTOP \u505c\u6b62\uff0c\u65e0\u6cd5\u62e6\u622a 20 SIGTSTP \u952e\u76d8\u505c\u6b62\uff08ctrl+z\uff09 \u7b28\u529e\u6cd5\u5b66Linux-\u5904\u7406\u8fdb\u7a0b, ps, kill","title":"\u8fdb\u7a0b\u53d1\u9001\u4fe1\u53f7"},{"location":"RH124/day4/","text":"\u7b2c4\u5929 Systemd systemd \u8fdb\u7a0b ID \u4e3a 1\uff0c\u662f\u6240\u6709\u8fdb\u7a0b\u7684\u7236\u8fdb\u7a0b\uff0c\u8d1f\u8d23\u6fc0\u6d3b\u7cfb\u7edf\u4e2d\u7684\u5176\u4ed6\u670d\u52a1\u3002 sytemctl \u547d\u4ee4\u7528\u4e8e\u7ba1\u7406\u5404\u79cd systemd \u5bf9\u8c61\uff0c\u79f0\u4e3a\u5355\u5143\uff0c\u53ef\u901a\u8fc7 systemctl -t help \u67e5\u770b\u6240\u6709\u7c7b\u578b \u67e5\u770b\u5355\u5143 \u67e5\u770b\u6240\u6709\u5df2\u52a0\u8f7d\u5355\u5143\u72b6\u6001 systemctl \u67e5\u770b\u6307\u5b9a\u7c7b\u578b\u5355\u5143\u72b6\u6001,--all \u663e\u793a\u6240\u6709\u5355\u5143 systemctl -t service \u67e5\u770b\u6307\u5b9a\u5355\u5143\u72b6\u6001 systemctl status sshd \u5224\u65ad\u5355\u5143\u662f\u5426\u6d3b\u52a8 systemctl is-active sshd \u5224\u65ad\u5355\u5143\u662f\u5426\u5f00\u673a\u542f\u52a8 systemctl is-enabled sshd \u5176\u5b83\u547d\u4ee4 \u64cd\u4f5c \u547d\u4ee4 \u67e5\u770b\u72b6\u6001 systemctl status UNIT \u505c\u6b62\u5355\u5143 systemctl stop UNIT \u542f\u52a8\u5355\u5143 systemctl start UNIT \u91cd\u542f\u5355\u5143 systemctl restart UNIT \u91cd\u8f7d\u914d\u7f6e systemctl reload UNIT \u5c4f\u853d\u5355\u5143 systemctl mask UNIT \u89e3\u9664\u5c4f\u853d systemctl unmask UNIT \u5f00\u673a\u81ea\u542f systemctl enable UNIT \u53d6\u6d88\u81ea\u542f systemctl disable UNIT \u67e5\u770b\u4f9d\u8d56 systemctl list-dependencies UNIT \u6d3b\u52a8\u5355\u5143 restart \u8fdb\u7a0b ID\u6539\u53d8\uff0creload \u8fdb\u7a0b ID \u4e0d\u53d8 OpenSSH SSH \u662f\u76ee\u524d\u8f83\u53ef\u9760\uff0c\u4e13\u4e3a\u8fdc\u7a0b\u767b\u5f55\u4f1a\u8bdd\u548c\u5176\u4ed6\u7f51\u7edc\u670d\u52a1\u63d0\u4f9b\u5b89\u5168\u6027\u7684\u534f\u8bae\u3002 SSH\u63d0\u4f9b\u4e24\u79cd\u7ea7\u522b\u7684\u5b89\u5168\u9a8c\u8bc1\uff1a \u57fa\u4e8e\u53e3\u4ee4\u7684\u5b89\u5168\u9a8c\u8bc1\uff08\u7528\u6237\u5bc6\u7801\uff09 \u57fa\u4e8e\u5bc6\u5319\u7684\u5b89\u5168\u9a8c\u8bc1\uff08\u516c\u94a5+\u79c1\u94a5\uff09 \u692d\u5706\u66f2\u7ebf\u6570\u5b57\u7b7e\u540d\u7b97\u6cd5\uff08Elliptic Curve Digital Signature Algorithm\uff09\uff0c\u7b80\u79f0ECDSA\u3002 ECDSA key fingerprint \u4e3a\u4e3b\u673a\u7684 ID \u6807\u8bc6\uff0c\u7528\u6237\u521d\u6b21\u8fde\u63a5\u65e0\u6cd5\u786e\u5b9a\u4e3b\u673a\u771f\u5b9e\u6027\u4f1a\u8fdb\u884c\u8be2\u95ee\uff0c\u4e4b\u540e\u4f1a\u4fdd\u5b58\u5728\u7528\u6237\u5bb6\u76ee\u5f55\u4e0b\u7684 .ssh/known_hosts \u6587\u4ef6\u4e2d\uff0c\u4e0b\u6b21\u8fde\u63a5\u4e0d\u518d\u8be2\u95ee\uff0c\u82e5\u4e3b\u673a ID \u53d1\u751f\u6539\u53d8\u5219\u7981\u6b62\u8fde\u63a5\u3002 \u57fa\u4e8e\u53e3\u4ee4\u7684\u5b89\u5168\u9a8c\u8bc1 \u5728\u8fdc\u7a0b\u4e3b\u673a\u4e0a\u521b\u5efa\u5bf9\u7528\u6237\uff0c\u5e76\u8bbe\u7f6e\u5bc6\u7801\u5373\u53ef\uff08ssh \u670d\u52a1\u9ed8\u8ba4\u5f00\u673a\u542f\u52a8\uff0c\u4e14\u5141\u8bb8\u53e3\u4ee4\u9a8c\u8bc1\uff09 [root@server ~]# useradd sshuser [root@server ~]# echo redhat | passwd --stdin root \u5ba2\u6237\u7aef\u8fde\u63a5\u8fdc\u7a0b\u4e3b\u673a\u9700\u8981\u8f93\u5165\u5bc6\u7801 [root@desktop ~]# ssh sshuser@172.25.0.11 \u57fa\u4e8e\u5bc6\u5319\u7684\u5b89\u5168\u9a8c\u8bc1 \u751f\u6210\u79d8\u94a5\u5bf9 [root@desktop ~]# ssh-keygen -t rsa \u53d1\u9001\u516c\u94a5\u5230\u88ab\u7ba1\u7406\u4e3b\u673a [root@desktop ~]# ssh-copy-id root@172.25.0.11 \u514d\u5bc6\u7801\u767b\u9646 [root@desktop ~]# ssh root@172.25.0.11 \u5b89\u5168\u7b56\u7565 \u7981\u7528\u5bc6\u7801\u9a8c\u8bc1(\u9700\u8981\u63d0\u524d\u51c6\u5907\u79d8\u94a5\u8ba4\u8bc1) [root@server ~]# vim /etc/ssh/sshd_config PasswordAuthentication no \u4ec5\u5141\u8bb8\u4f7f\u7528\u79d8\u94a5\u8fdb\u884c\u8eab\u4efd\u9a8c\u8bc1\uff08\u4e0d\u80fd\u4f7f\u7528\u53e3\u4ee4\u9a8c\u8bc1\uff09 PermitRootLogin without-password \u7981\u6b62root\u7528\u6237\u76f4\u63a5\u767b\u5f55\uff08\u9700\u8981\u521b\u5efa\u5176\u4ed6\u7528\u6237\u5e76\u8bbe\u7f6e\u5bc6\u7801\uff0c\u82e5\u4e4b\u524d\u7981\u7528\u5bc6\u7801\u9a8c\u8bc1\u5219\u9700\u8981\u51c6\u5907\u79d8\u94a5\u8ba4\u8bc1\uff09 [root@server ~]# vim /etc/ssh/sshd_config PermitRootLogin no \u5176\u5b83\u547d\u4ee4 \u547d\u4ee4 \u9009\u9879\u53ca\u4f5c\u7528 ssh \u8fdc\u7a0b\u767b\u5f55\u4e3b\u673a\uff0c-X \u542f\u7528 X11 \u56fe\u5f62\u5316\u8f6c\u53d1\uff0c-i \u6307\u5b9a\u8eab\u4efd\u9a8c\u8bc1\u6587\u4ef6\uff08\u79c1\u94a5\uff09 ssh-keygen \u751f\u6210\u79d8\u94a5\u5bf9\uff0c-f \u6307\u5b9a\u5bc6\u94a5\u5bf9\u6587\u4ef6\u540d\uff0c-t \u6307\u5b9a\u52a0\u5bc6\u7b97\u6cd5 ssh-copy-id \u53d1\u9001\u516c\u94a5\u5230\u8fdc\u7a0b\u4e3b\u673a\uff0c-i \u6307\u5b9a\u8eab\u4efd\u9a8c\u8bc1\u6587\u4ef6\uff08\u516c\u94a5\uff09 \u7ec3\u4e60 \u5728 foundationX \u4e0a\u4f7f\u7528 ssh-keygen \u751f\u6210\u5bc6\u94a5\u5bf9\uff0c\u4f7f\u7528 ssh-copy-id \u53d1\u9001\u81f3 desktopX \u548c serverX\u7136\u540e\u4f7f\u7528 ssh \u767b\u9646 desktopX \u548c serverx\uff0c\u6267\u884c\u4ee5\u4e0b\u64cd\u4f5c\uff0c\u6240\u6709\u64cd\u4f5c\u4e0d\u80fd\u76f4\u63a5\u5230\u865a\u62df\u673a\u64cd\u4f5c \u5728 desktopX \u4e0a\u4f7f\u7528 ssh-keygen -f \u751f\u6210\u5bc6\u94a5\uff0c\u4fdd\u5b58\u4f4d\u7f6e\u4e3a ~/sshkey/key desktopX \u4f7f\u7528 ssh-copy-id -i \u53d1\u9001\u516c\u94a5\u81f3 root@serverX desktopX \u4f7f\u7528 ssh -i \u8fde\u63a5 root@serverX \u4fee\u6539 desktopX \u7684 /etc/ssh/ssh_config\uff0c\u6dfb\u52a0 IdentityFile ~/sshkey/key desktopX \u4f7f\u7528 ssh root@serverX \u76f4\u63a5\u8fde\u63a5 \u4fee\u6539 serverX \u7684 /etc/ssh/sshd_config\uff0c\u7981\u6b62root\u7528\u6237\u4f7f\u7528\u5bc6\u7801\u7684\u767b\u9646 PermitRootLogin without-password desktopX \u4f7f\u7528 ssh-copy-id -i \u53d1\u9001\u516c\u94a5\u81f3 student@serverX \u4fee\u6539 serverX \u7684 /etc/ssh/sshd_config\uff0c\u7981\u6b62\u5bc6\u7801\u9a8c\u8bc1 PasswordAuthentication no \u4fee\u6539 serverX \u7684 /etc/ssh/sshd_config\uff0c\u7981\u6b62 root \u767b\u9646 PermitRootLogin no \u81f3\u6b64\uff0cdesktopX \u53ef\u4ee5\u4f7f\u7528 student \u7528\u6237\u7684\u767b\u9646 serverX\uff0croot \u7528\u6237\u65e0\u6cd5\u76f4\u63a5\u767b\u9646\uff0c\u4f46\u53ef\u4ee5\u901a\u8fc7 su - \u5207\u6362 root \u7528\u6237 \u7f51\u7edc\u914d\u7f6e \u56fe\u5f62\u5316\u914d\u7f6e\u5de5\u5177 \u53f3\u4e0a\u89d2->\u7528\u6237\u540d->setting->Network nmtui nm-connection-edit \u547d\u4ee4\u884c\u5de5\u5177 nmcli device \u7f51\u7edc\u8bbe\u5907\uff0c\u4e00\u822c\u662f\u7f51\u5361 connection \u7f51\u7edc\u8fde\u63a5\uff0c\u53ef\u4ee5\u7406\u89e3\u4e3a\u7f51\u5361\u7684\u914d\u7f6e \u4e00\u4e2a\u8bbe\u5907\u53ef\u4ee5\u5bf9\u5e94\u591a\u4e2a\u8fde\u63a5\uff0c\u4f46\u540c\u65f6\u53ea\u80fd\u6709\u4e00\u4e2a\u8fde\u63a5\u5904\u4e8e\u6fc0\u6d3b\u72b6\u6001 \u914d\u7f6e\u6587\u4ef6 /etc/sysconfig/network-scripts/ifcfg-* \u67e5\u770b\u8bbe\u5907 nmcli device \u67e5\u770b\u8fde\u63a5 nmcli connection \u6dfb\u52a0\u8fde\u63a5 ##DHCP\u83b7\u53d6\u5730\u5740 nmcli con add con-name [\u8fde\u63a5\u540d] ifname [\u8bbe\u5907\u540d] type ethernet ##\u624b\u5de5\u914d\u7f6e\u5730\u5740 nmcli con add con-name [\u8fde\u63a5\u540d] ifname [\u8bbe\u5907\u540d] type ethernet ip4 [IP]/[\u63a9\u7801] gw4 [\u7f51\u5173] \u5220\u9664\u8fde\u63a5 nmcli con del [\u8fde\u63a5\u540d] \u4fee\u6539\u8fde\u63a5 ##\u4fee\u6539IP nmcli con mod [\u8fde\u63a5\u540d] ipv4.method manual ipv4.addresses \"[IP]/[\u63a9\u7801] [\u7f51\u5173]\" ##\u6dfb\u52a0dns nmcli con mod [\u8fde\u63a5\u540d] ipv4.dns [DNS_IP] \u542f\u7528\u8fde\u63a5 nmcli con up [\u8fde\u63a5\u540d] \u65ad\u5f00\u8fde\u63a5 nmcli con down [\u8fde\u63a5\u540d] \u8fde\u63a5\u7f51\u5361 nmcli dev connect [\u8bbe\u5907\u540d] \u65ad\u5f00\u7f51\u5361 nmcli dev disconnect [\u8bbe\u5907\u540d] \u5176\u5b83\u547d\u4ee4 \u64cd\u4f5c \u547d\u4ee4 \u6d4b\u8bd5\u8fde\u901a ping\uff0c-c \u6307\u5b9a\u6b21\u6570 \u67e5\u770b\u8def\u7531 ip route\uff0croute -n \u67e5\u770b\u7aef\u53e3 ss\uff0cnetstat\uff0c-n \u663e\u793a\u63a5\u53e3\u548c\u7aef\u53e3\u7f16\u53f7\uff0c-t \u663e\u793a tcp \u5957\u63a5\u5b57\uff0c-u \u663e\u793a udp \u5957\u63a5\u5b57\uff0c-l \u663e\u793a\u4fa6\u542c\u4e2d\u7684\u5957\u63a5\u5b57\uff0c-a \u663e\u793a\u6240\u6709\u5957\u63a5\u5b57\uff0c-p \u663e\u793a\u5957\u63a5\u5b57\u8fdb\u7a0b \u8def\u7531\u8ffd\u8e2a traceroute\uff0ctracepath","title":"\u7b2c4\u5929"},{"location":"RH124/day4/#4","text":"","title":"\u7b2c4\u5929"},{"location":"RH124/day4/#systemd","text":"systemd \u8fdb\u7a0b ID \u4e3a 1\uff0c\u662f\u6240\u6709\u8fdb\u7a0b\u7684\u7236\u8fdb\u7a0b\uff0c\u8d1f\u8d23\u6fc0\u6d3b\u7cfb\u7edf\u4e2d\u7684\u5176\u4ed6\u670d\u52a1\u3002 sytemctl \u547d\u4ee4\u7528\u4e8e\u7ba1\u7406\u5404\u79cd systemd \u5bf9\u8c61\uff0c\u79f0\u4e3a\u5355\u5143\uff0c\u53ef\u901a\u8fc7 systemctl -t help \u67e5\u770b\u6240\u6709\u7c7b\u578b","title":"Systemd"},{"location":"RH124/day4/#_1","text":"\u67e5\u770b\u6240\u6709\u5df2\u52a0\u8f7d\u5355\u5143\u72b6\u6001 systemctl \u67e5\u770b\u6307\u5b9a\u7c7b\u578b\u5355\u5143\u72b6\u6001,--all \u663e\u793a\u6240\u6709\u5355\u5143 systemctl -t service \u67e5\u770b\u6307\u5b9a\u5355\u5143\u72b6\u6001 systemctl status sshd \u5224\u65ad\u5355\u5143\u662f\u5426\u6d3b\u52a8 systemctl is-active sshd \u5224\u65ad\u5355\u5143\u662f\u5426\u5f00\u673a\u542f\u52a8 systemctl is-enabled sshd","title":"\u67e5\u770b\u5355\u5143"},{"location":"RH124/day4/#_2","text":"\u64cd\u4f5c \u547d\u4ee4 \u67e5\u770b\u72b6\u6001 systemctl status UNIT \u505c\u6b62\u5355\u5143 systemctl stop UNIT \u542f\u52a8\u5355\u5143 systemctl start UNIT \u91cd\u542f\u5355\u5143 systemctl restart UNIT \u91cd\u8f7d\u914d\u7f6e systemctl reload UNIT \u5c4f\u853d\u5355\u5143 systemctl mask UNIT \u89e3\u9664\u5c4f\u853d systemctl unmask UNIT \u5f00\u673a\u81ea\u542f systemctl enable UNIT \u53d6\u6d88\u81ea\u542f systemctl disable UNIT \u67e5\u770b\u4f9d\u8d56 systemctl list-dependencies UNIT \u6d3b\u52a8\u5355\u5143 restart \u8fdb\u7a0b ID\u6539\u53d8\uff0creload \u8fdb\u7a0b ID \u4e0d\u53d8","title":"\u5176\u5b83\u547d\u4ee4"},{"location":"RH124/day4/#openssh","text":"SSH \u662f\u76ee\u524d\u8f83\u53ef\u9760\uff0c\u4e13\u4e3a\u8fdc\u7a0b\u767b\u5f55\u4f1a\u8bdd\u548c\u5176\u4ed6\u7f51\u7edc\u670d\u52a1\u63d0\u4f9b\u5b89\u5168\u6027\u7684\u534f\u8bae\u3002 SSH\u63d0\u4f9b\u4e24\u79cd\u7ea7\u522b\u7684\u5b89\u5168\u9a8c\u8bc1\uff1a \u57fa\u4e8e\u53e3\u4ee4\u7684\u5b89\u5168\u9a8c\u8bc1\uff08\u7528\u6237\u5bc6\u7801\uff09 \u57fa\u4e8e\u5bc6\u5319\u7684\u5b89\u5168\u9a8c\u8bc1\uff08\u516c\u94a5+\u79c1\u94a5\uff09 \u692d\u5706\u66f2\u7ebf\u6570\u5b57\u7b7e\u540d\u7b97\u6cd5\uff08Elliptic Curve Digital Signature Algorithm\uff09\uff0c\u7b80\u79f0ECDSA\u3002 ECDSA key fingerprint \u4e3a\u4e3b\u673a\u7684 ID \u6807\u8bc6\uff0c\u7528\u6237\u521d\u6b21\u8fde\u63a5\u65e0\u6cd5\u786e\u5b9a\u4e3b\u673a\u771f\u5b9e\u6027\u4f1a\u8fdb\u884c\u8be2\u95ee\uff0c\u4e4b\u540e\u4f1a\u4fdd\u5b58\u5728\u7528\u6237\u5bb6\u76ee\u5f55\u4e0b\u7684 .ssh/known_hosts \u6587\u4ef6\u4e2d\uff0c\u4e0b\u6b21\u8fde\u63a5\u4e0d\u518d\u8be2\u95ee\uff0c\u82e5\u4e3b\u673a ID \u53d1\u751f\u6539\u53d8\u5219\u7981\u6b62\u8fde\u63a5\u3002","title":"OpenSSH"},{"location":"RH124/day4/#_3","text":"\u5728\u8fdc\u7a0b\u4e3b\u673a\u4e0a\u521b\u5efa\u5bf9\u7528\u6237\uff0c\u5e76\u8bbe\u7f6e\u5bc6\u7801\u5373\u53ef\uff08ssh \u670d\u52a1\u9ed8\u8ba4\u5f00\u673a\u542f\u52a8\uff0c\u4e14\u5141\u8bb8\u53e3\u4ee4\u9a8c\u8bc1\uff09 [root@server ~]# useradd sshuser [root@server ~]# echo redhat | passwd --stdin root \u5ba2\u6237\u7aef\u8fde\u63a5\u8fdc\u7a0b\u4e3b\u673a\u9700\u8981\u8f93\u5165\u5bc6\u7801 [root@desktop ~]# ssh sshuser@172.25.0.11","title":"\u57fa\u4e8e\u53e3\u4ee4\u7684\u5b89\u5168\u9a8c\u8bc1"},{"location":"RH124/day4/#_4","text":"\u751f\u6210\u79d8\u94a5\u5bf9 [root@desktop ~]# ssh-keygen -t rsa \u53d1\u9001\u516c\u94a5\u5230\u88ab\u7ba1\u7406\u4e3b\u673a [root@desktop ~]# ssh-copy-id root@172.25.0.11 \u514d\u5bc6\u7801\u767b\u9646 [root@desktop ~]# ssh root@172.25.0.11","title":"\u57fa\u4e8e\u5bc6\u5319\u7684\u5b89\u5168\u9a8c\u8bc1"},{"location":"RH124/day4/#_5","text":"\u7981\u7528\u5bc6\u7801\u9a8c\u8bc1(\u9700\u8981\u63d0\u524d\u51c6\u5907\u79d8\u94a5\u8ba4\u8bc1) [root@server ~]# vim /etc/ssh/sshd_config PasswordAuthentication no \u4ec5\u5141\u8bb8\u4f7f\u7528\u79d8\u94a5\u8fdb\u884c\u8eab\u4efd\u9a8c\u8bc1\uff08\u4e0d\u80fd\u4f7f\u7528\u53e3\u4ee4\u9a8c\u8bc1\uff09 PermitRootLogin without-password \u7981\u6b62root\u7528\u6237\u76f4\u63a5\u767b\u5f55\uff08\u9700\u8981\u521b\u5efa\u5176\u4ed6\u7528\u6237\u5e76\u8bbe\u7f6e\u5bc6\u7801\uff0c\u82e5\u4e4b\u524d\u7981\u7528\u5bc6\u7801\u9a8c\u8bc1\u5219\u9700\u8981\u51c6\u5907\u79d8\u94a5\u8ba4\u8bc1\uff09 [root@server ~]# vim /etc/ssh/sshd_config PermitRootLogin no","title":"\u5b89\u5168\u7b56\u7565"},{"location":"RH124/day4/#_6","text":"\u547d\u4ee4 \u9009\u9879\u53ca\u4f5c\u7528 ssh \u8fdc\u7a0b\u767b\u5f55\u4e3b\u673a\uff0c-X \u542f\u7528 X11 \u56fe\u5f62\u5316\u8f6c\u53d1\uff0c-i \u6307\u5b9a\u8eab\u4efd\u9a8c\u8bc1\u6587\u4ef6\uff08\u79c1\u94a5\uff09 ssh-keygen \u751f\u6210\u79d8\u94a5\u5bf9\uff0c-f \u6307\u5b9a\u5bc6\u94a5\u5bf9\u6587\u4ef6\u540d\uff0c-t \u6307\u5b9a\u52a0\u5bc6\u7b97\u6cd5 ssh-copy-id \u53d1\u9001\u516c\u94a5\u5230\u8fdc\u7a0b\u4e3b\u673a\uff0c-i \u6307\u5b9a\u8eab\u4efd\u9a8c\u8bc1\u6587\u4ef6\uff08\u516c\u94a5\uff09","title":"\u5176\u5b83\u547d\u4ee4"},{"location":"RH124/day4/#_7","text":"\u5728 foundationX \u4e0a\u4f7f\u7528 ssh-keygen \u751f\u6210\u5bc6\u94a5\u5bf9\uff0c\u4f7f\u7528 ssh-copy-id \u53d1\u9001\u81f3 desktopX \u548c serverX\u7136\u540e\u4f7f\u7528 ssh \u767b\u9646 desktopX \u548c serverx\uff0c\u6267\u884c\u4ee5\u4e0b\u64cd\u4f5c\uff0c\u6240\u6709\u64cd\u4f5c\u4e0d\u80fd\u76f4\u63a5\u5230\u865a\u62df\u673a\u64cd\u4f5c \u5728 desktopX \u4e0a\u4f7f\u7528 ssh-keygen -f \u751f\u6210\u5bc6\u94a5\uff0c\u4fdd\u5b58\u4f4d\u7f6e\u4e3a ~/sshkey/key desktopX \u4f7f\u7528 ssh-copy-id -i \u53d1\u9001\u516c\u94a5\u81f3 root@serverX desktopX \u4f7f\u7528 ssh -i \u8fde\u63a5 root@serverX \u4fee\u6539 desktopX \u7684 /etc/ssh/ssh_config\uff0c\u6dfb\u52a0 IdentityFile ~/sshkey/key desktopX \u4f7f\u7528 ssh root@serverX \u76f4\u63a5\u8fde\u63a5 \u4fee\u6539 serverX \u7684 /etc/ssh/sshd_config\uff0c\u7981\u6b62root\u7528\u6237\u4f7f\u7528\u5bc6\u7801\u7684\u767b\u9646 PermitRootLogin without-password desktopX \u4f7f\u7528 ssh-copy-id -i \u53d1\u9001\u516c\u94a5\u81f3 student@serverX \u4fee\u6539 serverX \u7684 /etc/ssh/sshd_config\uff0c\u7981\u6b62\u5bc6\u7801\u9a8c\u8bc1 PasswordAuthentication no \u4fee\u6539 serverX \u7684 /etc/ssh/sshd_config\uff0c\u7981\u6b62 root \u767b\u9646 PermitRootLogin no \u81f3\u6b64\uff0cdesktopX \u53ef\u4ee5\u4f7f\u7528 student \u7528\u6237\u7684\u767b\u9646 serverX\uff0croot \u7528\u6237\u65e0\u6cd5\u76f4\u63a5\u767b\u9646\uff0c\u4f46\u53ef\u4ee5\u901a\u8fc7 su - \u5207\u6362 root \u7528\u6237","title":"\u7ec3\u4e60"},{"location":"RH124/day4/#_8","text":"","title":"\u7f51\u7edc\u914d\u7f6e"},{"location":"RH124/day4/#_9","text":"\u53f3\u4e0a\u89d2->\u7528\u6237\u540d->setting->Network nmtui nm-connection-edit","title":"\u56fe\u5f62\u5316\u914d\u7f6e\u5de5\u5177"},{"location":"RH124/day4/#nmcli","text":"device \u7f51\u7edc\u8bbe\u5907\uff0c\u4e00\u822c\u662f\u7f51\u5361 connection \u7f51\u7edc\u8fde\u63a5\uff0c\u53ef\u4ee5\u7406\u89e3\u4e3a\u7f51\u5361\u7684\u914d\u7f6e \u4e00\u4e2a\u8bbe\u5907\u53ef\u4ee5\u5bf9\u5e94\u591a\u4e2a\u8fde\u63a5\uff0c\u4f46\u540c\u65f6\u53ea\u80fd\u6709\u4e00\u4e2a\u8fde\u63a5\u5904\u4e8e\u6fc0\u6d3b\u72b6\u6001 \u914d\u7f6e\u6587\u4ef6 /etc/sysconfig/network-scripts/ifcfg-* \u67e5\u770b\u8bbe\u5907 nmcli device \u67e5\u770b\u8fde\u63a5 nmcli connection \u6dfb\u52a0\u8fde\u63a5 ##DHCP\u83b7\u53d6\u5730\u5740 nmcli con add con-name [\u8fde\u63a5\u540d] ifname [\u8bbe\u5907\u540d] type ethernet ##\u624b\u5de5\u914d\u7f6e\u5730\u5740 nmcli con add con-name [\u8fde\u63a5\u540d] ifname [\u8bbe\u5907\u540d] type ethernet ip4 [IP]/[\u63a9\u7801] gw4 [\u7f51\u5173] \u5220\u9664\u8fde\u63a5 nmcli con del [\u8fde\u63a5\u540d] \u4fee\u6539\u8fde\u63a5 ##\u4fee\u6539IP nmcli con mod [\u8fde\u63a5\u540d] ipv4.method manual ipv4.addresses \"[IP]/[\u63a9\u7801] [\u7f51\u5173]\" ##\u6dfb\u52a0dns nmcli con mod [\u8fde\u63a5\u540d] ipv4.dns [DNS_IP] \u542f\u7528\u8fde\u63a5 nmcli con up [\u8fde\u63a5\u540d] \u65ad\u5f00\u8fde\u63a5 nmcli con down [\u8fde\u63a5\u540d] \u8fde\u63a5\u7f51\u5361 nmcli dev connect [\u8bbe\u5907\u540d] \u65ad\u5f00\u7f51\u5361 nmcli dev disconnect [\u8bbe\u5907\u540d]","title":"\u547d\u4ee4\u884c\u5de5\u5177 nmcli"},{"location":"RH124/day4/#_10","text":"\u64cd\u4f5c \u547d\u4ee4 \u6d4b\u8bd5\u8fde\u901a ping\uff0c-c \u6307\u5b9a\u6b21\u6570 \u67e5\u770b\u8def\u7531 ip route\uff0croute -n \u67e5\u770b\u7aef\u53e3 ss\uff0cnetstat\uff0c-n \u663e\u793a\u63a5\u53e3\u548c\u7aef\u53e3\u7f16\u53f7\uff0c-t \u663e\u793a tcp \u5957\u63a5\u5b57\uff0c-u \u663e\u793a udp \u5957\u63a5\u5b57\uff0c-l \u663e\u793a\u4fa6\u542c\u4e2d\u7684\u5957\u63a5\u5b57\uff0c-a \u663e\u793a\u6240\u6709\u5957\u63a5\u5b57\uff0c-p \u663e\u793a\u5957\u63a5\u5b57\u8fdb\u7a0b \u8def\u7531\u8ffd\u8e2a traceroute\uff0ctracepath","title":"\u5176\u5b83\u547d\u4ee4"},{"location":"RH124/day5/","text":"\u7b2c5\u5929 \u65e5\u5fd7 systemd-journald \u548c rsyslog \u8fdb\u7a0b\u548c\u64cd\u4f5c\u7cfb\u7edf\u5185\u6838\u9700\u80fd\u591f\u4e3a\u53d1\u751f\u7684\u4e8b\u4ef6\u8bb0\u5f55\u65e5\u5fd7 \u65e5\u5fd7\u5185\u5bb9\u53ef\u7528\u4e8e\u7cfb\u7edf\u5ba1\u8ba1\u548c\u6545\u969c\u6392\u9664 RHEL7 \u7684\u65e5\u5fd7\u7cfb\u7edf\u7531 systemd-journald \u548c rsyslog \u4e24\u4e2a\u670d\u52a1\u63d0\u4f9b RHEL7 \u4e2d\uff0c systemd \u7684\u65e5\u5fd7\u4fdd\u5b58\u5728 /run/log/journal \u4e2d\uff0c\u7cfb\u7edf\u91cd\u542f\u5c31\u4f1a\u6e05\u9664\u3002\u901a\u8fc7\u65b0\u5efa /var/log/journal \u76ee\u5f55\uff0c\u65e5\u5fd7\u4f1a\u81ea\u52a8\u8bb0\u5f55\u5230\u8fd9\u4e2a\u76ee\u5f55\u4e2d\uff0c\u5e76\u6c38\u4e45\u5b58\u50a8 rsyslog \u670d\u52a1\u968f\u540e\u6839\u636e\u4f18\u5148\u7ea7\u6392\u5217\u65e5\u5fd7\u4fe1\u606f\uff0c\u5c06\u5b83\u4eec\u5199\u5165\u5230 /var/log \u76ee\u5f55\u4e2d\u6c38\u4e45\u4fdd\u5b58 systemd-journald \u662f\u4e00\u79cd\u6539\u8fdb\u7684\u65e5\u5fd7\u7ba1\u7406\u670d\u52a1\uff0c\u662f syslog \u7684\u8865\u5145\uff0c\u6536\u96c6\u6765\u81ea\u5185\u6838\u3001\u542f\u52a8\u8fc7\u7a0b\u65e9\u671f\u9636\u6bb5\u3001\u6807\u51c6\u8f93\u51fa\u3001\u7cfb\u7edf\u65e5\u5fd7\uff0c\u5b88\u62a4\u8fdb\u7a0b\u542f\u52a8\u548c\u8fd0\u884c\u671f\u95f4\u9519\u8bef\u7684\u4fe1\u606f systemd ---> systemd-journald ---> ram DB ---> rsyslog ---> /var/log service daemon ---> rsyslog ---> /var/log logger -p -p\uff0c --priority priority_level \u6307\u5b9a\u8f93\u5165\u6d88\u606f\u65e5\u5fd7\u7ea7\u522b\uff0c\u4f18\u5148\u7ea7\u53ef\u4ee5\u662f\u6570\u5b57\u6216\u8005\u6307\u5b9a\u4e3a \" facility.level\" \u7684\u683c\u5f0f\u3002\u9ed8\u8ba4\u7ea7\u522b\u662f \"user.notice\"\u3002 facility\uff1a\u662f\u7528\u6765\u5b9a\u4e49\u7531\u8c01\u4ea7\u751f\u7684\u65e5\u5fd7\u4fe1\u606f\uff1a\u90a3\u4e2a\u8f6f\u4ef6\u3001\u5b50\u7cfb\u7edf\u8fd0\u884c\u8fc7\u7a0b\u4e2d\u4ea7\u751f\u7684\u65e5\u5fd7\u4fe1\u606f\u3002 auth \u7528\u6237\u6388\u6743 authpriv \u6388\u6743\u548c\u5b89\u5168 cron \u8ba1\u5212\u4efb\u52a1 daemon \u7cfb\u7edf\u5b88\u62a4\u8fdb\u7a0b kern \u4e0e\u5185\u6838\u6709\u5173\u7684\u4fe1\u606f lpr \u4e0e\u6253\u5370\u670d\u52a1\u6709\u5173\u7684\u4fe1\u606f mail \u4e0e\u7535\u5b50\u90ae\u4ef6\u6709\u5173\u7684\u4fe1\u606f news \u6765\u81ea\u65b0\u95fb\u670d\u52a1\u5668\u7684\u4fe1\u606f syslog \u7531 syslog \u751f\u6210\u7684\u4fe1\u606f user \u7528\u6237\u7684\u7a0b\u5e8f\u751f\u6210\u7684\u4fe1\u606f\uff0c\u9ed8\u8ba4 ftp \u4e0e ftp \u6709\u5173 \u7684\u4fe1\u606f uucp \u7531 uucp \u751f\u6210\u7684\u4fe1\u606f local0~7 \u7528\u6765\u5b9a\u4e49\u672c\u5730\u7b56\u7565 level\uff1a\u662f\u7528\u6765\u5b9a\u4e49\u8bb0\u5f55\u4ec0\u4e48\u7c7b\u578b\u7684\u65e5\u5fd7\u4fe1\u606f\u3002\u662f\u5e94\u7528\u7a0b\u5e8f\u4ea7\u751f\u7684\u6240\u6709\u4fe1\u606f\u90fd\u628a\u5b83\u8bb0\u5f55\u5230\u65e5\u5fd7 \u6587\u4ef6\u4e2d\u5462\uff0c\u8fd8\u662f\u53ea\u8bb0\u5f55\u8be5\u5e94\u7528\u7a0b\u5e8f\u7684\u9519\u8bef\u65e5\u5fd7\u4fe1\u606f\u7b49\u7b49\u3002 emerg(0) \u7cfb\u7edf\u4e0d\u53ef\u7528 alert(1) \u9700\u8981\u7acb\u5373\u91c7\u53d6\u52a8\u4f5c crit(2) \u4e25\u91cd\u72b6\u51b5 error(3) \u975e\u5e38\u4e25\u91cd\u9519\u8bef\u72b6\u51b5 warning(4) \u8b66\u544a\u72b6\u51b5 notice(5) \u6b63\u5e38\u4f46\u8981\u6ce8\u610f info(6) \u4fe1\u606f\u6027\u4e8b\u4ef6 debug(7) \u8c03\u8bd5\u7ea7\u522b\u6d88\u606f systemd \u65e5\u5fd7\u6301\u4e45\u5316 mkdir /var/log/journal chown root:systemd-journal /var/log/journal chmod 2755 /var/log/journal killall -USER1 systemd-journald \u538b\u7f29\u5f52\u6863 tar \u9009\u9879 \u4f5c\u7528 -c \u521b\u5efa\u5b58\u6863 -z \u4f7f\u7528 gzip \u538b\u7f29\u65b9\u5f0f\uff08.tgz \u6216 .tar.gz\uff09 -j \u4f7f\u7528 bzip2 \u538b\u7f29\u65b9\u5f0f\uff08.tar.bz2\uff09 -J \u4f7f\u7528 xz \u538b\u7f29\u65b9\u5f0f\uff08.tar.xz\uff09 -v \u8be6\u7ec6\u4fe1\u606f\uff0c\u663e\u793a\u5b58\u6863\u6216\u63d0\u53d6\u7684\u7684\u6587\u4ef6 -f \u8981\u64cd\u4f5c\u7684\u5b58\u6863\u6587\u4ef6\u540d -x \u63d0\u53d6\u5b58\u6863\u5185\u5bb9 -t \u5217\u51fa\u5b58\u6863\u5185\u5bb9 -p \u4fdd\u7559\u6587\u4ef6\u548c\u76ee\u5f55\u7684\u6743\u9650\uff0c\u4e0d\u53bb\u9664umask -C \u6307\u5b9a\u89e3\u538b\u5230\u7684\u76ee\u5f55 -P \u538b\u7f29\u65f6\u4fdd\u7559\u7edd\u5ea6\u8def\u5f84 \u538b\u7f29\u7387\uff1agzip < bzip2 < xz \u538b\u7f29\u901f\u5ea6\uff1agzip > bzip2 > xz \u8fdc\u7a0b\u590d\u5236\u6587\u4ef6 scp scp \u672c\u5730\u6587\u4ef6 \u8fdc\u7a0b\u7528\u6237@\u8fdc\u7a0b\u4e3b\u673a:/\u4fdd\u5b58\u4f4d\u7f6e scp \u8fdc\u7a0b\u7528\u6237@\u8fdc\u7a0b\u4e3b\u673a:/\u6587\u4ef6\u8def\u5f84 \u672c\u5730\u4fdd\u5b58\u4f4d\u7f6e \u9009\u9879\uff1a * -r \u9012\u5f52\uff0c\u590d\u5236\u76ee\u5f55\u4f7f\u7528 * -p \u4fdd\u7559\u65f6\u95f4\u548c\u6743\u9650 sftp sftp root@server0 >cd /tmp #cd \u670d\u52a1\u7aef /tmp \u76ee\u5f55 >ls #\u67e5\u770b\u670d\u52a1\u7aef /tmp \u5185\u5bb9 >lcd /etc #cd \u5ba2\u6237\u7aef /etc \u76ee\u5f55 >put passwd #\u4e0a\u4f20 passwd \u6587\u4ef6 >lcd /boot #cd \u5ba2\u6237\u7aef /boot \u76ee\u5f55 >mkdir grub2 #\u670d\u52a1\u7aef\u521b\u5efa\u4e0a\u4f20\u76ee\u5f55\u540c\u540d\u76ee\u5f55 >put -r grub2 #\u4e0a\u4f20 grub2 \u76ee\u5f55 >ls #\u67e5\u770b\u670d\u52a1\u7aef /tmp \u5185\u5bb9 >lcd /tmp #cd \u5ba2\u6237\u7aef /tmp \u76ee\u5f55 >lls #\u67e5\u770b\u5ba2\u6237\u7aef /tpm \u76ee\u5f55\u5185\u5bb9 >get passwd #\u4ece\u670d\u52a1\u7aef\u4e0b\u8f7d passwd \u6587\u4ef6 >get -r grub2 #\u4ece\u670d\u52a1\u7aef\u4e0b\u8f7d grub2 \u76ee\u5f55 >lls #\u67e5\u770b\u5ba2\u6237\u7aef /tmp \u76ee\u5f55\u5185\u5bb9 \u9009\u9879\uff1a * -r \u9012\u5f52\uff0c\u4e0a\u4f20\u6216\u4e0b\u8f7d\u76ee\u5f55\u4f7f\u7528\uff0c\u4e0a\u4f20\u76ee\u5f55\u5fc5\u987b\u5728\u670d\u52a1\u7aef\u53e3\u540c\u540d\u76ee\u5f55 * -p \u4fdd\u7559\u65f6\u95f4\u548c\u6743\u9650 rsync rsync \u672c\u5730\u76ee\u5f55 \u8fdc\u7a0b\u7528\u6237@\u8fdc\u7a0b\u4e3b\u673a:/\u4fdd\u5b58\u4f4d\u7f6e rsync \u8fdc\u7a0b\u7528\u6237@\u8fdc\u7a0b\u4e3b\u673a:/\u76ee\u5f55\u8def\u5f84 \u672c\u5730\u4fdd\u5b58\u4f4d\u7f6e \u9009\u9879\uff1a * -av -a \u5b58\u6863\u6a21\u5f0f\uff0c-v \u8be6\u7ec6\u4fe1\u606f -a \u4ee3\u8868\uff1a -r \u9012\u5f52\uff0c-l \u540c\u6b65\u7b26\u53f7\u94fe\u63a5\uff0c-p \u4fdd\u7559\u6743\u9650\uff0c-t \u4fdd\u7559\u65f6\u95f4\u6233\uff0c-g \u4fdd\u7559\u7ec4\u6240\u6709\u6743\uff0c-o \u4fdd\u7559\u6240\u6709\u8005\uff0c-D \u540c\u6b65\u8bbe\u5907\u6587\u4ef6","title":"\u7b2c5\u5929"},{"location":"RH124/day5/#5","text":"","title":"\u7b2c5\u5929"},{"location":"RH124/day5/#_1","text":"","title":"\u65e5\u5fd7"},{"location":"RH124/day5/#systemd-journald-rsyslog","text":"\u8fdb\u7a0b\u548c\u64cd\u4f5c\u7cfb\u7edf\u5185\u6838\u9700\u80fd\u591f\u4e3a\u53d1\u751f\u7684\u4e8b\u4ef6\u8bb0\u5f55\u65e5\u5fd7 \u65e5\u5fd7\u5185\u5bb9\u53ef\u7528\u4e8e\u7cfb\u7edf\u5ba1\u8ba1\u548c\u6545\u969c\u6392\u9664 RHEL7 \u7684\u65e5\u5fd7\u7cfb\u7edf\u7531 systemd-journald \u548c rsyslog \u4e24\u4e2a\u670d\u52a1\u63d0\u4f9b RHEL7 \u4e2d\uff0c systemd \u7684\u65e5\u5fd7\u4fdd\u5b58\u5728 /run/log/journal \u4e2d\uff0c\u7cfb\u7edf\u91cd\u542f\u5c31\u4f1a\u6e05\u9664\u3002\u901a\u8fc7\u65b0\u5efa /var/log/journal \u76ee\u5f55\uff0c\u65e5\u5fd7\u4f1a\u81ea\u52a8\u8bb0\u5f55\u5230\u8fd9\u4e2a\u76ee\u5f55\u4e2d\uff0c\u5e76\u6c38\u4e45\u5b58\u50a8 rsyslog \u670d\u52a1\u968f\u540e\u6839\u636e\u4f18\u5148\u7ea7\u6392\u5217\u65e5\u5fd7\u4fe1\u606f\uff0c\u5c06\u5b83\u4eec\u5199\u5165\u5230 /var/log \u76ee\u5f55\u4e2d\u6c38\u4e45\u4fdd\u5b58 systemd-journald \u662f\u4e00\u79cd\u6539\u8fdb\u7684\u65e5\u5fd7\u7ba1\u7406\u670d\u52a1\uff0c\u662f syslog \u7684\u8865\u5145\uff0c\u6536\u96c6\u6765\u81ea\u5185\u6838\u3001\u542f\u52a8\u8fc7\u7a0b\u65e9\u671f\u9636\u6bb5\u3001\u6807\u51c6\u8f93\u51fa\u3001\u7cfb\u7edf\u65e5\u5fd7\uff0c\u5b88\u62a4\u8fdb\u7a0b\u542f\u52a8\u548c\u8fd0\u884c\u671f\u95f4\u9519\u8bef\u7684\u4fe1\u606f systemd ---> systemd-journald ---> ram DB ---> rsyslog ---> /var/log service daemon ---> rsyslog ---> /var/log","title":"systemd-journald \u548c rsyslog"},{"location":"RH124/day5/#logger-p","text":"-p\uff0c --priority priority_level \u6307\u5b9a\u8f93\u5165\u6d88\u606f\u65e5\u5fd7\u7ea7\u522b\uff0c\u4f18\u5148\u7ea7\u53ef\u4ee5\u662f\u6570\u5b57\u6216\u8005\u6307\u5b9a\u4e3a \" facility.level\" \u7684\u683c\u5f0f\u3002\u9ed8\u8ba4\u7ea7\u522b\u662f \"user.notice\"\u3002 facility\uff1a\u662f\u7528\u6765\u5b9a\u4e49\u7531\u8c01\u4ea7\u751f\u7684\u65e5\u5fd7\u4fe1\u606f\uff1a\u90a3\u4e2a\u8f6f\u4ef6\u3001\u5b50\u7cfb\u7edf\u8fd0\u884c\u8fc7\u7a0b\u4e2d\u4ea7\u751f\u7684\u65e5\u5fd7\u4fe1\u606f\u3002 auth \u7528\u6237\u6388\u6743 authpriv \u6388\u6743\u548c\u5b89\u5168 cron \u8ba1\u5212\u4efb\u52a1 daemon \u7cfb\u7edf\u5b88\u62a4\u8fdb\u7a0b kern \u4e0e\u5185\u6838\u6709\u5173\u7684\u4fe1\u606f lpr \u4e0e\u6253\u5370\u670d\u52a1\u6709\u5173\u7684\u4fe1\u606f mail \u4e0e\u7535\u5b50\u90ae\u4ef6\u6709\u5173\u7684\u4fe1\u606f news \u6765\u81ea\u65b0\u95fb\u670d\u52a1\u5668\u7684\u4fe1\u606f syslog \u7531 syslog \u751f\u6210\u7684\u4fe1\u606f user \u7528\u6237\u7684\u7a0b\u5e8f\u751f\u6210\u7684\u4fe1\u606f\uff0c\u9ed8\u8ba4 ftp \u4e0e ftp \u6709\u5173 \u7684\u4fe1\u606f uucp \u7531 uucp \u751f\u6210\u7684\u4fe1\u606f local0~7 \u7528\u6765\u5b9a\u4e49\u672c\u5730\u7b56\u7565 level\uff1a\u662f\u7528\u6765\u5b9a\u4e49\u8bb0\u5f55\u4ec0\u4e48\u7c7b\u578b\u7684\u65e5\u5fd7\u4fe1\u606f\u3002\u662f\u5e94\u7528\u7a0b\u5e8f\u4ea7\u751f\u7684\u6240\u6709\u4fe1\u606f\u90fd\u628a\u5b83\u8bb0\u5f55\u5230\u65e5\u5fd7 \u6587\u4ef6\u4e2d\u5462\uff0c\u8fd8\u662f\u53ea\u8bb0\u5f55\u8be5\u5e94\u7528\u7a0b\u5e8f\u7684\u9519\u8bef\u65e5\u5fd7\u4fe1\u606f\u7b49\u7b49\u3002 emerg(0) \u7cfb\u7edf\u4e0d\u53ef\u7528 alert(1) \u9700\u8981\u7acb\u5373\u91c7\u53d6\u52a8\u4f5c crit(2) \u4e25\u91cd\u72b6\u51b5 error(3) \u975e\u5e38\u4e25\u91cd\u9519\u8bef\u72b6\u51b5 warning(4) \u8b66\u544a\u72b6\u51b5 notice(5) \u6b63\u5e38\u4f46\u8981\u6ce8\u610f info(6) \u4fe1\u606f\u6027\u4e8b\u4ef6 debug(7) \u8c03\u8bd5\u7ea7\u522b\u6d88\u606f","title":"logger -p"},{"location":"RH124/day5/#systemd","text":"mkdir /var/log/journal chown root:systemd-journal /var/log/journal chmod 2755 /var/log/journal killall -USER1 systemd-journald","title":"systemd \u65e5\u5fd7\u6301\u4e45\u5316"},{"location":"RH124/day5/#tar","text":"\u9009\u9879 \u4f5c\u7528 -c \u521b\u5efa\u5b58\u6863 -z \u4f7f\u7528 gzip \u538b\u7f29\u65b9\u5f0f\uff08.tgz \u6216 .tar.gz\uff09 -j \u4f7f\u7528 bzip2 \u538b\u7f29\u65b9\u5f0f\uff08.tar.bz2\uff09 -J \u4f7f\u7528 xz \u538b\u7f29\u65b9\u5f0f\uff08.tar.xz\uff09 -v \u8be6\u7ec6\u4fe1\u606f\uff0c\u663e\u793a\u5b58\u6863\u6216\u63d0\u53d6\u7684\u7684\u6587\u4ef6 -f \u8981\u64cd\u4f5c\u7684\u5b58\u6863\u6587\u4ef6\u540d -x \u63d0\u53d6\u5b58\u6863\u5185\u5bb9 -t \u5217\u51fa\u5b58\u6863\u5185\u5bb9 -p \u4fdd\u7559\u6587\u4ef6\u548c\u76ee\u5f55\u7684\u6743\u9650\uff0c\u4e0d\u53bb\u9664umask -C \u6307\u5b9a\u89e3\u538b\u5230\u7684\u76ee\u5f55 -P \u538b\u7f29\u65f6\u4fdd\u7559\u7edd\u5ea6\u8def\u5f84 \u538b\u7f29\u7387\uff1agzip < bzip2 < xz \u538b\u7f29\u901f\u5ea6\uff1agzip > bzip2 > xz","title":"\u538b\u7f29\u5f52\u6863 tar"},{"location":"RH124/day5/#_2","text":"scp scp \u672c\u5730\u6587\u4ef6 \u8fdc\u7a0b\u7528\u6237@\u8fdc\u7a0b\u4e3b\u673a:/\u4fdd\u5b58\u4f4d\u7f6e scp \u8fdc\u7a0b\u7528\u6237@\u8fdc\u7a0b\u4e3b\u673a:/\u6587\u4ef6\u8def\u5f84 \u672c\u5730\u4fdd\u5b58\u4f4d\u7f6e \u9009\u9879\uff1a * -r \u9012\u5f52\uff0c\u590d\u5236\u76ee\u5f55\u4f7f\u7528 * -p \u4fdd\u7559\u65f6\u95f4\u548c\u6743\u9650 sftp sftp root@server0 >cd /tmp #cd \u670d\u52a1\u7aef /tmp \u76ee\u5f55 >ls #\u67e5\u770b\u670d\u52a1\u7aef /tmp \u5185\u5bb9 >lcd /etc #cd \u5ba2\u6237\u7aef /etc \u76ee\u5f55 >put passwd #\u4e0a\u4f20 passwd \u6587\u4ef6 >lcd /boot #cd \u5ba2\u6237\u7aef /boot \u76ee\u5f55 >mkdir grub2 #\u670d\u52a1\u7aef\u521b\u5efa\u4e0a\u4f20\u76ee\u5f55\u540c\u540d\u76ee\u5f55 >put -r grub2 #\u4e0a\u4f20 grub2 \u76ee\u5f55 >ls #\u67e5\u770b\u670d\u52a1\u7aef /tmp \u5185\u5bb9 >lcd /tmp #cd \u5ba2\u6237\u7aef /tmp \u76ee\u5f55 >lls #\u67e5\u770b\u5ba2\u6237\u7aef /tpm \u76ee\u5f55\u5185\u5bb9 >get passwd #\u4ece\u670d\u52a1\u7aef\u4e0b\u8f7d passwd \u6587\u4ef6 >get -r grub2 #\u4ece\u670d\u52a1\u7aef\u4e0b\u8f7d grub2 \u76ee\u5f55 >lls #\u67e5\u770b\u5ba2\u6237\u7aef /tmp \u76ee\u5f55\u5185\u5bb9 \u9009\u9879\uff1a * -r \u9012\u5f52\uff0c\u4e0a\u4f20\u6216\u4e0b\u8f7d\u76ee\u5f55\u4f7f\u7528\uff0c\u4e0a\u4f20\u76ee\u5f55\u5fc5\u987b\u5728\u670d\u52a1\u7aef\u53e3\u540c\u540d\u76ee\u5f55 * -p \u4fdd\u7559\u65f6\u95f4\u548c\u6743\u9650 rsync rsync \u672c\u5730\u76ee\u5f55 \u8fdc\u7a0b\u7528\u6237@\u8fdc\u7a0b\u4e3b\u673a:/\u4fdd\u5b58\u4f4d\u7f6e rsync \u8fdc\u7a0b\u7528\u6237@\u8fdc\u7a0b\u4e3b\u673a:/\u76ee\u5f55\u8def\u5f84 \u672c\u5730\u4fdd\u5b58\u4f4d\u7f6e \u9009\u9879\uff1a * -av -a \u5b58\u6863\u6a21\u5f0f\uff0c-v \u8be6\u7ec6\u4fe1\u606f -a \u4ee3\u8868\uff1a -r \u9012\u5f52\uff0c-l \u540c\u6b65\u7b26\u53f7\u94fe\u63a5\uff0c-p \u4fdd\u7559\u6743\u9650\uff0c-t \u4fdd\u7559\u65f6\u95f4\u6233\uff0c-g \u4fdd\u7559\u7ec4\u6240\u6709\u6743\uff0c-o \u4fdd\u7559\u6240\u6709\u8005\uff0c-D \u540c\u6b65\u8bbe\u5907\u6587\u4ef6","title":"\u8fdc\u7a0b\u590d\u5236\u6587\u4ef6"},{"location":"RH124/day6/","text":"\u7b2c6\u5929 \u8f6f\u4ef6\u5305\u7ba1\u7406 \u6e90\u7801\u7f16\u8bd1\u5b89\u88c5 rpm yum rpm \u547d\u4ee4\u9009\u9879 -i \u5b89\u88c5 -U \u5347\u7ea7 -e \u5378\u8f7d -v \u8be6\u7ec6\u4fe1\u606f -h \u5b89\u88c5\u65f6\u663e\u793a\u8fdb\u5ea6 -q \u67e5\u8be2 \u4ee5\u4e0b\u9009\u9879\u5747\u9700\u4e0e -q \u8fde\u7528 * -a \u6240\u6709\u5df2\u5b89\u88c5\u8f6f\u4ef6\u5305 * -l \u5217\u51fa rpm \u8f6f\u4ef6\u5305\u6240\u6709\u5185\u5bb9 * -c \u5217\u51fa rpm \u8f6f\u4ef6\u5305\u914d\u7f6e\u6587\u4ef6 * -i \u5217\u51fa\u8f6f\u4ef6\u5305\u4fe1\u606f * -p \u672a\u5b89\u88c5\u7684\u8f6f\u4ef6\u5305 * --scripts \u5b89\u88c5\u6216\u5220\u9664\u4e4b\u540e\u6267\u884c\u7684\u811a\u672c * --changelog \u5217\u51fa\u66f4\u6539\u4fe1\u606f yum \u547d\u4ee4 \u547d\u4ee4 \u4f5c\u7528 yum list \uff3bNAME-PATTERN\uff3d \u6309\u540d\u79f0\u5217\u51fa\u5df2\u5b89\u88c5\u548c\u53ef\u7528\u7684\u8f6f\u4ef6\u5305 yum grouplist \u5217\u51fa\u5df2\u5b89\u88c5\u548c\u53ef\u7528\u7684\u7ec4 yum search KEYWORD \u6309\u5173\u952e\u5b57\u641c\u7d22\u8f6f\u4ef6\u5305 yum info PACKAGENAME \u663e\u793a\u8f6f\u4ef6\u5305\u7684\u8be6\u7ec6\u4fe1\u606f yum install PACKAGENAME \u5b89\u88c5\u8f6f\u4ef6\u5305 yum groupinstall GROUPNAME \u5b89\u88c5\u8f6f\u4ef6\u5305\u7ec4 yum update \u66f4\u65b0\u6240\u6709\u8f6f\u4ef6\u5305 yum remove PACKAGENAME \u5220\u9664\u8f6f\u4ef6\u5305 yum history \u663e\u793a\u4e8b\u52a1\u5386\u53f2\u8bb0\u5f55 yum \u6e90\u914d\u7f6e\u6587\u4ef6 /etc/yum.repos.d/*.repo [repo_id] name = repo_name enabled = 1 baseurl = http://... ftp://... file://... gpgcheck = 0 #\u82e5 gpgcheck \u4e3a 1\uff0c\u5219\u9700\u8981\u6307\u5b9a gpgkey = ... CentOS \u53ef\u7528 yum \u6e90\uff1a https://wiki.centos.org/zh/AdditionalResources/Repositories \u6e90\u7801\u7f16\u8bd1\u5b89\u88c5 \u5b89\u88c5 \u7f16\u8bd1\u5668\uff0c\u4e00\u822c\u662f gcc \uff0c\u4e5f\u53ef\u4ee5\u5b89\u88c5\u5305\u7ec4 Development tools \u4ece\u8f6f\u4ef6\u5b98\u7f51\u4e0b\u8f7d\u6e90\u7801\u5305\uff0c\u901a\u5e38\u662f tar \u5305 \u5230\u89e3\u538b\u76ee\u5f55\u4e0b\u6267\u884c ./configure \u8fdb\u884c\u9884\u7f16\u8bd1\uff0c ./configure --help \u67e5\u770b\u9884\u7f16\u8bd1\u9009\u9879 \u8865\u5145\u4f9d\u8d56\u7ec4\u4ef6\uff0c\u518d\u6b21\u9884\u7f16\u8bd1\uff08\u591a\u6b21\uff09\uff0c\u76f4\u5230\u751f\u6210 makefile \u6267\u884c make \u8fdb\u884c\u7f16\u8bd1 \u6267\u884c make install \u8fdb\u884c\u5b89\u88c5 \u6587\u4ef6\u7cfb\u7edf I/O \u8bbe\u5907 I/O\u8bbe\u5907\u5927\u81f4\u5206\u4e3a\u4e24\u7c7b\uff1a\u5757\u8bbe\u5907\u548c\u5b57\u7b26\u8bbe\u5907\u3002 * \u5757\u8bbe\u5907\u5c06\u4fe1\u606f\u5b58\u50a8\u5728\u56fa\u5b9a\u5927\u5c0f\u7684\u5757\u4e2d\uff0c\u6bcf\u4e2a\u5757\u90fd\u6709\u81ea\u5df1\u7684\u5730\u5740\u3002\u5757\u8bbe\u5907\u7684\u57fa\u672c\u7279\u5f81\u662f\u6bcf\u4e2a\u5757\u90fd\u80fd\u72ec\u7acb\u4e8e\u5176\u5b83\u5757\u800c\u8bfb\u5199\u3002\u78c1\u76d8\u662f\u6700\u5e38\u89c1\u7684\u5757\u8bbe\u5907\u3002 * \u5b57\u7b26\u8bbe\u5907\u662f\u6307\u5728I/O\u4f20\u8f93\u8fc7\u7a0b\u4e2d\u4ee5\u5b57\u7b26\u4e3a\u5355\u4f4d\u8fdb\u884c\u4f20\u8f93\u7684\u8bbe\u5907\uff0c\u4f8b\u5982\u952e\u76d8\uff0c\u6253\u5370\u673a\u7b49\u3002 \u786c\u76d8\u7b80\u4ecb \u6587\u4ef6\u7cfb\u7edf \u6587\u4ef6\u7684\u7cfb\u7edf\u662f\u64cd\u4f5c\u7cfb\u7edf\u7528\u4e8e\u660e\u786e\u78c1\u76d8\u6216\u5206\u533a\u4e0a\u7684\u6587\u4ef6\u7684\u65b9\u6cd5\u548c\u6570\u636e\u7ed3\u6784\uff0c\u5373\u5728\u78c1\u76d8\u4e0a\u7ec4\u7ec7\u6587\u4ef6\u7684\u65b9\u6cd5\u3002 Windows \u5e38\u7528\u6587\u4ef6\u7cfb\u7edf NTFS\uff0cFAT32\uff0cexFAT Linux \u5e38\u7528\u6587\u4ef6\u7cfb\u7edf XFS\uff0cExt4 \u5e38\u7528\u547d\u4ee4 fdisk \u5206\u533a\u5de5\u5177 lsblk \u67e5\u770b\u5757\u8bbe\u5907 blkid \u67e5\u770b\u5206\u533a\uff0cUUID\uff0c\u6587\u4ef6\u7cfb\u7edf mkfs \u683c\u5f0f\u5316\uff0c\u5199\u5165\u6587\u4ef6\u7cfb\u7edf df \u67e5\u770b\u6587\u4ef6\u7cfb\u7edf\u6302\u8f7d\u53ca\u4f7f\u7528\u60c5\u51b5 mount\uff0cumount \u6587\u4ef6\u7cfb\u7edf\u7684\u6302\u8f7d\u548c\u5378\u8f7d \u8f6f\u94fe\u63a5\u548c\u786c\u94fe\u63a5 \u547d\u4ee4 ln \u786c\u94fe\u63a5 ln -s \u8f6f\u94fe\u63a5 \u786c\u94fe\u63a5\u76f4\u63a5\u5f15\u7528\u6587\u4ef6\u7cfb\u7edf\u4e2d\u7684\u6587\u4ef6 \u6240\u6709\u786c\u94fe\u63a5\u6743\u9650\uff0c\u94fe\u63a5\u6570\uff0c\u5c5e\u4e3b\u3001\u5c5e\u7ec4\uff0c\u65f6\u95f4\u6233\uff0c\u6587\u4ef6\u5185\u5bb9\u4fdd\u6301\u4e00\u81f4 \u5220\u9664\u67d0\u4e2a\u786c\u94fe\u63a5\u5176\u5b83\u786c\u94fe\u63a5\u4ecd\u80fd\u8bbf\u95ee\u6539\u6587\u4ef6 \u786c\u94fe\u63a5\u4e0d\u80fd\u8de8\u6587\u4ef6\u7cfb\u7edf \u8f6f\u94fe\u63a5\u53c8\u53eb\u7b26\u53f7\u94fe\u63a5\uff0c\u6307\u5411\u73b0\u6709\u6587\u4ef6\u6216\u76ee\u5f55 \u5220\u9664\u8be5\u6587\u4ef6\u6216\u76ee\u5f55\u540e\uff0c\u8f6f\u94fe\u63a5\u4e0d\u53ef\u7528 \u8f6f\u94fe\u63a5\u53ef\u4ee5\u8de8\u6587\u4ef6\u7cfb\u7edf \u6587\u4ef6\u67e5\u627e locate * \u4ece\u9884\u751f\u6210\u7684\u6570\u636e\u5e93\u4e2d\u67e5\u627e\uff0c\u6570\u636e\u5e93\u6bcf\u5929\u66f4\u65b0 * \u5f53\u524d\u65b0\u5efa\u6587\u4ef6\u6216\u76ee\u5f55\u53ef\u80fd\u65e0\u6cd5\u67e5\u627e * \u4f7f\u7528 updatedb \u53ef\u4ee5\u53ca\u65f6\u66f4\u65b0\u6570\u636e\u5e93 * -i \u5ffd\u7565\u5927\u5c0f\u5199\uff0c-n \u6307\u5b9a\u884c\u6570 find * \u5bf9\u6574\u4e2a\u6587\u4ef6\u7cfb\u7edf\u5b9e\u65f6\u641c\u7d22 \u9009\u9879 \u4f5c\u7528 -i \u5ffd\u7565\u5927\u5c0f\u5199 -name \u6307\u5b9a\u6587\u4ef6\u540d -user\uff0c-uid \u6307\u5b9a\u7528\u6237\u540d\u6216 uid -group\uff0c-gid \u6307\u5b9a\u7ec4\u540d\u6216 gid -perm \u6307\u5b9a\u6743\u9650\uff0c/ U\uff0cG\uff0cO \u4e2d\u81f3\u5c11\u5339\u914d\u4e00\u4f4d\uff08\u6216\uff09\uff0c- U\uff0cG\uff0cO \u81f3\u5c11\u5404\u5339\u914d\u4e00\u4f4d\uff08\u4e0e\uff09 -size \u6307\u5b9a\u5927\u5c0f\uff0c+ \u5927\u4e8e\uff0c- \u5c0f\u4e8e -mmin \u6307\u5b9a\u65f6\u95f4\uff08\u5206\u949f\uff09\uff0c+ \u5206\u949f\u524d\uff0c- \u5206\u949f\u5185 -type \u6307\u5b9a\u7c7b\u578b\uff0cf \u6587\u4ef6\uff0cd \u76ee\u5f55\uff0cl \u8f6f\u94fe\u63a5\uff0cb \u5757\u8bbe\u5907 -links \u6307\u5b9a\u786c\u8fde\u63a5\u6570\uff0c+ \u5927\u4e8e\uff0c-\u5c0f\u4e8e \u865a\u62df\u5316\u7b80\u4ecb \u5e38\u89c1\u865a\u62df\u5316 xen \u5f00\u6e90\u514d\u8d39\u7684\u865a\u62df\u5316\u8f6f\u4ef6\uff0c\u57fa\u4e8e\u786c\u4ef6\u7684\u5b8c\u5168\u5206\u5272\uff0c\u7269\u7406\u4e0a\u6709\u591a\u5c11\u7684\u8d44\u6e90\u5c31\u53ea\u80fd\u5206\u914d\u591a\u5c11\u8d44\u6e90\u3002 kvm \u5f00\u6e90\u514d\u8d39\u7684\u865a\u62df\u5316\u8f6f\u4ef6\uff0cLinux \u4e0b\u7684\u5168\u529f\u80fd\u865a\u62df\u5316\u67b6\u6784\uff0c\u751a\u81f3\u62e5\u6709\u72ec\u7acb\u7684BIOS\u63a7\u5236\uff0c\u6240\u4ee5\u5bf9\u6bcd\u670d\u52a1\u5668\u6027\u80fd\u5f71\u54cd\u8f83\u5927\u3002 vmware \u662f\u4ed8\u8d39\u7684\u865a\u62df\u5316\u8f6f\u4ef6\uff0cVPS\uff08\u542b\u72ec\u7acb\u9762\u677f\uff09\u7cfb\u5217\u4ea7\u54c1\u6388\u6743\u8d39\u7528\u975e\u5e38\u6602\u8d35\u3002 hyper-v \u6bd4\u8f83\u7279\u522b\uff0c\u662f\u5fae\u8f6f windows \u9644\u5e26\u7684\u865a\u62df\u5316\u7ec4\u4ef6\uff0c\u5982\u679c\u4f60\u4e70\u4e86\u8db3\u591f\u7684\u6388\u6743\uff0chyper-v \u53ef\u4ee5\u514d\u8d39\u4f7f\u7528\uff0cHyper-V \u4e13\u4e3a Windows \u5b9a\u5236\uff0c\u7ba1\u7406\u8d77\u6765\u8f83\u4e3a\u65b9\u4fbf\uff0c\u867d\u7136\u76ee\u524d\u4e5f\u652f\u6301 Linux\uff0c\u4f46\u6027\u80fd\u635f\u5931\u6bd4\u8f83\u4e25\u91cd\u3002\u3002 qemu \u4e0e kvm Qemu \u662f\u7eaf\u8f6f\u4ef6\u5b9e\u73b0\u7684\u865a\u62df\u5316\u6a21\u62df\u5668\uff0c\u51e0\u4e4e\u53ef\u4ee5\u6a21\u62df\u4efb\u4f55\u786c\u4ef6\u8bbe\u5907\uff0c\u6211\u4eec\u6700\u719f\u6089\u7684\u5c31\u662f\u80fd\u591f\u6a21\u62df\u4e00\u53f0\u80fd\u591f\u72ec\u7acb\u8fd0\u884c\u64cd\u4f5c\u7cfb\u7edf\u7684\u865a\u62df\u673a\uff0c\u865a\u62df\u673a\u8ba4\u4e3a\u81ea\u5df1\u548c\u786c\u4ef6\u6253\u4ea4\u9053\uff0c\u4f46\u5176\u5b9e\u662f\u548c Qemu \u6a21\u62df\u51fa\u6765\u7684\u786c\u4ef6\u6253\u4ea4\u9053\uff0cQemu \u5c06\u8fd9\u4e9b\u6307\u4ee4\u8f6c\u8bd1\u7ed9\u771f\u6b63\u7684\u786c\u4ef6\u3002 \u6b63\u56e0\u4e3a Qemu \u662f\u7eaf\u8f6f\u4ef6\u5b9e\u73b0\u7684\uff0c\u6240\u6709\u7684\u6307\u4ee4\u90fd\u8981\u7ecf Qemu \u8fc7\u4e00\u624b\uff0c\u6027\u80fd\u975e\u5e38\u4f4e\uff0c\u6240\u4ee5\uff0c\u5728\u751f\u4ea7\u73af\u5883\u4e2d\uff0c\u5927\u591a\u6570\u7684\u505a\u6cd5\u90fd\u662f\u914d\u5408 KVM \u6765\u5b8c\u6210\u865a\u62df\u5316\u5de5\u4f5c\uff0c\u56e0\u4e3a KVM \u662f\u786c\u4ef6\u8f85\u52a9\u7684\u865a\u62df\u5316\u6280\u672f\uff0c\u4e3b\u8981\u8d1f\u8d23 \u6bd4\u8f83\u7e41\u7410\u7684 CPU \u548c\u5185\u5b58\u865a\u62df\u5316\uff0c\u800c Qemu \u5219\u8d1f\u8d23 I/O \u865a\u62df\u5316\uff0c\u4e24\u8005\u5408\u4f5c\u5404\u81ea\u53d1\u6325\u81ea\u8eab\u7684\u4f18\u52bf\uff0c\u76f8\u5f97\u76ca\u5f70\u3002 kvm \u7b80\u4ecb KVM \u662f\u5f00\u6e90\u8f6f\u4ef6\uff0c\u5168\u79f0\u662fkernel-based virtual machine\uff08\u57fa\u4e8e\u5185\u6838\u7684\u865a\u62df\u673a\uff09\u3002 KVM \u662f x86 \u67b6\u6784\u4e14\u786c\u4ef6\u652f\u6301\u865a\u62df\u5316\u6280\u672f\uff08\u5982 intel VT \u6216 AMD-V\uff09\u7684Linux\u5168\u865a\u62df\u5316\u89e3\u51b3\u65b9\u6848\u3002 KVM \u5305\u542b\u4e00\u4e2a\u4e3a\u5904\u7406\u5668\u63d0\u4f9b\u5e95\u5c42\u865a\u62df\u5316\u53ef\u52a0\u8f7d\u7684\u6838\u5fc3\u6a21\u5757kvm.ko\uff08kvm-intel.ko\u6216kvm-AMD.ko\uff09\u3002 KVM \u9700\u8981\u4e00\u4e2a\u7ecf\u8fc7\u4fee\u6539\u7684QEMU\u8f6f\u4ef6\uff08qemu-kvm\uff09\uff0c\u4f5c\u4e3a\u865a\u62df\u673a\u4e0a\u5c42\u63a7\u5236\u548c\u754c\u9762\u3002 KVM\u80fd\u5728\u4e0d\u6539\u53d8 linux \u6216 windows \u955c\u50cf\u7684\u60c5\u51b5\u4e0b\u540c\u65f6\u8fd0\u884c\u591a\u4e2a\u865a\u62df\u673a\uff0c\uff08\u5b83\u7684\u610f\u601d\u662f\u591a\u4e2a\u865a\u62df\u673a\u4f7f\u7528\u540c\u4e00\u955c\u50cf\uff09\u5e76\u4e3a\u6bcf\u4e00\u4e2a\u865a\u62df\u673a\u914d\u7f6e\u4e2a\u6027\u5316\u786c\u4ef6\u73af\u5883\uff08\u7f51\u5361\u3001\u78c1\u76d8\u3001\u56fe\u5f62\u9002\u914d\u5668\u2026\u2026\uff09\u3002 \u5728 2.6.20 \u4ee5\u4e0a\u7684\u5185\u6838\u5747\u5df2\u5305\u542b\u4e86KVM\u6838\u5fc3\u3002 \u8981\u6c42cpu \u5fc5\u987b\u652f\u6301\u865a\u62df\u5316\u3002 \u4f5c\u4e3a\u670d\u52a1\u5668\u6027\u80fd\u5f88\u597d\uff0ccpu \u4f7f\u7528\u7387\u63a7\u5236\u5f88\u597d\uff0c\u63a7\u5236\u4e0a\u6bd4\u8f83\u7b80\u6d01\uff0c\u529f\u80fd\u6bd4\u8f83\u4e30\u5bcc\uff0c\u53ef\u662f\u56fe\u5f62\u80fd\u529b\u8f83\u5dee\u3002","title":"\u7b2c6\u5929"},{"location":"RH124/day6/#6","text":"","title":"\u7b2c6\u5929"},{"location":"RH124/day6/#_1","text":"\u6e90\u7801\u7f16\u8bd1\u5b89\u88c5 rpm yum","title":"\u8f6f\u4ef6\u5305\u7ba1\u7406"},{"location":"RH124/day6/#rpm","text":"-i \u5b89\u88c5 -U \u5347\u7ea7 -e \u5378\u8f7d -v \u8be6\u7ec6\u4fe1\u606f -h \u5b89\u88c5\u65f6\u663e\u793a\u8fdb\u5ea6 -q \u67e5\u8be2 \u4ee5\u4e0b\u9009\u9879\u5747\u9700\u4e0e -q \u8fde\u7528 * -a \u6240\u6709\u5df2\u5b89\u88c5\u8f6f\u4ef6\u5305 * -l \u5217\u51fa rpm \u8f6f\u4ef6\u5305\u6240\u6709\u5185\u5bb9 * -c \u5217\u51fa rpm \u8f6f\u4ef6\u5305\u914d\u7f6e\u6587\u4ef6 * -i \u5217\u51fa\u8f6f\u4ef6\u5305\u4fe1\u606f * -p \u672a\u5b89\u88c5\u7684\u8f6f\u4ef6\u5305 * --scripts \u5b89\u88c5\u6216\u5220\u9664\u4e4b\u540e\u6267\u884c\u7684\u811a\u672c * --changelog \u5217\u51fa\u66f4\u6539\u4fe1\u606f","title":"rpm \u547d\u4ee4\u9009\u9879"},{"location":"RH124/day6/#yum","text":"\u547d\u4ee4 \u4f5c\u7528 yum list \uff3bNAME-PATTERN\uff3d \u6309\u540d\u79f0\u5217\u51fa\u5df2\u5b89\u88c5\u548c\u53ef\u7528\u7684\u8f6f\u4ef6\u5305 yum grouplist \u5217\u51fa\u5df2\u5b89\u88c5\u548c\u53ef\u7528\u7684\u7ec4 yum search KEYWORD \u6309\u5173\u952e\u5b57\u641c\u7d22\u8f6f\u4ef6\u5305 yum info PACKAGENAME \u663e\u793a\u8f6f\u4ef6\u5305\u7684\u8be6\u7ec6\u4fe1\u606f yum install PACKAGENAME \u5b89\u88c5\u8f6f\u4ef6\u5305 yum groupinstall GROUPNAME \u5b89\u88c5\u8f6f\u4ef6\u5305\u7ec4 yum update \u66f4\u65b0\u6240\u6709\u8f6f\u4ef6\u5305 yum remove PACKAGENAME \u5220\u9664\u8f6f\u4ef6\u5305 yum history \u663e\u793a\u4e8b\u52a1\u5386\u53f2\u8bb0\u5f55","title":"yum \u547d\u4ee4"},{"location":"RH124/day6/#yum-etcyumreposdrepo","text":"[repo_id] name = repo_name enabled = 1 baseurl = http://... ftp://... file://... gpgcheck = 0 #\u82e5 gpgcheck \u4e3a 1\uff0c\u5219\u9700\u8981\u6307\u5b9a gpgkey = ... CentOS \u53ef\u7528 yum \u6e90\uff1a https://wiki.centos.org/zh/AdditionalResources/Repositories","title":"yum \u6e90\u914d\u7f6e\u6587\u4ef6 /etc/yum.repos.d/*.repo"},{"location":"RH124/day6/#_2","text":"\u5b89\u88c5 \u7f16\u8bd1\u5668\uff0c\u4e00\u822c\u662f gcc \uff0c\u4e5f\u53ef\u4ee5\u5b89\u88c5\u5305\u7ec4 Development tools \u4ece\u8f6f\u4ef6\u5b98\u7f51\u4e0b\u8f7d\u6e90\u7801\u5305\uff0c\u901a\u5e38\u662f tar \u5305 \u5230\u89e3\u538b\u76ee\u5f55\u4e0b\u6267\u884c ./configure \u8fdb\u884c\u9884\u7f16\u8bd1\uff0c ./configure --help \u67e5\u770b\u9884\u7f16\u8bd1\u9009\u9879 \u8865\u5145\u4f9d\u8d56\u7ec4\u4ef6\uff0c\u518d\u6b21\u9884\u7f16\u8bd1\uff08\u591a\u6b21\uff09\uff0c\u76f4\u5230\u751f\u6210 makefile \u6267\u884c make \u8fdb\u884c\u7f16\u8bd1 \u6267\u884c make install \u8fdb\u884c\u5b89\u88c5","title":"\u6e90\u7801\u7f16\u8bd1\u5b89\u88c5"},{"location":"RH124/day6/#_3","text":"","title":"\u6587\u4ef6\u7cfb\u7edf"},{"location":"RH124/day6/#io","text":"I/O\u8bbe\u5907\u5927\u81f4\u5206\u4e3a\u4e24\u7c7b\uff1a\u5757\u8bbe\u5907\u548c\u5b57\u7b26\u8bbe\u5907\u3002 * \u5757\u8bbe\u5907\u5c06\u4fe1\u606f\u5b58\u50a8\u5728\u56fa\u5b9a\u5927\u5c0f\u7684\u5757\u4e2d\uff0c\u6bcf\u4e2a\u5757\u90fd\u6709\u81ea\u5df1\u7684\u5730\u5740\u3002\u5757\u8bbe\u5907\u7684\u57fa\u672c\u7279\u5f81\u662f\u6bcf\u4e2a\u5757\u90fd\u80fd\u72ec\u7acb\u4e8e\u5176\u5b83\u5757\u800c\u8bfb\u5199\u3002\u78c1\u76d8\u662f\u6700\u5e38\u89c1\u7684\u5757\u8bbe\u5907\u3002 * \u5b57\u7b26\u8bbe\u5907\u662f\u6307\u5728I/O\u4f20\u8f93\u8fc7\u7a0b\u4e2d\u4ee5\u5b57\u7b26\u4e3a\u5355\u4f4d\u8fdb\u884c\u4f20\u8f93\u7684\u8bbe\u5907\uff0c\u4f8b\u5982\u952e\u76d8\uff0c\u6253\u5370\u673a\u7b49\u3002 \u786c\u76d8\u7b80\u4ecb","title":"I/O \u8bbe\u5907"},{"location":"RH124/day6/#_4","text":"\u6587\u4ef6\u7684\u7cfb\u7edf\u662f\u64cd\u4f5c\u7cfb\u7edf\u7528\u4e8e\u660e\u786e\u78c1\u76d8\u6216\u5206\u533a\u4e0a\u7684\u6587\u4ef6\u7684\u65b9\u6cd5\u548c\u6570\u636e\u7ed3\u6784\uff0c\u5373\u5728\u78c1\u76d8\u4e0a\u7ec4\u7ec7\u6587\u4ef6\u7684\u65b9\u6cd5\u3002 Windows \u5e38\u7528\u6587\u4ef6\u7cfb\u7edf NTFS\uff0cFAT32\uff0cexFAT Linux \u5e38\u7528\u6587\u4ef6\u7cfb\u7edf XFS\uff0cExt4","title":"\u6587\u4ef6\u7cfb\u7edf"},{"location":"RH124/day6/#_5","text":"fdisk \u5206\u533a\u5de5\u5177 lsblk \u67e5\u770b\u5757\u8bbe\u5907 blkid \u67e5\u770b\u5206\u533a\uff0cUUID\uff0c\u6587\u4ef6\u7cfb\u7edf mkfs \u683c\u5f0f\u5316\uff0c\u5199\u5165\u6587\u4ef6\u7cfb\u7edf df \u67e5\u770b\u6587\u4ef6\u7cfb\u7edf\u6302\u8f7d\u53ca\u4f7f\u7528\u60c5\u51b5 mount\uff0cumount \u6587\u4ef6\u7cfb\u7edf\u7684\u6302\u8f7d\u548c\u5378\u8f7d","title":"\u5e38\u7528\u547d\u4ee4"},{"location":"RH124/day6/#_6","text":"\u547d\u4ee4 ln \u786c\u94fe\u63a5 ln -s \u8f6f\u94fe\u63a5 \u786c\u94fe\u63a5\u76f4\u63a5\u5f15\u7528\u6587\u4ef6\u7cfb\u7edf\u4e2d\u7684\u6587\u4ef6 \u6240\u6709\u786c\u94fe\u63a5\u6743\u9650\uff0c\u94fe\u63a5\u6570\uff0c\u5c5e\u4e3b\u3001\u5c5e\u7ec4\uff0c\u65f6\u95f4\u6233\uff0c\u6587\u4ef6\u5185\u5bb9\u4fdd\u6301\u4e00\u81f4 \u5220\u9664\u67d0\u4e2a\u786c\u94fe\u63a5\u5176\u5b83\u786c\u94fe\u63a5\u4ecd\u80fd\u8bbf\u95ee\u6539\u6587\u4ef6 \u786c\u94fe\u63a5\u4e0d\u80fd\u8de8\u6587\u4ef6\u7cfb\u7edf \u8f6f\u94fe\u63a5\u53c8\u53eb\u7b26\u53f7\u94fe\u63a5\uff0c\u6307\u5411\u73b0\u6709\u6587\u4ef6\u6216\u76ee\u5f55 \u5220\u9664\u8be5\u6587\u4ef6\u6216\u76ee\u5f55\u540e\uff0c\u8f6f\u94fe\u63a5\u4e0d\u53ef\u7528 \u8f6f\u94fe\u63a5\u53ef\u4ee5\u8de8\u6587\u4ef6\u7cfb\u7edf","title":"\u8f6f\u94fe\u63a5\u548c\u786c\u94fe\u63a5"},{"location":"RH124/day6/#_7","text":"locate * \u4ece\u9884\u751f\u6210\u7684\u6570\u636e\u5e93\u4e2d\u67e5\u627e\uff0c\u6570\u636e\u5e93\u6bcf\u5929\u66f4\u65b0 * \u5f53\u524d\u65b0\u5efa\u6587\u4ef6\u6216\u76ee\u5f55\u53ef\u80fd\u65e0\u6cd5\u67e5\u627e * \u4f7f\u7528 updatedb \u53ef\u4ee5\u53ca\u65f6\u66f4\u65b0\u6570\u636e\u5e93 * -i \u5ffd\u7565\u5927\u5c0f\u5199\uff0c-n \u6307\u5b9a\u884c\u6570 find * \u5bf9\u6574\u4e2a\u6587\u4ef6\u7cfb\u7edf\u5b9e\u65f6\u641c\u7d22 \u9009\u9879 \u4f5c\u7528 -i \u5ffd\u7565\u5927\u5c0f\u5199 -name \u6307\u5b9a\u6587\u4ef6\u540d -user\uff0c-uid \u6307\u5b9a\u7528\u6237\u540d\u6216 uid -group\uff0c-gid \u6307\u5b9a\u7ec4\u540d\u6216 gid -perm \u6307\u5b9a\u6743\u9650\uff0c/ U\uff0cG\uff0cO \u4e2d\u81f3\u5c11\u5339\u914d\u4e00\u4f4d\uff08\u6216\uff09\uff0c- U\uff0cG\uff0cO \u81f3\u5c11\u5404\u5339\u914d\u4e00\u4f4d\uff08\u4e0e\uff09 -size \u6307\u5b9a\u5927\u5c0f\uff0c+ \u5927\u4e8e\uff0c- \u5c0f\u4e8e -mmin \u6307\u5b9a\u65f6\u95f4\uff08\u5206\u949f\uff09\uff0c+ \u5206\u949f\u524d\uff0c- \u5206\u949f\u5185 -type \u6307\u5b9a\u7c7b\u578b\uff0cf \u6587\u4ef6\uff0cd \u76ee\u5f55\uff0cl \u8f6f\u94fe\u63a5\uff0cb \u5757\u8bbe\u5907 -links \u6307\u5b9a\u786c\u8fde\u63a5\u6570\uff0c+ \u5927\u4e8e\uff0c-\u5c0f\u4e8e","title":"\u6587\u4ef6\u67e5\u627e"},{"location":"RH124/day6/#_8","text":"","title":"\u865a\u62df\u5316\u7b80\u4ecb"},{"location":"RH124/day6/#_9","text":"xen \u5f00\u6e90\u514d\u8d39\u7684\u865a\u62df\u5316\u8f6f\u4ef6\uff0c\u57fa\u4e8e\u786c\u4ef6\u7684\u5b8c\u5168\u5206\u5272\uff0c\u7269\u7406\u4e0a\u6709\u591a\u5c11\u7684\u8d44\u6e90\u5c31\u53ea\u80fd\u5206\u914d\u591a\u5c11\u8d44\u6e90\u3002 kvm \u5f00\u6e90\u514d\u8d39\u7684\u865a\u62df\u5316\u8f6f\u4ef6\uff0cLinux \u4e0b\u7684\u5168\u529f\u80fd\u865a\u62df\u5316\u67b6\u6784\uff0c\u751a\u81f3\u62e5\u6709\u72ec\u7acb\u7684BIOS\u63a7\u5236\uff0c\u6240\u4ee5\u5bf9\u6bcd\u670d\u52a1\u5668\u6027\u80fd\u5f71\u54cd\u8f83\u5927\u3002 vmware \u662f\u4ed8\u8d39\u7684\u865a\u62df\u5316\u8f6f\u4ef6\uff0cVPS\uff08\u542b\u72ec\u7acb\u9762\u677f\uff09\u7cfb\u5217\u4ea7\u54c1\u6388\u6743\u8d39\u7528\u975e\u5e38\u6602\u8d35\u3002 hyper-v \u6bd4\u8f83\u7279\u522b\uff0c\u662f\u5fae\u8f6f windows \u9644\u5e26\u7684\u865a\u62df\u5316\u7ec4\u4ef6\uff0c\u5982\u679c\u4f60\u4e70\u4e86\u8db3\u591f\u7684\u6388\u6743\uff0chyper-v \u53ef\u4ee5\u514d\u8d39\u4f7f\u7528\uff0cHyper-V \u4e13\u4e3a Windows \u5b9a\u5236\uff0c\u7ba1\u7406\u8d77\u6765\u8f83\u4e3a\u65b9\u4fbf\uff0c\u867d\u7136\u76ee\u524d\u4e5f\u652f\u6301 Linux\uff0c\u4f46\u6027\u80fd\u635f\u5931\u6bd4\u8f83\u4e25\u91cd\u3002\u3002","title":"\u5e38\u89c1\u865a\u62df\u5316"},{"location":"RH124/day6/#qemu-kvm","text":"Qemu \u662f\u7eaf\u8f6f\u4ef6\u5b9e\u73b0\u7684\u865a\u62df\u5316\u6a21\u62df\u5668\uff0c\u51e0\u4e4e\u53ef\u4ee5\u6a21\u62df\u4efb\u4f55\u786c\u4ef6\u8bbe\u5907\uff0c\u6211\u4eec\u6700\u719f\u6089\u7684\u5c31\u662f\u80fd\u591f\u6a21\u62df\u4e00\u53f0\u80fd\u591f\u72ec\u7acb\u8fd0\u884c\u64cd\u4f5c\u7cfb\u7edf\u7684\u865a\u62df\u673a\uff0c\u865a\u62df\u673a\u8ba4\u4e3a\u81ea\u5df1\u548c\u786c\u4ef6\u6253\u4ea4\u9053\uff0c\u4f46\u5176\u5b9e\u662f\u548c Qemu \u6a21\u62df\u51fa\u6765\u7684\u786c\u4ef6\u6253\u4ea4\u9053\uff0cQemu \u5c06\u8fd9\u4e9b\u6307\u4ee4\u8f6c\u8bd1\u7ed9\u771f\u6b63\u7684\u786c\u4ef6\u3002 \u6b63\u56e0\u4e3a Qemu \u662f\u7eaf\u8f6f\u4ef6\u5b9e\u73b0\u7684\uff0c\u6240\u6709\u7684\u6307\u4ee4\u90fd\u8981\u7ecf Qemu \u8fc7\u4e00\u624b\uff0c\u6027\u80fd\u975e\u5e38\u4f4e\uff0c\u6240\u4ee5\uff0c\u5728\u751f\u4ea7\u73af\u5883\u4e2d\uff0c\u5927\u591a\u6570\u7684\u505a\u6cd5\u90fd\u662f\u914d\u5408 KVM \u6765\u5b8c\u6210\u865a\u62df\u5316\u5de5\u4f5c\uff0c\u56e0\u4e3a KVM \u662f\u786c\u4ef6\u8f85\u52a9\u7684\u865a\u62df\u5316\u6280\u672f\uff0c\u4e3b\u8981\u8d1f\u8d23 \u6bd4\u8f83\u7e41\u7410\u7684 CPU \u548c\u5185\u5b58\u865a\u62df\u5316\uff0c\u800c Qemu \u5219\u8d1f\u8d23 I/O \u865a\u62df\u5316\uff0c\u4e24\u8005\u5408\u4f5c\u5404\u81ea\u53d1\u6325\u81ea\u8eab\u7684\u4f18\u52bf\uff0c\u76f8\u5f97\u76ca\u5f70\u3002","title":"qemu \u4e0e kvm"},{"location":"RH124/day6/#kvm","text":"KVM \u662f\u5f00\u6e90\u8f6f\u4ef6\uff0c\u5168\u79f0\u662fkernel-based virtual machine\uff08\u57fa\u4e8e\u5185\u6838\u7684\u865a\u62df\u673a\uff09\u3002 KVM \u662f x86 \u67b6\u6784\u4e14\u786c\u4ef6\u652f\u6301\u865a\u62df\u5316\u6280\u672f\uff08\u5982 intel VT \u6216 AMD-V\uff09\u7684Linux\u5168\u865a\u62df\u5316\u89e3\u51b3\u65b9\u6848\u3002 KVM \u5305\u542b\u4e00\u4e2a\u4e3a\u5904\u7406\u5668\u63d0\u4f9b\u5e95\u5c42\u865a\u62df\u5316\u53ef\u52a0\u8f7d\u7684\u6838\u5fc3\u6a21\u5757kvm.ko\uff08kvm-intel.ko\u6216kvm-AMD.ko\uff09\u3002 KVM \u9700\u8981\u4e00\u4e2a\u7ecf\u8fc7\u4fee\u6539\u7684QEMU\u8f6f\u4ef6\uff08qemu-kvm\uff09\uff0c\u4f5c\u4e3a\u865a\u62df\u673a\u4e0a\u5c42\u63a7\u5236\u548c\u754c\u9762\u3002 KVM\u80fd\u5728\u4e0d\u6539\u53d8 linux \u6216 windows \u955c\u50cf\u7684\u60c5\u51b5\u4e0b\u540c\u65f6\u8fd0\u884c\u591a\u4e2a\u865a\u62df\u673a\uff0c\uff08\u5b83\u7684\u610f\u601d\u662f\u591a\u4e2a\u865a\u62df\u673a\u4f7f\u7528\u540c\u4e00\u955c\u50cf\uff09\u5e76\u4e3a\u6bcf\u4e00\u4e2a\u865a\u62df\u673a\u914d\u7f6e\u4e2a\u6027\u5316\u786c\u4ef6\u73af\u5883\uff08\u7f51\u5361\u3001\u78c1\u76d8\u3001\u56fe\u5f62\u9002\u914d\u5668\u2026\u2026\uff09\u3002 \u5728 2.6.20 \u4ee5\u4e0a\u7684\u5185\u6838\u5747\u5df2\u5305\u542b\u4e86KVM\u6838\u5fc3\u3002 \u8981\u6c42cpu \u5fc5\u987b\u652f\u6301\u865a\u62df\u5316\u3002 \u4f5c\u4e3a\u670d\u52a1\u5668\u6027\u80fd\u5f88\u597d\uff0ccpu \u4f7f\u7528\u7387\u63a7\u5236\u5f88\u597d\uff0c\u63a7\u5236\u4e0a\u6bd4\u8f83\u7b80\u6d01\uff0c\u529f\u80fd\u6bd4\u8f83\u4e30\u5bcc\uff0c\u53ef\u662f\u56fe\u5f62\u80fd\u529b\u8f83\u5dee\u3002","title":"kvm \u7b80\u4ecb"},{"location":"RH124/disk/","text":"\u786c\u76d8\u7ed3\u6784 \u76d8\u7247\uff08platter\uff09 \u786c\u76d8\u4e00\u822c\u6709\u591a\u4e2a\u76d8\u7247\uff0c\u6bcf\u4e2a\u76d8\u7247\u53ef\u4ee5\u6709\u4e24\u4e2a\u9762(Side)\uff0c\u7b2c 1 \u4e2a\u76d8\u7247\u7684\u6b63\u9762\u79f0\u4e3a 0 \u9762\uff0c\u53cd\u9762\u79f0\u4e3a 1 \u9762\uff1b\u7b2c 2 \u4e2a\u76d8\u7247\u7684\u6b63\u9762\u79f0\u4e3a 2 \u9762\uff0c\u53cd\u9762\u79f0\u4e3a 3 \u9762... \u78c1\u5934\uff08head\uff09 \u6bcf\u4e2a\u76d8\u9762\u5bf9\u5e94\u4e00\u4e2a\u78c1\u5934(head)\u7528\u4e8e\u8bfb\u5199\u6570\u636e\u3002\u7b2c\u4e00\u4e2a\u76d8\u9762\u7684\u6b63\u9762\u7684\u78c1\u5934\u79f0\u4e3a 0 \u78c1\u5934\uff0c\u80cc\u9762\u79f0\u4e3a 1 \u78c1\u5934\uff1b\u7b2c\u4e8c\u4e2a\u76d8\u7247\u6b63\u9762\u7684\u78c1\u5934\u79f0\u4e3a 2 \u78c1\u5934\uff0c\u80cc\u9762\u79f0\u4e3a 3 \u78c1\u5934...\u56e0\u6b64\uff0c\u76d8\u9762\u6570\u548c\u78c1\u5934\u6570\u662f\u76f8\u7b49\u7684\u3002 \u78c1\u9053\uff08track\uff09 \u6bcf\u4e2a\u76d8\u7247\u7684\u6bcf\u4e2a\u76d8\u9762\u88ab\u5212\u5206\u6210\u591a\u4e2a\u72ed\u7a84\u7684\u540c\u5fc3\u5706\u73af\uff0c\u6211\u4eec\u5c06\u8fd9\u6837\u7684\u5706\u73af\u79f0\u4e3a\u78c1\u9053(Track)\uff0c\u6bcf\u4e2a\u76d8\u9762\u53ef\u4ee5\u5212\u5206\u591a\u4e2a\u78c1\u9053\u3002\u6bcf\u4e2a\u76d8\u9762\u7684\u6700\u5916\u5708\uff0c\u79bb\u76d8\u5fc3\u6700\u8fdc\u7684\u5730\u65b9\u662f 0 \u78c1\u9053\uff0c\u5411\u76d8\u5fc3\u65b9\u5411\u4f9d\u6b21\u589e\u957f\u4e3a 1 \u78c1\u9053\uff0c2 \u78c1\u9053\uff0c3 \u78c1\u9053... \u6247\u533a\uff08sector\uff09 \u628a\u6bcf\u4e2a\u78c1\u9053\u5212\u5206\u6210\u82e5\u5e72\u5f27\u6bb5\uff0c\u6bcf\u6bb5\u79f0\u4e3a\u4e00\u4e2a\u6247\u533a(Sector),\u6247\u533a\u662f\u786c\u76d8\u4e0a\u5b58\u50a8\u7684\u7269\u7406\u5355\u4f4d\uff0c\u6247\u533a\u7684\u7f16\u53f7\u662f\u4ece 1 \u5f00\u59cb\uff0c\u800c\u4e0d\u662f 0\uff0c\u7269\u7406\u6247\u533a\u662f\u8fde\u7eed\u7684\uff0c\u4f46\u903b\u8f91\u6247\u533a\u4e0d\u4e00\u5b9a\u662f\u8fde\u7eed\u7684\u3002 \u4ea4\u53c9\u56e0\u5b50 \u4ea4\u53c9\u56e0\u5b50\u662f\u6307\u4f4e\u7ea7\u683c\u5f0f\u5316\u786c\u76d8\u65f6\u5fc5\u987b\u8bbe\u5b9a\u6247\u533a\u201c\u95f4\u9694\u56e0\u5b50\u201d\u503c\uff0c\u95f4\u9694\u56e0\u5b50\u901a\u4fd7\u7684\u8bb2\uff0c\u662f\u6307\u4f4e\u7ea7\u683c\u5f0f\u5316\u540e\uff0c\u4efb\u610f\u4e00\u4e2a\u6247\u533a\u548c\u5b83\u4e0b\u4e00\u4e2a\u6247\u533a\u76f8\u9694\u591a\u5c11\u4e2a\u7269\u7406\u6247\u533a\u5757\u3002\u95f4\u9694\u56e0\u5b50\u4e3a 1 \u65f6\uff0c\u6247\u533a\u662f\u8fde\u7eed\u7684\u3002\u95f4\u9694\u56e0\u5b50\u4e0e\u786c\u76d8\u8f6c\u901f\u3001CPU\u901f\u5ea6\u3001\u4e3b\u677f\u76f8\u5339\u914d\uff0c\u5426\u5219\u5f71\u54cd\u786c\u76d8\u6027\u80fd\u3002 \u67f1\u9762\uff08cylinder\uff09 \u4e0d\u540c\u9762\u4e0a\u76f8\u540c\u7f16\u53f7\u7684\u78c1\u9053\u7ec4\u6210\u4e86\u4e00\u4e2a\u5706\u67f1\u9762\uff0c\u5373\u6240\u79f0\u7684\u67f1\u9762(Cylinder)\uff0c\u78c1\u76d8\u7684\u67f1\u9762\u6570\u91cf\u4e0e\u4e00\u4e2a\u76d8\u9762\u4e0a\u7684\u78c1\u9053\u6570\u91cf\u662f\u76f8\u7b49\u7684\u3002 \u786c\u76d8\u63a5\u53e3 IDE\uff08Integrated Drive Electronics\uff09\u4e5f\u53eb PATA\uff08Parallel Advanced Technology Attachment\uff09 \u6807\u51c6 \u901f\u5ea6 PATA 133MB/s SCSI\uff08Small Computer System Interface\uff09 \u6807\u51c6 \u901f\u5ea6 Ultra Wide SCSI 40MB/s Ultra2 Wide SCSI 80MB/s Ultra160 SCSI 160MB/s Ultra320 SCSI 320MB/s SATA\uff08Serial Advanced Technology Attachment\uff09 \u6807\u51c6 \u901f\u5ea6 SATA 1.0 150MB/s SATA 2.0 300MB/s SATA 3.0 600MB/s SAS\uff08Serial Attached SCSI\uff09 \u4f20\u8f93\u7684\u901f\u7387\u9ad8\u8fbe3Gb/s\uff0c\u4ee5\u540e\u4f1a\u67096Gb/s\u4e43\u81f312Gb/s\u7684\u9ad8\u901f\u63a5\u53e3\u51fa\u73b0\u3002 M.2 \u6807\u51c6 \u901f\u5ea6 Socket 2\uff08B key-ngff\uff09 700MB/s Socket 3\uff08M key-nvme\uff09 4GB/s","title":"\u786c\u76d8\u7ed3\u6784"},{"location":"RH124/disk/#_1","text":"","title":"\u786c\u76d8\u7ed3\u6784"},{"location":"RH124/disk/#platter","text":"\u786c\u76d8\u4e00\u822c\u6709\u591a\u4e2a\u76d8\u7247\uff0c\u6bcf\u4e2a\u76d8\u7247\u53ef\u4ee5\u6709\u4e24\u4e2a\u9762(Side)\uff0c\u7b2c 1 \u4e2a\u76d8\u7247\u7684\u6b63\u9762\u79f0\u4e3a 0 \u9762\uff0c\u53cd\u9762\u79f0\u4e3a 1 \u9762\uff1b\u7b2c 2 \u4e2a\u76d8\u7247\u7684\u6b63\u9762\u79f0\u4e3a 2 \u9762\uff0c\u53cd\u9762\u79f0\u4e3a 3 \u9762...","title":"\u76d8\u7247\uff08platter\uff09"},{"location":"RH124/disk/#head","text":"\u6bcf\u4e2a\u76d8\u9762\u5bf9\u5e94\u4e00\u4e2a\u78c1\u5934(head)\u7528\u4e8e\u8bfb\u5199\u6570\u636e\u3002\u7b2c\u4e00\u4e2a\u76d8\u9762\u7684\u6b63\u9762\u7684\u78c1\u5934\u79f0\u4e3a 0 \u78c1\u5934\uff0c\u80cc\u9762\u79f0\u4e3a 1 \u78c1\u5934\uff1b\u7b2c\u4e8c\u4e2a\u76d8\u7247\u6b63\u9762\u7684\u78c1\u5934\u79f0\u4e3a 2 \u78c1\u5934\uff0c\u80cc\u9762\u79f0\u4e3a 3 \u78c1\u5934...\u56e0\u6b64\uff0c\u76d8\u9762\u6570\u548c\u78c1\u5934\u6570\u662f\u76f8\u7b49\u7684\u3002","title":"\u78c1\u5934\uff08head\uff09"},{"location":"RH124/disk/#track","text":"\u6bcf\u4e2a\u76d8\u7247\u7684\u6bcf\u4e2a\u76d8\u9762\u88ab\u5212\u5206\u6210\u591a\u4e2a\u72ed\u7a84\u7684\u540c\u5fc3\u5706\u73af\uff0c\u6211\u4eec\u5c06\u8fd9\u6837\u7684\u5706\u73af\u79f0\u4e3a\u78c1\u9053(Track)\uff0c\u6bcf\u4e2a\u76d8\u9762\u53ef\u4ee5\u5212\u5206\u591a\u4e2a\u78c1\u9053\u3002\u6bcf\u4e2a\u76d8\u9762\u7684\u6700\u5916\u5708\uff0c\u79bb\u76d8\u5fc3\u6700\u8fdc\u7684\u5730\u65b9\u662f 0 \u78c1\u9053\uff0c\u5411\u76d8\u5fc3\u65b9\u5411\u4f9d\u6b21\u589e\u957f\u4e3a 1 \u78c1\u9053\uff0c2 \u78c1\u9053\uff0c3 \u78c1\u9053...","title":"\u78c1\u9053\uff08track\uff09"},{"location":"RH124/disk/#sector","text":"\u628a\u6bcf\u4e2a\u78c1\u9053\u5212\u5206\u6210\u82e5\u5e72\u5f27\u6bb5\uff0c\u6bcf\u6bb5\u79f0\u4e3a\u4e00\u4e2a\u6247\u533a(Sector),\u6247\u533a\u662f\u786c\u76d8\u4e0a\u5b58\u50a8\u7684\u7269\u7406\u5355\u4f4d\uff0c\u6247\u533a\u7684\u7f16\u53f7\u662f\u4ece 1 \u5f00\u59cb\uff0c\u800c\u4e0d\u662f 0\uff0c\u7269\u7406\u6247\u533a\u662f\u8fde\u7eed\u7684\uff0c\u4f46\u903b\u8f91\u6247\u533a\u4e0d\u4e00\u5b9a\u662f\u8fde\u7eed\u7684\u3002","title":"\u6247\u533a\uff08sector\uff09"},{"location":"RH124/disk/#_2","text":"\u4ea4\u53c9\u56e0\u5b50\u662f\u6307\u4f4e\u7ea7\u683c\u5f0f\u5316\u786c\u76d8\u65f6\u5fc5\u987b\u8bbe\u5b9a\u6247\u533a\u201c\u95f4\u9694\u56e0\u5b50\u201d\u503c\uff0c\u95f4\u9694\u56e0\u5b50\u901a\u4fd7\u7684\u8bb2\uff0c\u662f\u6307\u4f4e\u7ea7\u683c\u5f0f\u5316\u540e\uff0c\u4efb\u610f\u4e00\u4e2a\u6247\u533a\u548c\u5b83\u4e0b\u4e00\u4e2a\u6247\u533a\u76f8\u9694\u591a\u5c11\u4e2a\u7269\u7406\u6247\u533a\u5757\u3002\u95f4\u9694\u56e0\u5b50\u4e3a 1 \u65f6\uff0c\u6247\u533a\u662f\u8fde\u7eed\u7684\u3002\u95f4\u9694\u56e0\u5b50\u4e0e\u786c\u76d8\u8f6c\u901f\u3001CPU\u901f\u5ea6\u3001\u4e3b\u677f\u76f8\u5339\u914d\uff0c\u5426\u5219\u5f71\u54cd\u786c\u76d8\u6027\u80fd\u3002","title":"\u4ea4\u53c9\u56e0\u5b50"},{"location":"RH124/disk/#cylinder","text":"\u4e0d\u540c\u9762\u4e0a\u76f8\u540c\u7f16\u53f7\u7684\u78c1\u9053\u7ec4\u6210\u4e86\u4e00\u4e2a\u5706\u67f1\u9762\uff0c\u5373\u6240\u79f0\u7684\u67f1\u9762(Cylinder)\uff0c\u78c1\u76d8\u7684\u67f1\u9762\u6570\u91cf\u4e0e\u4e00\u4e2a\u76d8\u9762\u4e0a\u7684\u78c1\u9053\u6570\u91cf\u662f\u76f8\u7b49\u7684\u3002","title":"\u67f1\u9762\uff08cylinder\uff09"},{"location":"RH124/disk/#_3","text":"IDE\uff08Integrated Drive Electronics\uff09\u4e5f\u53eb PATA\uff08Parallel Advanced Technology Attachment\uff09 \u6807\u51c6 \u901f\u5ea6 PATA 133MB/s SCSI\uff08Small Computer System Interface\uff09 \u6807\u51c6 \u901f\u5ea6 Ultra Wide SCSI 40MB/s Ultra2 Wide SCSI 80MB/s Ultra160 SCSI 160MB/s Ultra320 SCSI 320MB/s SATA\uff08Serial Advanced Technology Attachment\uff09 \u6807\u51c6 \u901f\u5ea6 SATA 1.0 150MB/s SATA 2.0 300MB/s SATA 3.0 600MB/s SAS\uff08Serial Attached SCSI\uff09 \u4f20\u8f93\u7684\u901f\u7387\u9ad8\u8fbe3Gb/s\uff0c\u4ee5\u540e\u4f1a\u67096Gb/s\u4e43\u81f312Gb/s\u7684\u9ad8\u901f\u63a5\u53e3\u51fa\u73b0\u3002 M.2 \u6807\u51c6 \u901f\u5ea6 Socket 2\uff08B key-ngff\uff09 700MB/s Socket 3\uff08M key-nvme\uff09 4GB/s","title":"\u786c\u76d8\u63a5\u53e3"},{"location":"RH124/ps_kill/","text":"\u7ec3\u4e60 16\uff1a\u5904\u7406\u8fdb\u7a0b\uff0c ps \uff0c kill \u539f\u6587\uff1a Exercise 16. Processes: working with proccesses, ps, kill \u8bd1\u8005\uff1a \u98de\u9f99 \u534f\u8bae\uff1a CC BY-NC-SA 4.0 \u81ea\u8c6a\u5730\u91c7\u7528 \u8c37\u6b4c\u7ffb\u8bd1 \u6700\u7b80\u5355\u7684\u7a0b\u5e8f\u662f\u786c\u76d8\u4e0a\u7684\u6587\u4ef6\uff0c\u5b83\u5305\u542b\u4e2d\u592e\u5904\u7406\u5668\u6267\u884c\u7684\u6307\u4ee4\u3002\u5f53\u4f60\u542f\u52a8\u5b83\u7684\u65f6\u5019\uff0c\u5b83\u88ab\u590d\u5236\u5230\u5185\u5b58\uff0c\u63a7\u5236\u6743\u4f20\u9012\u7ed9\u5b83\u3002\u88ab\u6267\u884c\u7684\u7a0b\u5e8f\u79f0\u4e3a\u8fdb\u7a0b\u3002\u5728\u4f8b\u5982 Linux \u7684\u591a\u4efb\u52a1\u64cd\u4f5c\u7cfb\u7edf\u4e2d\uff0c\u4f60\u53ef\u4ee5\u542f\u52a8\u7a0b\u5e8f\u7684\u8bb8\u591a\u5b9e\u4f8b\uff0c\u56e0\u6b64\u53ef\u4ee5\u4ece\u4e00\u4e2a\u7a0b\u5e8f\u542f\u52a8\u8bb8\u591a\u8fdb\u7a0b\uff0c\u6240\u6709\u7a0b\u5e8f\u5c06\u540c\u65f6\u8fd0\u884c\uff08\u6267\u884c\uff09\u3002 \u8fd9\u662f\u6267\u884c ls \u65f6\u53d1\u751f\u7684\u4e8b\u60c5\u7684\u6982\u8ff0\uff1a \u4f60 \u628a ls \u548c\u5b83\u7684\u53c2\u6570\u8f93\u5165\u5230\u4f60\u7684\u7ec8\u7aef\u6a21\u62df\u5668\uff0c\u7136\u540e\u6309 <ENTER> \u63a7\u5236\u6743\u73b0\u5728\u4f20\u9012\u7ed9 Bash Bash \u5728\u4f60\u7684\u786c\u76d8\u4e0a\u67e5\u627e ls \u5c06\u81ea\u8eab\u6d3e\u751f\u5230 Bash \u514b\u9686\u4f53\uff0c\u4e5f\u5c31\u662f\u5c06\u81ea\u5df1\u514b\u9686\u5230\u5185\u5b58\u4e2d\u7684\u65b0\u4f4d\u7f6e \u6210\u4e3a Bash \u514b\u9686\u4f53\u7684\u7236\u8fdb\u7a0b \u63a7\u5236\u6743\u4f20\u7ed9\u4e86\u4f20\u9012\u7ed9 Bash \u514b\u9686\u4f53 Bash \u514b\u9686\u4f53 \u6210\u4e3a Bash \u7684\u5b50\u8fdb\u7a0b \u4fdd\u5b58 Bash \u7236\u8fdb\u7a0b\u7684\u73af\u5883 \u77e5\u9053\u5b83\u662f\u4e00\u4e2a\u514b\u9686\u4f53\u5e76\u4e14\u505a\u51fa\u76f8\u5e94\u7684\u53cd\u5e94 \u4f7f\u7528 ls \u8986\u76d6\u81ea\u8eab \u63a7\u5236\u6743\u73b0\u5728\u4f20\u9012\u7ed9 ls ls \u4e3a\u4f60\u6253\u5370\u4e00\u4e2a\u76ee\u5f55\u5217\u8868\u6216\u8fd4\u56de\u9519\u8bef \u8fd4\u56de\u9000\u51fa\u4ee3\u7801 \u63a7\u5236\u6743\u73b0\u5728\u4f20\u9012\u7ed9 Bash Bash \u5c06 ls \u9000\u51fa\u4ee3\u7801\u8d4b\u7ed9 ? \u53d8\u91cf \u7b49\u5f85\u4f60\u7684\u8f93\u5165 \u4f60 \u53ef\u4ee5\u518d\u6b21\u8f93\u5165\u5185\u5bb9 \u4e00\u4e9b\u8fdb\u7a0b\u4e0d\u50cf ls \u90a3\u6837\u4ea4\u4e92\uff0c\u53ea\u662f\u5728\u540e\u53f0\u9759\u9759\u5730\u5de5\u4f5c\uff0c\u5c31\u50cf ssh \u4e00\u6837\u3002\u8fdb\u7a0b\u6709\u8bb8\u591a\u53ef\u80fd\u7684\u72b6\u6001\uff0c\u5e76\u4e14\u6709\u8bb8\u591a\u64cd\u4f5c\uff0c\u4f60\u53ef\u4ee5\u901a\u8fc7\u4fe1\u53f7\u673a\u5236\u5bf9\u5b83\u4eec\u6267\u884c\u3002 \u9996\u5148\u8ba9\u6211\u4eec\u8c08\u8bba\u72b6\u6001\u3002\u5982\u679c\u4f60\u952e\u5165 ps ax --forest \uff0c\u5b83\u5c06\u6253\u5370\u51fa\u6240\u6709\u8fdb\u7a0b\uff0c\u4f60\u4f1a\u5f97\u5230\u8fd9\u6837\u7684\u4e1c\u897f\uff08\u8df3\u8fc7\u4e00\u4e9b\u4e0e\u786c\u4ef6\u6709\u5173\u7684\u8fdb\u7a0b\uff09\uff1a user1@vm1:/etc$ ps --forest ax PID TTY STAT TIME COMMAND 1 ? Ss 0:16 init [2] 297 ? S<s 0:00 udevd --daemon 392 ? S< 0:00 \\_ udevd --daemon 399 ? S< 0:00 \\_ udevd --daemon 691 ? Ss 0:00 /sbin/portmap 703 ? Ss 0:00 /sbin/rpc.statd 862 ? Sl 0:00 /usr/sbin/rsyslogd -c4 886 ? Ss 0:00 /usr/sbin/atd 971 ? Ss 0:00 /usr/sbin/acpid 978 ? Ss 0:01 /usr/sbin/cron 1177 ? Ss 0:00 /usr/sbin/sshd 6671 ? Ss 0:00 \\_ sshd: user1 [priv] 6675 ? S 0:00 \\_ sshd: user1@pts/0 6676 pts/0 Ss 0:00 \\_ -bash 7932 pts/0 R+ 0:00 \\_ ps --forest ax 1191 ? Ss 0:00 /usr/sbin/exim4 -bd -q30m 1210 tty2 Ss+ 0:00 /sbin/getty 38400 tty2 1211 tty3 Ss+ 0:00 /sbin/getty 38400 tty3 1212 tty4 Ss+ 0:00 /sbin/getty 38400 tty4 1213 tty5 Ss+ 0:00 /sbin/getty 38400 tty5 1214 tty6 Ss+ 0:00 /sbin/getty 38400 tty6 6216 tty1 Ss+ 0:00 /sbin/getty 38400 tty1 \u8ba9\u6211\u4eec\u6d4f\u89c8\u8fd9\u4e2a\u5217\u8868\uff1a PID - \u8fdb\u7a0b ID\u3002\u6bcf\u4e2a\u8fdb\u7a0b\u90fd\u6709\u4e0e\u4e4b\u76f8\u5173\u8054\u7684\u552f\u4e00\u7f16\u53f7\uff0c\u7528\u4e8e\u552f\u4e00\u6807\u8bc6\u5b83\u3002\u8fd9\u610f\u5473\u7740\u6ca1\u6709\u4e24\u4e2a\u8fdb\u7a0b\u53ef\u4ee5\u62e5\u6709\u76f8\u540c\u7684 PID\u3002 TTY - \u4e0e\u8fdb\u7a0b\u76f8\u5173\u8054\u7684\u7535\u4f20\u6a21\u62df\u5668\uff0c\u5141\u8bb8\u8fdb\u7a0b\u4e0e\u4f60\u4ea4\u6362\u4fe1\u606f\u3002 STAT - \u5f53\u524d\u8fdb\u7a0b\u72b6\u6001\u3002\u8fd9\u5c06\u5728\u4e0b\u9762\u8be6\u7ec6\u63cf\u8ff0\u3002 TIME - \u8fd9\u662f\u5728 CPU \u4e0a\u6267\u884c\u6b64\u8fdb\u7a0b\u7684\u65f6\u95f4\uff08\u4ee5\u5206\u949f\u4e3a\u5355\u4f4d\uff09\u3002 COMMAND - \u8fd9\u662f\u5e26\u6709\u53c2\u6570\u7684\u7a0b\u5e8f\u540d\u79f0\u3002\u8bf7\u6ce8\u610f /usr/sbin/sshd \u662f sshd: user1 \u7684\u7236\u8fdb\u7a0b\uff0c\u800c sshd: user1 \u53c8\u662f sshd: user1@pts/0 \u7684\u7236\u8fdb\u7a0b\uff0c\u800c sshd: user1@pts/0 \u53c8\u662f bash \u7684\u7236\u8fdb\u7a0b\uff0c\u800c bash \u53c8\u662f ps \u2013forest ax \u7684\u7236\u8fdb\u7a0b\u3002\u4f60\u9700\u8981\u66f4\u6df1\u5165\u4e00\u4e9b\uff01 \u73b0\u5728\u8ba9\u6211\u4eec\u8ba8\u8bba\u53ef\u80fd\u7684\u8fdb\u7a0b\u72b6\u6001\u3002\u4f60\u53ef\u4ee5\u53c2\u8003 man ps \u7684 PROCESS STATE CODES\u3002 \u72b6\u6001 \u63cf\u8ff0 D \u4e0d\u4e2d\u65ad\u7761\u7720\uff08\u901a\u5e38\u4e3a IO\uff09\u3002\u8fdb\u7a0b\u7e41\u5fd9\u6216\u6302\u8d77\uff0c\u4e0d\u54cd\u5e94\u4fe1\u53f7\uff0c\u4f8b\u5982\u786c\u76d8\u5df2\u7ecf\u5d29\u6e83\uff0c\u8bfb\u64cd\u4f5c\u65e0\u6cd5\u5b8c\u6210\u3002 R \u8fd0\u884c\u6216\u53ef\u8fd0\u884c\uff08\u5728\u8fd0\u884c\u961f\u5217\u4e2d\uff09\u3002\u8fdb\u7a0b\u6b63\u5728\u6267\u884c\u4e2d\u3002 S \u4e2d\u65ad\u7761\u7720\uff08\u7b49\u5f85\u4e8b\u4ef6\u5b8c\u6210\uff09\u3002\u4f8b\u5982\uff0c\u7ec8\u7aef\u8fdb\u7a0b\u548c Bash \u901a\u5e38\u5904\u4e8e\u6b64\u72b6\u6001\uff0c\u7b49\u5f85\u4f60\u952e\u5165\u67d0\u4e9b\u5185\u5bb9\u3002 T \u505c\u6b62\uff0c\u7531\u4efb\u52a1\u63a7\u5236\u4fe1\u53f7\u6216\u7531\u4e8e\u88ab\u8ffd\u8e2a\u3002 W \u5206\u9875\uff08\u4ece 2.6.xx \u5185\u6838\u8d77\u65e0\u6548\uff0c\u6240\u4ee5\u4e0d\u7528\u62c5\u5fc3\uff09\u3002 X \u6b7b\u4ea1\uff08\u4e0d\u5e94\u8be5\u770b\u5230\uff09\u3002 Z \u5df2\u505c\u6b62\uff08\u201c\u50f5\u5c38\u201d\uff09\u8fdb\u7a0b\uff0c\u5df2\u7ec8\u6b62\uff0c\u4f46\u672a\u88ab\u7236\u9879\u6536\u56de\u3002\u8fd9\u79cd\u60c5\u51b5\u53d1\u751f\u5728\u9519\u8bef\u7ec8\u6b62\u7684\u8fdb\u7a0b\u4e0a\u3002 < \u9ad8\u4f18\u5148\u7ea7\uff08\u5bf9\u5176\u4ed6\u7528\u6237\u4e0d\u597d\uff09 N \u4f4e\u4f18\u5148\u7ea7\uff08\u5bf9\u5176\u4ed6\u7528\u6237\u5f88\u597d\uff09 L \u5c06\u9875\u9762\u9501\u5b9a\u5230\u5185\u5b58\u4e2d\uff08\u7528\u4e8e\u5b9e\u65f6\u548c\u81ea\u5b9a\u4e49 IO\uff09 s \u662f\u4f1a\u8bdd\u9886\u5bfc\u3002Linux \u4e2d\u7684\u76f8\u5173\u8fdb\u7a0b\u88ab\u89c6\u4e3a\u4e00\u4e2a\u5355\u5143\uff0c\u5e76\u5177\u6709\u5171\u4eab\u4f1a\u8bdd ID\uff08SID\uff09\u3002\u5982\u679c\u8fdb\u7a0b ID\uff08PID\uff09= \u4f1a\u8bdd ID\uff08SID\uff09\uff0c\u5219\u6b64\u8fdb\u7a0b\u5c06\u662f\u4f1a\u8bdd\u9886\u5bfc\u3002 L \u662f\u591a\u7ebf\u7a0b\u7684\uff08\u4f7f\u7528 CLONE_THREAD\uff0c\u4f8b\u5982 NPTL pthreads\uff09 + \u4f4d\u4e8e\u524d\u53f0\u8fdb\u7a0b\u7ec4\u3002\u8fd9\u6837\u7684\u5904\u7406\u5668\u5141\u8bb8\u8f93\u5165\u548c\u8f93\u51fa\u5230\u7535\u4f20\u6a21\u62df\u5668\uff0ctty\u3002 \u73b0\u5728\u8ba9\u6211\u4eec\u8ba8\u8bba\uff0c\u4e0e\u6240\u6709\u8fd9\u4e9b\u8fdb\u7a0b\u6c9f\u901a\u7684\u65b9\u5f0f\u3002\u4f60\u53ef\u4ee5\u901a\u8fc7\u53d1\u9001\u4fe1\u53f7\u6765\u5b9e\u73b0\u5b83\u3002\u4fe1\u53f7\u53ef\u80fd\u662f\u4e00\u79cd\u97ad\u7b56\u8fdb\u7a0b\u65b9\u5f0f\uff0c\u6240\u4ee5\u8fdb\u7a0b\u4f1a\u542c\u4f60\u7684\u8bdd\uff0c\u5e76\u505a\u51fa\u4f60\u60f3\u8981\u7684\u884c\u4e3a\u3002\u8fd9\u662f\u53ef\u80fd\u7684\u8fdb\u7a0b\u7684\u7f29\u7565\u5217\u8868\uff0c\u6211\u4ece man kill \u7684 SIGNALS \u90e8\u5206\u83b7\u5f97\uff1a \u4fe1\u53f7 \u7f16\u53f7 \u884c\u4e3a \u63cf\u8ff0 0 0 N/A \u9000\u51fa\u4ee3\u7801\u8868\u793a\u662f\u5426\u53ef\u4ee5\u53d1\u9001\u4fe1\u53f7 HUP 1 \u9000\u51fa \u63a7\u5236\u7ec8\u7aef\u6302\u8d77\u6216\u7236\u8fdb\u7a0b\u6b7b\u4ea1 INT 2 \u9000\u51fa \u6765\u81ea\u952e\u76d8\u7684\u4e2d\u65ad QUIT 3 \u5185\u6838 \u6765\u81ea\u952e\u76d8\u7684\u9000\u51fa ILL 4 \u5185\u6838 \u975e\u6cd5\u6307\u4ee4 TRAP 5 \u5185\u6838 \u8ddf\u8e2a/\u65ad\u70b9\u6355\u83b7 ABRT 6 \u5185\u6838 \u6765\u81ea abort(3) \u7684\u4e2d\u6b62\u4fe1\u53f7 FPE 8 \u5185\u6838 \u6d6e\u70b9\u5f02\u5e38 KILL 9 \u9000\u51fa \u4e0d\u53ef\u6355\u83b7\uff0c\u4e0d\u53ef\u5ffd\u89c6\u7684\u6740\u6b7b SEGV 11 \u5185\u6838 \u5185\u5b58\u5f15\u7528\u65e0\u6548 PIPE 13 \u9000\u51fa \u635f\u574f\u7684\u7ba1\u9053\uff1a\u5199\u5165\u6ca1\u6709\u8bfb\u8005\u7684\u7ba1\u9053 ALRM 14 \u9000\u51fa \u6765\u81ea alarm(2) \u7684\u5b9a\u65f6\u5668\u4fe1\u53f7 TERM 15 \u9000\u51fa \u7ec8\u6b62\u8fdb\u7a0b \u540c\u6837\uff0c\u4e0d\u8981\u56e0\u4e3a\u4e0d\u7406\u89e3\u800c\u5bb3\u6015\uff0c\u56e0\u4e3a\u73b0\u5728\u4f60\u53ea\u9700\u8981\u4e86\u89e3 HUP \uff0c TERM \u548c KILL \u3002\u751a\u81f3\u6709\u4e00\u9996\u5173\u4e8e KILL \u4fe1\u53f7\u7684\u6b4c\u66f2 \uff0c\u547d\u540d\u4e3a \u300aKill dash nine\u300b \u3002\u53e6\u5916\uff0c\u6ce8\u610f\u5230 abort(3) \u548c alarm(2) \u4e86\u4e48\uff1f\u8fd9\u610f\u5473\u7740\u4f60\u53ef\u4ee5\u901a\u8fc7\u952e\u5165 man 3 abort \u548c man 2 alarm \u6765\u9605\u8bfb\u76f8\u5e94\u7684\u624b\u518c\u9875\u3002 \u73b0\u5728\uff0c\u4f60\u5c06\u5b66\u4e60\u5982\u4f55\u5217\u51fa\u6b63\u5728\u8fd0\u884c\u7684\u8fdb\u7a0b\u5e76\u5411\u5176\u53d1\u9001\u4fe1\u53f7\u3002 \u8fd9\u6837\u505a 1: ps x 2: ps a 3: ps ax 4: ps axue --forest 5: dd if=/dev/zero of=~/test.img bs=1 count=$((1024*1024*1024)) & 6: kill -s USR1 $! 7: <ENTER> 8: kill -s USR1 $! 9: <ENTER> 10: kill -s TERM $! 11: <ENTER> \u4f60\u4f1a\u770b\u5230\u4ec0\u4e48 user1@vm1:/etc$ ps x PID TTY STAT TIME COMMAND 6675 ? S 0:00 sshd: user1@pts/0 6676 pts/0 Ss 0:00 -bash 8193 pts/0 R+ 0:00 ps x user1@vm1:/etc$ ps a PID TTY STAT TIME COMMAND 1210 tty2 Ss+ 0:00 /sbin/getty 38400 tty2 1211 tty3 Ss+ 0:00 /sbin/getty 38400 tty3 1212 tty4 Ss+ 0:00 /sbin/getty 38400 tty4 1213 tty5 Ss+ 0:00 /sbin/getty 38400 tty5 1214 tty6 Ss+ 0:00 /sbin/getty 38400 tty6 6216 tty1 Ss+ 0:00 /sbin/getty 38400 tty1 6676 pts/0 Ss 0:00 -bash 8194 pts/0 R+ 0:00 ps a user1@vm1:/etc$ ps ax PID TTY STAT TIME COMMAND 1 ? Ss 0:16 init [2] --- skipped --- skipped --- skipped --- 691 ? Ss 0:00 /sbin/portmap 703 ? Ss 0:00 /sbin/rpc.statd 862 ? Sl 0:00 /usr/sbin/rsyslogd -c4 886 ? Ss 0:00 /usr/sbin/atd 971 ? Ss 0:00 /usr/sbin/acpid 978 ? Ss 0:01 /usr/sbin/cron 1177 ? Ss 0:00 /usr/sbin/sshd 1191 ? Ss 0:00 /usr/sbin/exim4 -bd -q30m 1210 tty2 Ss+ 0:00 /sbin/getty 38400 tty2 1211 tty3 Ss+ 0:00 /sbin/getty 38400 tty3 1212 tty4 Ss+ 0:00 /sbin/getty 38400 tty4 1213 tty5 Ss+ 0:00 /sbin/getty 38400 tty5 1214 tty6 Ss+ 0:00 /sbin/getty 38400 tty6 6216 tty1 Ss+ 0:00 /sbin/getty 38400 tty1 6671 ? Ss 0:00 sshd: user1 [priv] 6675 ? S 0:00 sshd: user1@pts/0 6676 pts/0 Ss 0:00 -bash 8198 pts/0 R+ 0:00 ps ax user1@vm1:/etc$ ps axue --forest USER PID %CPU %MEM VSZ RSS TTY STAT START TIME COMMAND --- skipped --- skipped --- skipped --- root 1 0.0 0.0 8356 820 ? Ss Jun06 0:16 init [2] root 297 0.0 0.0 16976 1000 ? S<s Jun06 0:00 udevd --daemon root 392 0.0 0.0 16872 840 ? S< Jun06 0:00 \\_ udevd --daemon root 399 0.0 0.0 16872 836 ? S< Jun06 0:00 \\_ udevd --daemon daemon 691 0.0 0.0 8096 532 ? Ss Jun06 0:00 /sbin/portmap statd 703 0.0 0.0 14384 868 ? Ss Jun06 0:00 /sbin/rpc.statd root 862 0.0 0.1 54296 1664 ? Sl Jun06 0:00 /usr/sbin/rsyslogd -c4 daemon 886 0.0 0.0 18716 436 ? Ss Jun06 0:00 /usr/sbin/atd root 971 0.0 0.0 3920 644 ? Ss Jun06 0:00 /usr/sbin/acpid root 978 0.0 0.0 22400 880 ? Ss Jun06 0:01 /usr/sbin/cron root 1177 0.0 0.1 49176 1136 ? Ss Jun06 0:00 /usr/sbin/sshd root 6671 0.0 0.3 70496 3284 ? Ss Jun26 0:00 \\_ sshd: user1 [priv] user1 6675 0.0 0.1 70496 1584 ? S Jun26 0:00 \\_ sshd: user1@pts/0 user1 6676 0.0 0.6 23644 6536 pts/0 Ss Jun26 0:00 \\_ -bash LANG=en_US.UTF-8 USER=user1 LOGNAME=user1 HOM user1 8199 0.0 0.1 16312 1088 pts/0 R+ 17:07 0:00 \\_ ps axue --forest TERM=screen-bce SHELL=/bin/bas 101 1191 0.0 0.1 44148 1076 ? Ss Jun06 0:00 /usr/sbin/exim4 -bd -q30m root 1210 0.0 0.0 5932 616 tty2 Ss+ Jun06 0:00 /sbin/getty 38400 tty2 root 1211 0.0 0.0 5932 612 tty3 Ss+ Jun06 0:00 /sbin/getty 38400 tty3 root 1212 0.0 0.0 5932 612 tty4 Ss+ Jun06 0:00 /sbin/getty 38400 tty4 root 1213 0.0 0.0 5932 612 tty5 Ss+ Jun06 0:00 /sbin/getty 38400 tty5 root 1214 0.0 0.0 5932 616 tty6 Ss+ Jun06 0:00 /sbin/getty 38400 tty6 root 6216 0.0 0.0 5932 612 tty1 Ss+ Jun14 0:00 /sbin/getty 38400 tty1 user1@vm1:/etc$ dd if=/dev/zero of=~/test.img bs=1 count=$((1024*1024*1024)) & [1] 8200 user1@vm1:/etc$ kill -s USR1 $! user1@vm1:/etc$ 1455424+0 records in 1455424+0 records out 1455424 bytes (1.5 MB) copied, 1.76646 s, 824 kB/s user1@vm1:/etc$ kill -s USR1 $! user1@vm1:/etc$ 3263060+0 records in 3263060+0 records out 3263060 bytes (3.3 MB) copied, 3.94237 s, 828 kB/s user1@vm1:/etc$ kill -s TERM $! user1@vm1:/etc$ [1]+ Terminated dd if=/dev/zero of=~/test.img bs=1 count=$((1024*1024*1024)) user1@vm1:/etc$ \u89e3\u91ca \u6253\u5370\u4f60\u62e5\u6709\uff08\u542f\u52a8\uff09\u7684\u8fdb\u7a0b\u3002 \u4ec5\u6253\u5370\u4e0e\u7ec8\u7aef\uff08 tty \uff09\u76f8\u5173\u7684\u8fdb\u7a0b\u548c\u4f60\u62e5\u6709\uff08\u542f\u52a8\uff09\u7684\u8fdb\u7a0b\u3002 \u6253\u5370\u6240\u6709\u6b63\u5728\u8fd0\u884c\u7684\u8fdb\u7a0b\u3002 \u4ee5\u6811\u5f62\u5f0f\u6253\u5370\u6240\u6709\u6b63\u5728\u8fd0\u884c\u7684\u8fdb\u7a0b\uff0c\u5e76\u5305\u542b\u9644\u52a0\u4fe1\u606f\uff0c\u4f8b\u5982\u53ef\u7528\u7684\u76f8\u5173\u7528\u6237\u540d\u548c\u73af\u5883\u3002\u8bf7\u6ce8\u610f\uff0c\u6b64\u4fe1\u606f\u4ec5\u9002\u7528\u4e8e\u4f60\u62e5\u6709\uff08\u542f\u52a8\uff09\u7684\u8fdb\u7a0b\u3002\u4e3a\u4e86\u67e5\u770b\u6240\u6709\u8fdb\u7a0b\u7684\u73af\u5883\u4fe1\u606f\uff0c\u8bf7\u8f93\u5165 sudo ps axue --forest \u3002 \u5f00\u59cb\u521b\u5efa\u4e00\u4e2a\u96f6\u586b\u5145\u6587\u4ef6\uff08\u586b\u5145\u4e3a\u7a7a\u5b57\u7b26\uff0c\u73b0\u5728\u4e0d\u8981\u7ea0\u7ed3\uff09\uff0c\u5e76\u901a\u8fc7\u5728\u672b\u5c3e\u6307\u5b9a & \u53d1\u9001\u5230\u540e\u53f0\u3002 \u67e5\u8be2 dd \u7684\u72b6\u6001\u3002 \u56e0\u4e3a bash \u53ea\u80fd\u6253\u5370\u4e00\u4e9b\u4e1c\u897f\u6765\u56de\u5e94\u4f60\u7684\u8f93\u5165\uff0c\u4f60\u9700\u8981\u6309 <ENTER> \uff08\u53d1\u51fa\u7a7a\u6307\u4ee4\uff09\u3002 \u518d\u6b21\u67e5\u8be2 dd \u7684\u72b6\u6001\u3002 \u540c\u6837\uff0c\u4f60\u9700\u8981\u6309 <ENTER> \u6765\u67e5\u770b\u8f93\u51fa\u3002 \u5411 dd \u53d1\u9001\u7ec8\u6b62\u4fe1\u53f7\uff0c\u6240\u4ee5 dd \u9000\u51fa\u4e86\u3002 \u4e3a\u4e86\u770b\u5230\u5b83\u786e\u5b9e\u53d1\u751f\u4e86\uff0c\u4f60\u9700\u8981\u518d\u6b21\u6309 <ENTER> \u952e \u3002 \u9644\u52a0\u9898 \u9605\u8bfb man ps \uff0c man kill \u3002 \u9605\u8bfb \u8fdb\u7a0b\u7684\u751f\u547d\u5468\u671f \uff0c\u5e76\u7814\u7a76\u8fd9\u5f20\u56fe\u7247\uff1a \u8fdb\u7a0b\u7684\u5de5\u4f5c\u6d41 \u3002 \u6253\u5370\u5e76\u586b\u5199 \u4fe1\u53f7\u8868 \u3002\u4f60\u53ef\u4ee5\u4f7f\u7528 kernel.org \u4e2d\u7684\u6587\u6863 \u3002","title":"\u7ec3\u4e60 16\uff1a\u5904\u7406\u8fdb\u7a0b\uff0c`ps`\uff0c`kill`"},{"location":"RH124/ps_kill/#16pskill","text":"\u539f\u6587\uff1a Exercise 16. Processes: working with proccesses, ps, kill \u8bd1\u8005\uff1a \u98de\u9f99 \u534f\u8bae\uff1a CC BY-NC-SA 4.0 \u81ea\u8c6a\u5730\u91c7\u7528 \u8c37\u6b4c\u7ffb\u8bd1 \u6700\u7b80\u5355\u7684\u7a0b\u5e8f\u662f\u786c\u76d8\u4e0a\u7684\u6587\u4ef6\uff0c\u5b83\u5305\u542b\u4e2d\u592e\u5904\u7406\u5668\u6267\u884c\u7684\u6307\u4ee4\u3002\u5f53\u4f60\u542f\u52a8\u5b83\u7684\u65f6\u5019\uff0c\u5b83\u88ab\u590d\u5236\u5230\u5185\u5b58\uff0c\u63a7\u5236\u6743\u4f20\u9012\u7ed9\u5b83\u3002\u88ab\u6267\u884c\u7684\u7a0b\u5e8f\u79f0\u4e3a\u8fdb\u7a0b\u3002\u5728\u4f8b\u5982 Linux \u7684\u591a\u4efb\u52a1\u64cd\u4f5c\u7cfb\u7edf\u4e2d\uff0c\u4f60\u53ef\u4ee5\u542f\u52a8\u7a0b\u5e8f\u7684\u8bb8\u591a\u5b9e\u4f8b\uff0c\u56e0\u6b64\u53ef\u4ee5\u4ece\u4e00\u4e2a\u7a0b\u5e8f\u542f\u52a8\u8bb8\u591a\u8fdb\u7a0b\uff0c\u6240\u6709\u7a0b\u5e8f\u5c06\u540c\u65f6\u8fd0\u884c\uff08\u6267\u884c\uff09\u3002 \u8fd9\u662f\u6267\u884c ls \u65f6\u53d1\u751f\u7684\u4e8b\u60c5\u7684\u6982\u8ff0\uff1a \u4f60 \u628a ls \u548c\u5b83\u7684\u53c2\u6570\u8f93\u5165\u5230\u4f60\u7684\u7ec8\u7aef\u6a21\u62df\u5668\uff0c\u7136\u540e\u6309 <ENTER> \u63a7\u5236\u6743\u73b0\u5728\u4f20\u9012\u7ed9 Bash Bash \u5728\u4f60\u7684\u786c\u76d8\u4e0a\u67e5\u627e ls \u5c06\u81ea\u8eab\u6d3e\u751f\u5230 Bash \u514b\u9686\u4f53\uff0c\u4e5f\u5c31\u662f\u5c06\u81ea\u5df1\u514b\u9686\u5230\u5185\u5b58\u4e2d\u7684\u65b0\u4f4d\u7f6e \u6210\u4e3a Bash \u514b\u9686\u4f53\u7684\u7236\u8fdb\u7a0b \u63a7\u5236\u6743\u4f20\u7ed9\u4e86\u4f20\u9012\u7ed9 Bash \u514b\u9686\u4f53 Bash \u514b\u9686\u4f53 \u6210\u4e3a Bash \u7684\u5b50\u8fdb\u7a0b \u4fdd\u5b58 Bash \u7236\u8fdb\u7a0b\u7684\u73af\u5883 \u77e5\u9053\u5b83\u662f\u4e00\u4e2a\u514b\u9686\u4f53\u5e76\u4e14\u505a\u51fa\u76f8\u5e94\u7684\u53cd\u5e94 \u4f7f\u7528 ls \u8986\u76d6\u81ea\u8eab \u63a7\u5236\u6743\u73b0\u5728\u4f20\u9012\u7ed9 ls ls \u4e3a\u4f60\u6253\u5370\u4e00\u4e2a\u76ee\u5f55\u5217\u8868\u6216\u8fd4\u56de\u9519\u8bef \u8fd4\u56de\u9000\u51fa\u4ee3\u7801 \u63a7\u5236\u6743\u73b0\u5728\u4f20\u9012\u7ed9 Bash Bash \u5c06 ls \u9000\u51fa\u4ee3\u7801\u8d4b\u7ed9 ? \u53d8\u91cf \u7b49\u5f85\u4f60\u7684\u8f93\u5165 \u4f60 \u53ef\u4ee5\u518d\u6b21\u8f93\u5165\u5185\u5bb9 \u4e00\u4e9b\u8fdb\u7a0b\u4e0d\u50cf ls \u90a3\u6837\u4ea4\u4e92\uff0c\u53ea\u662f\u5728\u540e\u53f0\u9759\u9759\u5730\u5de5\u4f5c\uff0c\u5c31\u50cf ssh \u4e00\u6837\u3002\u8fdb\u7a0b\u6709\u8bb8\u591a\u53ef\u80fd\u7684\u72b6\u6001\uff0c\u5e76\u4e14\u6709\u8bb8\u591a\u64cd\u4f5c\uff0c\u4f60\u53ef\u4ee5\u901a\u8fc7\u4fe1\u53f7\u673a\u5236\u5bf9\u5b83\u4eec\u6267\u884c\u3002 \u9996\u5148\u8ba9\u6211\u4eec\u8c08\u8bba\u72b6\u6001\u3002\u5982\u679c\u4f60\u952e\u5165 ps ax --forest \uff0c\u5b83\u5c06\u6253\u5370\u51fa\u6240\u6709\u8fdb\u7a0b\uff0c\u4f60\u4f1a\u5f97\u5230\u8fd9\u6837\u7684\u4e1c\u897f\uff08\u8df3\u8fc7\u4e00\u4e9b\u4e0e\u786c\u4ef6\u6709\u5173\u7684\u8fdb\u7a0b\uff09\uff1a user1@vm1:/etc$ ps --forest ax PID TTY STAT TIME COMMAND 1 ? Ss 0:16 init [2] 297 ? S<s 0:00 udevd --daemon 392 ? S< 0:00 \\_ udevd --daemon 399 ? S< 0:00 \\_ udevd --daemon 691 ? Ss 0:00 /sbin/portmap 703 ? Ss 0:00 /sbin/rpc.statd 862 ? Sl 0:00 /usr/sbin/rsyslogd -c4 886 ? Ss 0:00 /usr/sbin/atd 971 ? Ss 0:00 /usr/sbin/acpid 978 ? Ss 0:01 /usr/sbin/cron 1177 ? Ss 0:00 /usr/sbin/sshd 6671 ? Ss 0:00 \\_ sshd: user1 [priv] 6675 ? S 0:00 \\_ sshd: user1@pts/0 6676 pts/0 Ss 0:00 \\_ -bash 7932 pts/0 R+ 0:00 \\_ ps --forest ax 1191 ? Ss 0:00 /usr/sbin/exim4 -bd -q30m 1210 tty2 Ss+ 0:00 /sbin/getty 38400 tty2 1211 tty3 Ss+ 0:00 /sbin/getty 38400 tty3 1212 tty4 Ss+ 0:00 /sbin/getty 38400 tty4 1213 tty5 Ss+ 0:00 /sbin/getty 38400 tty5 1214 tty6 Ss+ 0:00 /sbin/getty 38400 tty6 6216 tty1 Ss+ 0:00 /sbin/getty 38400 tty1 \u8ba9\u6211\u4eec\u6d4f\u89c8\u8fd9\u4e2a\u5217\u8868\uff1a PID - \u8fdb\u7a0b ID\u3002\u6bcf\u4e2a\u8fdb\u7a0b\u90fd\u6709\u4e0e\u4e4b\u76f8\u5173\u8054\u7684\u552f\u4e00\u7f16\u53f7\uff0c\u7528\u4e8e\u552f\u4e00\u6807\u8bc6\u5b83\u3002\u8fd9\u610f\u5473\u7740\u6ca1\u6709\u4e24\u4e2a\u8fdb\u7a0b\u53ef\u4ee5\u62e5\u6709\u76f8\u540c\u7684 PID\u3002 TTY - \u4e0e\u8fdb\u7a0b\u76f8\u5173\u8054\u7684\u7535\u4f20\u6a21\u62df\u5668\uff0c\u5141\u8bb8\u8fdb\u7a0b\u4e0e\u4f60\u4ea4\u6362\u4fe1\u606f\u3002 STAT - \u5f53\u524d\u8fdb\u7a0b\u72b6\u6001\u3002\u8fd9\u5c06\u5728\u4e0b\u9762\u8be6\u7ec6\u63cf\u8ff0\u3002 TIME - \u8fd9\u662f\u5728 CPU \u4e0a\u6267\u884c\u6b64\u8fdb\u7a0b\u7684\u65f6\u95f4\uff08\u4ee5\u5206\u949f\u4e3a\u5355\u4f4d\uff09\u3002 COMMAND - \u8fd9\u662f\u5e26\u6709\u53c2\u6570\u7684\u7a0b\u5e8f\u540d\u79f0\u3002\u8bf7\u6ce8\u610f /usr/sbin/sshd \u662f sshd: user1 \u7684\u7236\u8fdb\u7a0b\uff0c\u800c sshd: user1 \u53c8\u662f sshd: user1@pts/0 \u7684\u7236\u8fdb\u7a0b\uff0c\u800c sshd: user1@pts/0 \u53c8\u662f bash \u7684\u7236\u8fdb\u7a0b\uff0c\u800c bash \u53c8\u662f ps \u2013forest ax \u7684\u7236\u8fdb\u7a0b\u3002\u4f60\u9700\u8981\u66f4\u6df1\u5165\u4e00\u4e9b\uff01 \u73b0\u5728\u8ba9\u6211\u4eec\u8ba8\u8bba\u53ef\u80fd\u7684\u8fdb\u7a0b\u72b6\u6001\u3002\u4f60\u53ef\u4ee5\u53c2\u8003 man ps \u7684 PROCESS STATE CODES\u3002 \u72b6\u6001 \u63cf\u8ff0 D \u4e0d\u4e2d\u65ad\u7761\u7720\uff08\u901a\u5e38\u4e3a IO\uff09\u3002\u8fdb\u7a0b\u7e41\u5fd9\u6216\u6302\u8d77\uff0c\u4e0d\u54cd\u5e94\u4fe1\u53f7\uff0c\u4f8b\u5982\u786c\u76d8\u5df2\u7ecf\u5d29\u6e83\uff0c\u8bfb\u64cd\u4f5c\u65e0\u6cd5\u5b8c\u6210\u3002 R \u8fd0\u884c\u6216\u53ef\u8fd0\u884c\uff08\u5728\u8fd0\u884c\u961f\u5217\u4e2d\uff09\u3002\u8fdb\u7a0b\u6b63\u5728\u6267\u884c\u4e2d\u3002 S \u4e2d\u65ad\u7761\u7720\uff08\u7b49\u5f85\u4e8b\u4ef6\u5b8c\u6210\uff09\u3002\u4f8b\u5982\uff0c\u7ec8\u7aef\u8fdb\u7a0b\u548c Bash \u901a\u5e38\u5904\u4e8e\u6b64\u72b6\u6001\uff0c\u7b49\u5f85\u4f60\u952e\u5165\u67d0\u4e9b\u5185\u5bb9\u3002 T \u505c\u6b62\uff0c\u7531\u4efb\u52a1\u63a7\u5236\u4fe1\u53f7\u6216\u7531\u4e8e\u88ab\u8ffd\u8e2a\u3002 W \u5206\u9875\uff08\u4ece 2.6.xx \u5185\u6838\u8d77\u65e0\u6548\uff0c\u6240\u4ee5\u4e0d\u7528\u62c5\u5fc3\uff09\u3002 X \u6b7b\u4ea1\uff08\u4e0d\u5e94\u8be5\u770b\u5230\uff09\u3002 Z \u5df2\u505c\u6b62\uff08\u201c\u50f5\u5c38\u201d\uff09\u8fdb\u7a0b\uff0c\u5df2\u7ec8\u6b62\uff0c\u4f46\u672a\u88ab\u7236\u9879\u6536\u56de\u3002\u8fd9\u79cd\u60c5\u51b5\u53d1\u751f\u5728\u9519\u8bef\u7ec8\u6b62\u7684\u8fdb\u7a0b\u4e0a\u3002 < \u9ad8\u4f18\u5148\u7ea7\uff08\u5bf9\u5176\u4ed6\u7528\u6237\u4e0d\u597d\uff09 N \u4f4e\u4f18\u5148\u7ea7\uff08\u5bf9\u5176\u4ed6\u7528\u6237\u5f88\u597d\uff09 L \u5c06\u9875\u9762\u9501\u5b9a\u5230\u5185\u5b58\u4e2d\uff08\u7528\u4e8e\u5b9e\u65f6\u548c\u81ea\u5b9a\u4e49 IO\uff09 s \u662f\u4f1a\u8bdd\u9886\u5bfc\u3002Linux \u4e2d\u7684\u76f8\u5173\u8fdb\u7a0b\u88ab\u89c6\u4e3a\u4e00\u4e2a\u5355\u5143\uff0c\u5e76\u5177\u6709\u5171\u4eab\u4f1a\u8bdd ID\uff08SID\uff09\u3002\u5982\u679c\u8fdb\u7a0b ID\uff08PID\uff09= \u4f1a\u8bdd ID\uff08SID\uff09\uff0c\u5219\u6b64\u8fdb\u7a0b\u5c06\u662f\u4f1a\u8bdd\u9886\u5bfc\u3002 L \u662f\u591a\u7ebf\u7a0b\u7684\uff08\u4f7f\u7528 CLONE_THREAD\uff0c\u4f8b\u5982 NPTL pthreads\uff09 + \u4f4d\u4e8e\u524d\u53f0\u8fdb\u7a0b\u7ec4\u3002\u8fd9\u6837\u7684\u5904\u7406\u5668\u5141\u8bb8\u8f93\u5165\u548c\u8f93\u51fa\u5230\u7535\u4f20\u6a21\u62df\u5668\uff0ctty\u3002 \u73b0\u5728\u8ba9\u6211\u4eec\u8ba8\u8bba\uff0c\u4e0e\u6240\u6709\u8fd9\u4e9b\u8fdb\u7a0b\u6c9f\u901a\u7684\u65b9\u5f0f\u3002\u4f60\u53ef\u4ee5\u901a\u8fc7\u53d1\u9001\u4fe1\u53f7\u6765\u5b9e\u73b0\u5b83\u3002\u4fe1\u53f7\u53ef\u80fd\u662f\u4e00\u79cd\u97ad\u7b56\u8fdb\u7a0b\u65b9\u5f0f\uff0c\u6240\u4ee5\u8fdb\u7a0b\u4f1a\u542c\u4f60\u7684\u8bdd\uff0c\u5e76\u505a\u51fa\u4f60\u60f3\u8981\u7684\u884c\u4e3a\u3002\u8fd9\u662f\u53ef\u80fd\u7684\u8fdb\u7a0b\u7684\u7f29\u7565\u5217\u8868\uff0c\u6211\u4ece man kill \u7684 SIGNALS \u90e8\u5206\u83b7\u5f97\uff1a \u4fe1\u53f7 \u7f16\u53f7 \u884c\u4e3a \u63cf\u8ff0 0 0 N/A \u9000\u51fa\u4ee3\u7801\u8868\u793a\u662f\u5426\u53ef\u4ee5\u53d1\u9001\u4fe1\u53f7 HUP 1 \u9000\u51fa \u63a7\u5236\u7ec8\u7aef\u6302\u8d77\u6216\u7236\u8fdb\u7a0b\u6b7b\u4ea1 INT 2 \u9000\u51fa \u6765\u81ea\u952e\u76d8\u7684\u4e2d\u65ad QUIT 3 \u5185\u6838 \u6765\u81ea\u952e\u76d8\u7684\u9000\u51fa ILL 4 \u5185\u6838 \u975e\u6cd5\u6307\u4ee4 TRAP 5 \u5185\u6838 \u8ddf\u8e2a/\u65ad\u70b9\u6355\u83b7 ABRT 6 \u5185\u6838 \u6765\u81ea abort(3) \u7684\u4e2d\u6b62\u4fe1\u53f7 FPE 8 \u5185\u6838 \u6d6e\u70b9\u5f02\u5e38 KILL 9 \u9000\u51fa \u4e0d\u53ef\u6355\u83b7\uff0c\u4e0d\u53ef\u5ffd\u89c6\u7684\u6740\u6b7b SEGV 11 \u5185\u6838 \u5185\u5b58\u5f15\u7528\u65e0\u6548 PIPE 13 \u9000\u51fa \u635f\u574f\u7684\u7ba1\u9053\uff1a\u5199\u5165\u6ca1\u6709\u8bfb\u8005\u7684\u7ba1\u9053 ALRM 14 \u9000\u51fa \u6765\u81ea alarm(2) \u7684\u5b9a\u65f6\u5668\u4fe1\u53f7 TERM 15 \u9000\u51fa \u7ec8\u6b62\u8fdb\u7a0b \u540c\u6837\uff0c\u4e0d\u8981\u56e0\u4e3a\u4e0d\u7406\u89e3\u800c\u5bb3\u6015\uff0c\u56e0\u4e3a\u73b0\u5728\u4f60\u53ea\u9700\u8981\u4e86\u89e3 HUP \uff0c TERM \u548c KILL \u3002\u751a\u81f3\u6709\u4e00\u9996\u5173\u4e8e KILL \u4fe1\u53f7\u7684\u6b4c\u66f2 \uff0c\u547d\u540d\u4e3a \u300aKill dash nine\u300b \u3002\u53e6\u5916\uff0c\u6ce8\u610f\u5230 abort(3) \u548c alarm(2) \u4e86\u4e48\uff1f\u8fd9\u610f\u5473\u7740\u4f60\u53ef\u4ee5\u901a\u8fc7\u952e\u5165 man 3 abort \u548c man 2 alarm \u6765\u9605\u8bfb\u76f8\u5e94\u7684\u624b\u518c\u9875\u3002 \u73b0\u5728\uff0c\u4f60\u5c06\u5b66\u4e60\u5982\u4f55\u5217\u51fa\u6b63\u5728\u8fd0\u884c\u7684\u8fdb\u7a0b\u5e76\u5411\u5176\u53d1\u9001\u4fe1\u53f7\u3002","title":"\u7ec3\u4e60 16\uff1a\u5904\u7406\u8fdb\u7a0b\uff0cps\uff0ckill"},{"location":"RH124/ps_kill/#_1","text":"1: ps x 2: ps a 3: ps ax 4: ps axue --forest 5: dd if=/dev/zero of=~/test.img bs=1 count=$((1024*1024*1024)) & 6: kill -s USR1 $! 7: <ENTER> 8: kill -s USR1 $! 9: <ENTER> 10: kill -s TERM $! 11: <ENTER>","title":"\u8fd9\u6837\u505a"},{"location":"RH124/ps_kill/#_2","text":"user1@vm1:/etc$ ps x PID TTY STAT TIME COMMAND 6675 ? S 0:00 sshd: user1@pts/0 6676 pts/0 Ss 0:00 -bash 8193 pts/0 R+ 0:00 ps x user1@vm1:/etc$ ps a PID TTY STAT TIME COMMAND 1210 tty2 Ss+ 0:00 /sbin/getty 38400 tty2 1211 tty3 Ss+ 0:00 /sbin/getty 38400 tty3 1212 tty4 Ss+ 0:00 /sbin/getty 38400 tty4 1213 tty5 Ss+ 0:00 /sbin/getty 38400 tty5 1214 tty6 Ss+ 0:00 /sbin/getty 38400 tty6 6216 tty1 Ss+ 0:00 /sbin/getty 38400 tty1 6676 pts/0 Ss 0:00 -bash 8194 pts/0 R+ 0:00 ps a user1@vm1:/etc$ ps ax PID TTY STAT TIME COMMAND 1 ? Ss 0:16 init [2] --- skipped --- skipped --- skipped --- 691 ? Ss 0:00 /sbin/portmap 703 ? Ss 0:00 /sbin/rpc.statd 862 ? Sl 0:00 /usr/sbin/rsyslogd -c4 886 ? Ss 0:00 /usr/sbin/atd 971 ? Ss 0:00 /usr/sbin/acpid 978 ? Ss 0:01 /usr/sbin/cron 1177 ? Ss 0:00 /usr/sbin/sshd 1191 ? Ss 0:00 /usr/sbin/exim4 -bd -q30m 1210 tty2 Ss+ 0:00 /sbin/getty 38400 tty2 1211 tty3 Ss+ 0:00 /sbin/getty 38400 tty3 1212 tty4 Ss+ 0:00 /sbin/getty 38400 tty4 1213 tty5 Ss+ 0:00 /sbin/getty 38400 tty5 1214 tty6 Ss+ 0:00 /sbin/getty 38400 tty6 6216 tty1 Ss+ 0:00 /sbin/getty 38400 tty1 6671 ? Ss 0:00 sshd: user1 [priv] 6675 ? S 0:00 sshd: user1@pts/0 6676 pts/0 Ss 0:00 -bash 8198 pts/0 R+ 0:00 ps ax user1@vm1:/etc$ ps axue --forest USER PID %CPU %MEM VSZ RSS TTY STAT START TIME COMMAND --- skipped --- skipped --- skipped --- root 1 0.0 0.0 8356 820 ? Ss Jun06 0:16 init [2] root 297 0.0 0.0 16976 1000 ? S<s Jun06 0:00 udevd --daemon root 392 0.0 0.0 16872 840 ? S< Jun06 0:00 \\_ udevd --daemon root 399 0.0 0.0 16872 836 ? S< Jun06 0:00 \\_ udevd --daemon daemon 691 0.0 0.0 8096 532 ? Ss Jun06 0:00 /sbin/portmap statd 703 0.0 0.0 14384 868 ? Ss Jun06 0:00 /sbin/rpc.statd root 862 0.0 0.1 54296 1664 ? Sl Jun06 0:00 /usr/sbin/rsyslogd -c4 daemon 886 0.0 0.0 18716 436 ? Ss Jun06 0:00 /usr/sbin/atd root 971 0.0 0.0 3920 644 ? Ss Jun06 0:00 /usr/sbin/acpid root 978 0.0 0.0 22400 880 ? Ss Jun06 0:01 /usr/sbin/cron root 1177 0.0 0.1 49176 1136 ? Ss Jun06 0:00 /usr/sbin/sshd root 6671 0.0 0.3 70496 3284 ? Ss Jun26 0:00 \\_ sshd: user1 [priv] user1 6675 0.0 0.1 70496 1584 ? S Jun26 0:00 \\_ sshd: user1@pts/0 user1 6676 0.0 0.6 23644 6536 pts/0 Ss Jun26 0:00 \\_ -bash LANG=en_US.UTF-8 USER=user1 LOGNAME=user1 HOM user1 8199 0.0 0.1 16312 1088 pts/0 R+ 17:07 0:00 \\_ ps axue --forest TERM=screen-bce SHELL=/bin/bas 101 1191 0.0 0.1 44148 1076 ? Ss Jun06 0:00 /usr/sbin/exim4 -bd -q30m root 1210 0.0 0.0 5932 616 tty2 Ss+ Jun06 0:00 /sbin/getty 38400 tty2 root 1211 0.0 0.0 5932 612 tty3 Ss+ Jun06 0:00 /sbin/getty 38400 tty3 root 1212 0.0 0.0 5932 612 tty4 Ss+ Jun06 0:00 /sbin/getty 38400 tty4 root 1213 0.0 0.0 5932 612 tty5 Ss+ Jun06 0:00 /sbin/getty 38400 tty5 root 1214 0.0 0.0 5932 616 tty6 Ss+ Jun06 0:00 /sbin/getty 38400 tty6 root 6216 0.0 0.0 5932 612 tty1 Ss+ Jun14 0:00 /sbin/getty 38400 tty1 user1@vm1:/etc$ dd if=/dev/zero of=~/test.img bs=1 count=$((1024*1024*1024)) & [1] 8200 user1@vm1:/etc$ kill -s USR1 $! user1@vm1:/etc$ 1455424+0 records in 1455424+0 records out 1455424 bytes (1.5 MB) copied, 1.76646 s, 824 kB/s user1@vm1:/etc$ kill -s USR1 $! user1@vm1:/etc$ 3263060+0 records in 3263060+0 records out 3263060 bytes (3.3 MB) copied, 3.94237 s, 828 kB/s user1@vm1:/etc$ kill -s TERM $! user1@vm1:/etc$ [1]+ Terminated dd if=/dev/zero of=~/test.img bs=1 count=$((1024*1024*1024)) user1@vm1:/etc$","title":"\u4f60\u4f1a\u770b\u5230\u4ec0\u4e48"},{"location":"RH124/ps_kill/#_3","text":"\u6253\u5370\u4f60\u62e5\u6709\uff08\u542f\u52a8\uff09\u7684\u8fdb\u7a0b\u3002 \u4ec5\u6253\u5370\u4e0e\u7ec8\u7aef\uff08 tty \uff09\u76f8\u5173\u7684\u8fdb\u7a0b\u548c\u4f60\u62e5\u6709\uff08\u542f\u52a8\uff09\u7684\u8fdb\u7a0b\u3002 \u6253\u5370\u6240\u6709\u6b63\u5728\u8fd0\u884c\u7684\u8fdb\u7a0b\u3002 \u4ee5\u6811\u5f62\u5f0f\u6253\u5370\u6240\u6709\u6b63\u5728\u8fd0\u884c\u7684\u8fdb\u7a0b\uff0c\u5e76\u5305\u542b\u9644\u52a0\u4fe1\u606f\uff0c\u4f8b\u5982\u53ef\u7528\u7684\u76f8\u5173\u7528\u6237\u540d\u548c\u73af\u5883\u3002\u8bf7\u6ce8\u610f\uff0c\u6b64\u4fe1\u606f\u4ec5\u9002\u7528\u4e8e\u4f60\u62e5\u6709\uff08\u542f\u52a8\uff09\u7684\u8fdb\u7a0b\u3002\u4e3a\u4e86\u67e5\u770b\u6240\u6709\u8fdb\u7a0b\u7684\u73af\u5883\u4fe1\u606f\uff0c\u8bf7\u8f93\u5165 sudo ps axue --forest \u3002 \u5f00\u59cb\u521b\u5efa\u4e00\u4e2a\u96f6\u586b\u5145\u6587\u4ef6\uff08\u586b\u5145\u4e3a\u7a7a\u5b57\u7b26\uff0c\u73b0\u5728\u4e0d\u8981\u7ea0\u7ed3\uff09\uff0c\u5e76\u901a\u8fc7\u5728\u672b\u5c3e\u6307\u5b9a & \u53d1\u9001\u5230\u540e\u53f0\u3002 \u67e5\u8be2 dd \u7684\u72b6\u6001\u3002 \u56e0\u4e3a bash \u53ea\u80fd\u6253\u5370\u4e00\u4e9b\u4e1c\u897f\u6765\u56de\u5e94\u4f60\u7684\u8f93\u5165\uff0c\u4f60\u9700\u8981\u6309 <ENTER> \uff08\u53d1\u51fa\u7a7a\u6307\u4ee4\uff09\u3002 \u518d\u6b21\u67e5\u8be2 dd \u7684\u72b6\u6001\u3002 \u540c\u6837\uff0c\u4f60\u9700\u8981\u6309 <ENTER> \u6765\u67e5\u770b\u8f93\u51fa\u3002 \u5411 dd \u53d1\u9001\u7ec8\u6b62\u4fe1\u53f7\uff0c\u6240\u4ee5 dd \u9000\u51fa\u4e86\u3002 \u4e3a\u4e86\u770b\u5230\u5b83\u786e\u5b9e\u53d1\u751f\u4e86\uff0c\u4f60\u9700\u8981\u518d\u6b21\u6309 <ENTER> \u952e \u3002","title":"\u89e3\u91ca"},{"location":"RH124/ps_kill/#_4","text":"\u9605\u8bfb man ps \uff0c man kill \u3002 \u9605\u8bfb \u8fdb\u7a0b\u7684\u751f\u547d\u5468\u671f \uff0c\u5e76\u7814\u7a76\u8fd9\u5f20\u56fe\u7247\uff1a \u8fdb\u7a0b\u7684\u5de5\u4f5c\u6d41 \u3002 \u6253\u5370\u5e76\u586b\u5199 \u4fe1\u53f7\u8868 \u3002\u4f60\u53ef\u4ee5\u4f7f\u7528 kernel.org \u4e2d\u7684\u6587\u6863 \u3002","title":"\u9644\u52a0\u9898"},{"location":"RH134/","text":"RH134 \u6b63\u5219\u8868\u8fbe \u8ba1\u5212\u4efb\u52a1 \u4f18\u5148\u7ea7 \u5206\u533a\u6302\u8f7d\uff0c\u903b\u8f91\u5377 SELiux\uff0cFirewalld PXE & Kickstart","title":"RH134"},{"location":"RH134/#rh134","text":"\u6b63\u5219\u8868\u8fbe \u8ba1\u5212\u4efb\u52a1 \u4f18\u5148\u7ea7 \u5206\u533a\u6302\u8f7d\uff0c\u903b\u8f91\u5377 SELiux\uff0cFirewalld PXE & Kickstart","title":"RH134"},{"location":"RH134/day1/","text":"\u7b2c1\u5929 \u6b63\u5219\u8868\u8fbe\u5f0f grep \u9009\u9879 \u4f5c\u7528 -i \u5ffd\u7565\u5927\u5c0f\u5199 -v \u53cd\u8f6c\u5339\u914d -n \u663e\u793a\u884c\u53f7 -R \u9012\u5f52\u76ee\u5f55\u4e0b\u6240\u6709\u6587\u4ef6 -A \u6b63\u5219\u8868\u8fbe\u5f0f\u5339\u914d\u9879\u4e4b\u540e\u7684\u884c\u6570 -B \u6b63\u5219\u8868\u8fbe\u5f0f\u5339\u914d\u9879\u4e4b\u524d\u7684\u884c\u6570 -e \u4f7f\u7528\u591a\u4e2a -e \u9009\u9879\u53ef\u4ee5\u63d0\u4f9b\u591a\u4e2a\u6b63\u5219\u8868\u8fbe\u5f0f -E \u4f7f\u7528 egrep -F \u4f7f\u7528 fgrep \u5339\u914d\u7b26 \u5b57\u7b26\u5339\u914d \u7b26\u53f7 \u5339\u914d\u9879 . \u4efb\u610f\u5355\u4e2a\u5b57\u7b26 [] [] \u5185\u4efb\u610f\u5355\u4e2a\u5b57\u7b26 [^] \u9664\u4e86 [] \u5185\u4efb\u610f\u5355\u4e2a\u5b57\u7b26 [[:alnum:]] \u5c0f\u5199 a-z\uff0c\u5927\u5199 A-Z\uff0c\u6570\u5b57 0-9 \u8303\u56f4\u5185\u4efb\u610f\u5355\u4e2a\u5b57\u7b26 [[:alpha:]] \u5c0f\u5199 a-z \u548c \u5927\u5199 A-Z \u8303\u56f4\u5185\u4efb\u610f\u5355\u4e2a\u5b57\u7b26 [a-z] \u6216 [[:lower:]] \u5c0f\u5199 a-z \u8303\u56f4\u5185\u4efb\u610f\u5355\u4e2a\u5b57\u7b26 [A-Z] \u6216 [[:upper:]] \u5927\u5199 A-Z \u8303\u56f4\u5185\u4efb\u610f\u5355\u4e2a\u5b57\u7b26 [[:digit:]] \u6570\u5b57 0-9 \u8303\u56f4\u5185\u4efb\u610f\u5355\u4e2a\u5b57\u7b26 [[:punct:]] \u9664\u7a7a\u683c\u548c\u5b57\u6bcd\u6570\u5b57\u4ee5\u5916\u7684\u4efb\u4f55\u53ef\u6253\u5370\u5b57\u7b26 \u6b21\u6570\u5339\u914d \u7b26\u53f7 \u5339\u914d\u5185\u5bb9 * \u5339\u914d\u524d\u4e00\u4e2a\u5b57\u7b26\u4efb\u610f\u6b21\uff0c>=0 \u6b21 \\? \u5339\u914d\u524d\u4e00\u4e2a\u5b57\u7b26 0 \u6216 1 \u6b21 \\+ \u5339\u914d\u524d\u4e00\u4e2a\u5b57\u7b26\u5927\u4e8e\u7b49\u4e8e 1 \u6b21 \\{\\} \\{m\\} \u5339\u914d\u524d\u4e00\u4e2a\u5b57\u7b26 m \u6b21\uff0c \\{m,n\\} \u5339\u914d\u524d\u4e00\u4e2a\u5b57\u7b26 m \u5230 n \u6b21\uff0c \\{m,\\} \u5339\u914d\u524d\u4e00\u4e2a\u5b57\u7b26 >= m \u6b21\uff0c \\{0,n\\} \u5339\u914d\u524d\u4e00\u4e2a\u5b57\u7b26 <= n \u6b21 \u4f4d\u7f6e\u951a\u5b9a \u7b26\u53f7 \u5339\u914d\u5185\u5bb9 ^ \u884c\u9996\u5b9a\u4f4d\u7b26 $ \u884c\u5c3e\u5b9a\u4f4d\u7b26 ^$ \u7a7a\u767d\u884c \\<char \u8d77\u59cb\u5b57\u754c\u7b26\uff0c\u6216\u4f7f\u7528 \\bchar char\\> \u7ed3\u675f\u5b57\u754c\u7b26\uff0c\u6216\u4f7f\u7528 char\\b \u5206\u7ec4 \u7b26\u53f7 \u5339\u914d\u5185\u5bb9 \\(\\) \u5339\u914d \\(\\) \u8fde\u7eed\u5b57\u7b26\u4e32\uff0c\u800c\u4e0d\u662f\u5355\u4e2a\u5b57\u7b26 \\| \u6216\u8005\uff0c\u5339\u914d \\| \u5de6\u4fa7\u6216\u53f3\u4fa7\u5b57\u7b26\u4e32 egrep egrep \u4f7f\u7528\u6269\u5c55\u6b63\u5219\u8868\u8fbe\u5f0f\uff0c\u76f8\u5f53\u4e8e grep -E\uff0c\u7528\u6cd5\u57fa\u672c\u4e0e grep \u76f8\u540c\uff0c\u53ea\u662f\u67d0\u4e9b\u7b26\u53f7\u4e0d\u9700\u8981\u8f6c\u4e49\u3002 \u6b21\u6570\u5339\u914d \u7b26\u53f7 \u5339\u914d\u5185\u5bb9 ? \u5339\u914d\u524d\u4e00\u4e2a\u5b57\u7b26 0 \u6216 1 \u6b21 + \u5339\u914d\u524d\u4e00\u4e2a\u5b57\u7b26\u5927\u4e8e 1 \u6b21 {} {m} \u5339\u914d\u524d\u4e00\u4e2a\u5b57\u7b26 m \u6b21\uff0c {m,n} \u5339\u914d\u524d\u4e00\u4e2a\u5b57\u7b26 m \u5230 n \u6b21\uff0c {m,} \u5339\u914d\u524d\u4e00\u4e2a\u5b57\u7b26 >= m \u6b21\uff0c {0,n} \u5339\u914d\u524d\u4e00\u4e2a\u5b57\u7b26 <= n \u6b21 \u5206\u7ec4 \u7b26\u53f7 \u5339\u914d\u5185\u5bb9 () \u5339\u914d () \u8fde\u7eed\u5b57\u7b26\u4e32\uff0c\u800c\u4e0d\u662f\u5355\u4e2a\u5b57\u7b26 | \u6216\u8005\uff0c\u5339\u914d | \u5de6\u4fa7\u6216\u53f3\u4fa7\u5b57\u7b26\u4e32 fgrep fgrep \u5c06\u67e5\u627e\u5185\u5bb9\u89c6\u4e3a\u56fa\u5b9a\u5b57\u7b26\u4e32\uff0c\u76f8\u5f53\u4e8e grep -F\u3002 vim vim \u57fa\u7840\u90e8\u5206 \u67e5\u627e\u66ff\u6362 \u67e5\u627e\u66ff\u6362\u5747\u5728 EX \u6a21\u5f0f\u4e0b\u6267\u884c :%s/OLDCHAR/NEWCHAR/ig : \u8fdb\u5165 EX \u6a21\u5f0f %s \u5904\u7406\u4e2d\u6587\u6863\u7684\u6bcf\u4e00\u884c\uff0c\u53ca\u6574\u4e2a\u6587\u6863\uff0c % \u53ef\u4ee5\u6539\u4e3a\u9700\u8981\u66ff\u6362\u884c\u7684\u884c\u53f7 OLDCHAR \u66ff\u6362\u524d\u7684\u5b57\u7b26\u4e32 NEWCHAR \u66ff\u6362\u540e\u7684\u5b57\u7b26\u4e32 i \u5ffd\u7565\u5927\u5c0f\u5199 g \u66ff\u6362\u6bcf\u4e00\u884c\u627e\u5230\u7684\u6240\u6709\u5b57\u7b26\uff0c\u9ed8\u8ba4\u6307\u66ff\u6362\u7b2c\u4e00\u4e2a\u5b57\u7b26 \u5bc4\u5b58\u5668 \u7c7b\u578b \u4f5c\u7528 \u672a\u547d\u540d\u5bc4\u5b58\u5668 \"\" \u9ed8\u8ba4\u5bc4\u5b58\u5668\uff0c\u6700\u540e\u4e00\u6b21\u64cd\u4f5c\u7684\u5185\u5bb9\uff0c\u6587\u672c\u6765\u6e90\u547d\u4ee4\uff1ad/c/s/x/y 10 \u4e2a\u6570\u5b57\u547d\u540d\u5bc4\u5b58\u5668 \"0 - \"9 0 \u7f13\u5b58\u6700\u8fd1\u4e00\u6b21\u590d\u5236\u7684\u5185\u5bb9\uff0c1-9 \u7f13\u5b58\u6700\u8fd1 9 \u6b21\u5220\u9664\u7684\u5185\u5bb9 1 \u4e2a\u884c\u5185\u5220\u9664\u7f13\u5b58\u5bc4\u5b58\u5668 \"- \u7f13\u5b58\u884c\u5185\u5220\u9664\u7684\u6587\u672c 26 \u4e2a\u5b57\u6bcd\u547d\u540d\u5bc4\u5b58\u5668 \"a - \"z / \"A - \"Z \u5b8c\u5168\u7531\u7528\u6237\u6307\u5b9a\u5185\u5bb9\u7684\u5bc4\u5b58\u5668 4\u4e2a\u53ea\u8bfb\u5bc4\u5b58\u5668 \". \"% \"# \": \u7f13\u5b58\u6700\u8fd1\u63d2\u5165\u6587\u672c\u3001\u5f53\u524d\u6587\u4ef6\u540d\u3001\u5f53\u524d\u4ea4\u66ff\u6587\u4ef6\u540d\u3001\u4e0a\u6b21\u6267\u884c ex \u547d\u4ee4 \u8868\u8fbe\u5f0f\u5bc4\u5b58\u5668 \"= \u4f7f\u7528 VIM \u5f3a\u5927\u7684\u8868\u8fbe\u5f0f\u529f\u80fd \u9009\u62e9\u53ca\u62d6\u62fd\u5bc4\u5b58\u5668 \"* \"+ \"~ \u5b58\u53d6 GUI \u9009\u62e9\u6587\u672c\uff0c\u7cfb\u7edf\u526a\u5207\u677f\uff08clipboard\uff09\u53ef\u7528\u65f6\u4e0e\u5916\u90e8\u5e94\u7528\u4ea4\u4e92\uff0c \"* \"+ \"~ \u5206\u522b\u4e3a\u9f20\u6807\u9009\u4e2d\u533a\u57df\uff0c\u7cfb\u7edf\u526a\u5207\u677f\uff0c\u88ab\u62d6\u62fd\u7684\u6587\u672c \u9ed1\u6d1e\u5bc4\u5b58\u5668 \"_ \u7c7b\u4f3cLinux\u4e2d\u7684/dev/null\u6587\u4ef6\uff0c\u53ea\u8fdb\u4e0d\u51fa\uff0c\u53ef\u7528\u6765\u6ee4\u6389\u5f71\u54cd\u9ed8\u8ba4\u5bc4\u5b58\u5668\u7684\u5185\u5bb9 \u6700\u540e\u641c\u7d22\u5bc4\u5b58\u5668 \"/ \u7f13\u5b58\u4f7f\u7528\u8fc7\u7684\u6700\u540e\u7684\u641c\u7d22\u5185\u5bb9 \u8ba1\u5212\u4efb\u52a1 at \u4e00\u6b21\u6027\u8ba1\u5212\u4efb\u52a1 \u547d\u4ee4 \u4f5c\u7528 atq at -l \u67e5\u770b\u4efb\u52a1 at -c \u67e5\u770b\u4efb\u52a1\u6267\u884c\u7684\u547d\u4ee4 atrm at -r at -d \u5220\u9664\u4efb\u52a1 at -f \u4ece\u6587\u4ef6\u8bfb\u53d6\u4efb\u52a1\u800c\u4e0d\u662f\u6807\u51c6\u8f93\u5165 at -q \u6307\u5b9a\u4efb\u52a1\u961f\u5217\uff0c\u8303\u56f4 a-z\uff0c\u9ed8\u8ba4\u662f at -m \u4efb\u52a1\u5b8c\u6210\u540e\u53d1\u9001\u90ae\u4ef6 at -M \u4e0d\u53d1\u9001\u90ae\u4ef6 at now+1min at> echo a minute passed at> <EOT> #ctrl+d \u65f6\u95f4\u683c\u5f0f\uff1a /usr/share/doc/at-3.1.13/timespec * MINUTE HOUR * NOON MIDNIGHT TEATIME * AM PM * NOW * NEXT * TODAY TOMORROW * MINUTE HOUR DAY WEEK MONTH YEAR cron \u5468\u671f\u6027\u8ba1\u5212\u4efb\u52a1 \u547d\u4ee4 \u4f5c\u7528 crontab -l \u5217\u51fa\u5f53\u524d\u7528\u6237\u8ba1\u5212\u4efb\u52a1 crontab -r \u5220\u9664\u5f53\u524d\u7528\u6237\u6240\u6709\u8ba1\u5212\u4efb\u52a1 crontab -e \u7f16\u8f91\u5f53\u524d\u7528\u6237\u8ba1\u5212\u4efb\u52a1 crontab -u \u4e3a\u5176\u4ed6\u7528\u6237\u521b\u5efa\u4efb\u52a1\uff08\u4ec5 root\uff09 crontab <filename> \u5220\u9664\u6240\u6709\u4efb\u52a1\uff0c\u4ece <filename> \u6587\u4ef6\u8bfb\u53d6\u4efb\u52a1\uff0c\u672a\u6307\u5b9a\u6587\u4ef6\u4ece stdin \u8bfb\u53d6 \u4efb\u52a1\u683c\u5f0f \u5206 \u65f6 \u65e5 \u6708 \u5468 COMMAND * \u8868\u793a\u59cb\u7ec8/\u65e0\u5173\u7d27\u8981 \u6570\u5b57\u6307\u5b9a\u5206\u949f\u6570\uff0c\u5c0f\u65f6\u6570\uff0c\u65e5\u671f\uff0c\u5de5\u4f5c\u65e5\u7b49\uff080 \u8868\u793a\u5468\u65e5\uff0c1 \u8868\u793a\u5468\u4e00... ...\uff0c7 \u4e5f\u8868\u793a\u5468\u65e5\uff09 \u53ef\u4ee5\u7528\u4e09\u4e2a\u5b57\u6bcd\u8868\u793a\u6708\u4efd\u6216\u5de5\u4f5c\u65e5 x-y \u8868\u793a\u8303\u56f4\uff0c\u4ece x \u5230 y \uff08\u542b\uff09 x,y \u8868\u793a\u5217\u8868\uff0c x \uff0c y \u4e3a\u5217\u8868\u4e2d\u5355\u4e2a\u5143\u7d20 */x \u8868\u793a\u65f6\u95f4\u95f4\u9694\u4e3a x \u547d\u4ee4\u4e2d\u672a\u8f6c\u4e49\u7684 % \u4f1a\u88ab\u4f5c\u4e3a\u65b0\u884c\u5904\u7406 systemd-tmpfile /etc/tmpfiles.d/*.conf #\u7ba1\u7406\u5458\u53ef\u4fee\u6539\u7684\u914d\u7f6e\u6587\u4ef6 /usr/lib/tmpfiles.d/*.conf #rpm\u8f6f\u4ef6\u5b89\u88c5\u7684\u65f6\u5019\uff0c\u81ea\u52a8\u66f4\u65b0\u7684\u914d\u7f6e\u6587\u4ef6\uff0c\u4e0d\u80fd\u66f4\u6539 /run/tmpfiles.d/*.conf #daemon\u5e94\u7528\u7a0b\u5e8f\u81ea\u5df1\u7ba1\u7406\u7684\u914d\u7f6e\u6587\u4ef6 \u914d\u7f6e\u6587\u4ef6\u683c\u5f0f \u7c7b\u578b \u8def\u5f84 \u6743\u9650 \u7528\u6237\uff08UID\uff09 \u7ec4\uff08GID\uff09 \u671f\u9650 \u53c2\u6570 \u521b\u5efa\u6587\u4ef6\u6216\u76ee\u5f55\u5e76\u8bbe\u7f6e\u76f8\u5e94\u7684 \u5c5e\u4e3b/\u5c5e\u7ec4\u3001\u6743\u9650\u3002 systemd-tmpfiles --create \u6e05\u7406\u6240\u6709\u8fc7\u671f\u7684\u6587\u4ef6\u4e0e\u76ee\u5f55\u3002 systemd-tmpfiles --clean \u5220\u9664 D, R \u6807\u8bb0\u7684\u76ee\u5f55\u4e2d\u7684\u5185\u5bb9\uff0c\u4ee5\u53ca r, R \u6807\u8bb0\u7684\u76ee\u5f55\u4e0e\u6587\u4ef6\u81ea\u8eab\u3002 systemd-tmpfiles --remove \u4e2d\u6587\u53c2\u8003\u624b\u518c\uff1a http://www.jinbuguo.com/systemd/tmpfiles.d.html","title":"\u7b2c1\u5929"},{"location":"RH134/day1/#1","text":"","title":"\u7b2c1\u5929"},{"location":"RH134/day1/#_1","text":"","title":"\u6b63\u5219\u8868\u8fbe\u5f0f"},{"location":"RH134/day1/#grep","text":"\u9009\u9879 \u4f5c\u7528 -i \u5ffd\u7565\u5927\u5c0f\u5199 -v \u53cd\u8f6c\u5339\u914d -n \u663e\u793a\u884c\u53f7 -R \u9012\u5f52\u76ee\u5f55\u4e0b\u6240\u6709\u6587\u4ef6 -A \u6b63\u5219\u8868\u8fbe\u5f0f\u5339\u914d\u9879\u4e4b\u540e\u7684\u884c\u6570 -B \u6b63\u5219\u8868\u8fbe\u5f0f\u5339\u914d\u9879\u4e4b\u524d\u7684\u884c\u6570 -e \u4f7f\u7528\u591a\u4e2a -e \u9009\u9879\u53ef\u4ee5\u63d0\u4f9b\u591a\u4e2a\u6b63\u5219\u8868\u8fbe\u5f0f -E \u4f7f\u7528 egrep -F \u4f7f\u7528 fgrep","title":"grep"},{"location":"RH134/day1/#_2","text":"\u5b57\u7b26\u5339\u914d \u7b26\u53f7 \u5339\u914d\u9879 . \u4efb\u610f\u5355\u4e2a\u5b57\u7b26 [] [] \u5185\u4efb\u610f\u5355\u4e2a\u5b57\u7b26 [^] \u9664\u4e86 [] \u5185\u4efb\u610f\u5355\u4e2a\u5b57\u7b26 [[:alnum:]] \u5c0f\u5199 a-z\uff0c\u5927\u5199 A-Z\uff0c\u6570\u5b57 0-9 \u8303\u56f4\u5185\u4efb\u610f\u5355\u4e2a\u5b57\u7b26 [[:alpha:]] \u5c0f\u5199 a-z \u548c \u5927\u5199 A-Z \u8303\u56f4\u5185\u4efb\u610f\u5355\u4e2a\u5b57\u7b26 [a-z] \u6216 [[:lower:]] \u5c0f\u5199 a-z \u8303\u56f4\u5185\u4efb\u610f\u5355\u4e2a\u5b57\u7b26 [A-Z] \u6216 [[:upper:]] \u5927\u5199 A-Z \u8303\u56f4\u5185\u4efb\u610f\u5355\u4e2a\u5b57\u7b26 [[:digit:]] \u6570\u5b57 0-9 \u8303\u56f4\u5185\u4efb\u610f\u5355\u4e2a\u5b57\u7b26 [[:punct:]] \u9664\u7a7a\u683c\u548c\u5b57\u6bcd\u6570\u5b57\u4ee5\u5916\u7684\u4efb\u4f55\u53ef\u6253\u5370\u5b57\u7b26 \u6b21\u6570\u5339\u914d \u7b26\u53f7 \u5339\u914d\u5185\u5bb9 * \u5339\u914d\u524d\u4e00\u4e2a\u5b57\u7b26\u4efb\u610f\u6b21\uff0c>=0 \u6b21 \\? \u5339\u914d\u524d\u4e00\u4e2a\u5b57\u7b26 0 \u6216 1 \u6b21 \\+ \u5339\u914d\u524d\u4e00\u4e2a\u5b57\u7b26\u5927\u4e8e\u7b49\u4e8e 1 \u6b21 \\{\\} \\{m\\} \u5339\u914d\u524d\u4e00\u4e2a\u5b57\u7b26 m \u6b21\uff0c \\{m,n\\} \u5339\u914d\u524d\u4e00\u4e2a\u5b57\u7b26 m \u5230 n \u6b21\uff0c \\{m,\\} \u5339\u914d\u524d\u4e00\u4e2a\u5b57\u7b26 >= m \u6b21\uff0c \\{0,n\\} \u5339\u914d\u524d\u4e00\u4e2a\u5b57\u7b26 <= n \u6b21 \u4f4d\u7f6e\u951a\u5b9a \u7b26\u53f7 \u5339\u914d\u5185\u5bb9 ^ \u884c\u9996\u5b9a\u4f4d\u7b26 $ \u884c\u5c3e\u5b9a\u4f4d\u7b26 ^$ \u7a7a\u767d\u884c \\<char \u8d77\u59cb\u5b57\u754c\u7b26\uff0c\u6216\u4f7f\u7528 \\bchar char\\> \u7ed3\u675f\u5b57\u754c\u7b26\uff0c\u6216\u4f7f\u7528 char\\b \u5206\u7ec4 \u7b26\u53f7 \u5339\u914d\u5185\u5bb9 \\(\\) \u5339\u914d \\(\\) \u8fde\u7eed\u5b57\u7b26\u4e32\uff0c\u800c\u4e0d\u662f\u5355\u4e2a\u5b57\u7b26 \\| \u6216\u8005\uff0c\u5339\u914d \\| \u5de6\u4fa7\u6216\u53f3\u4fa7\u5b57\u7b26\u4e32","title":"\u5339\u914d\u7b26"},{"location":"RH134/day1/#egrep","text":"egrep \u4f7f\u7528\u6269\u5c55\u6b63\u5219\u8868\u8fbe\u5f0f\uff0c\u76f8\u5f53\u4e8e grep -E\uff0c\u7528\u6cd5\u57fa\u672c\u4e0e grep \u76f8\u540c\uff0c\u53ea\u662f\u67d0\u4e9b\u7b26\u53f7\u4e0d\u9700\u8981\u8f6c\u4e49\u3002 \u6b21\u6570\u5339\u914d \u7b26\u53f7 \u5339\u914d\u5185\u5bb9 ? \u5339\u914d\u524d\u4e00\u4e2a\u5b57\u7b26 0 \u6216 1 \u6b21 + \u5339\u914d\u524d\u4e00\u4e2a\u5b57\u7b26\u5927\u4e8e 1 \u6b21 {} {m} \u5339\u914d\u524d\u4e00\u4e2a\u5b57\u7b26 m \u6b21\uff0c {m,n} \u5339\u914d\u524d\u4e00\u4e2a\u5b57\u7b26 m \u5230 n \u6b21\uff0c {m,} \u5339\u914d\u524d\u4e00\u4e2a\u5b57\u7b26 >= m \u6b21\uff0c {0,n} \u5339\u914d\u524d\u4e00\u4e2a\u5b57\u7b26 <= n \u6b21 \u5206\u7ec4 \u7b26\u53f7 \u5339\u914d\u5185\u5bb9 () \u5339\u914d () \u8fde\u7eed\u5b57\u7b26\u4e32\uff0c\u800c\u4e0d\u662f\u5355\u4e2a\u5b57\u7b26 | \u6216\u8005\uff0c\u5339\u914d | \u5de6\u4fa7\u6216\u53f3\u4fa7\u5b57\u7b26\u4e32","title":"egrep"},{"location":"RH134/day1/#fgrep","text":"fgrep \u5c06\u67e5\u627e\u5185\u5bb9\u89c6\u4e3a\u56fa\u5b9a\u5b57\u7b26\u4e32\uff0c\u76f8\u5f53\u4e8e grep -F\u3002","title":"fgrep"},{"location":"RH134/day1/#vim","text":"vim \u57fa\u7840\u90e8\u5206","title":"vim"},{"location":"RH134/day1/#_3","text":"\u67e5\u627e\u66ff\u6362\u5747\u5728 EX \u6a21\u5f0f\u4e0b\u6267\u884c :%s/OLDCHAR/NEWCHAR/ig : \u8fdb\u5165 EX \u6a21\u5f0f %s \u5904\u7406\u4e2d\u6587\u6863\u7684\u6bcf\u4e00\u884c\uff0c\u53ca\u6574\u4e2a\u6587\u6863\uff0c % \u53ef\u4ee5\u6539\u4e3a\u9700\u8981\u66ff\u6362\u884c\u7684\u884c\u53f7 OLDCHAR \u66ff\u6362\u524d\u7684\u5b57\u7b26\u4e32 NEWCHAR \u66ff\u6362\u540e\u7684\u5b57\u7b26\u4e32 i \u5ffd\u7565\u5927\u5c0f\u5199 g \u66ff\u6362\u6bcf\u4e00\u884c\u627e\u5230\u7684\u6240\u6709\u5b57\u7b26\uff0c\u9ed8\u8ba4\u6307\u66ff\u6362\u7b2c\u4e00\u4e2a\u5b57\u7b26","title":"\u67e5\u627e\u66ff\u6362"},{"location":"RH134/day1/#_4","text":"\u7c7b\u578b \u4f5c\u7528 \u672a\u547d\u540d\u5bc4\u5b58\u5668 \"\" \u9ed8\u8ba4\u5bc4\u5b58\u5668\uff0c\u6700\u540e\u4e00\u6b21\u64cd\u4f5c\u7684\u5185\u5bb9\uff0c\u6587\u672c\u6765\u6e90\u547d\u4ee4\uff1ad/c/s/x/y 10 \u4e2a\u6570\u5b57\u547d\u540d\u5bc4\u5b58\u5668 \"0 - \"9 0 \u7f13\u5b58\u6700\u8fd1\u4e00\u6b21\u590d\u5236\u7684\u5185\u5bb9\uff0c1-9 \u7f13\u5b58\u6700\u8fd1 9 \u6b21\u5220\u9664\u7684\u5185\u5bb9 1 \u4e2a\u884c\u5185\u5220\u9664\u7f13\u5b58\u5bc4\u5b58\u5668 \"- \u7f13\u5b58\u884c\u5185\u5220\u9664\u7684\u6587\u672c 26 \u4e2a\u5b57\u6bcd\u547d\u540d\u5bc4\u5b58\u5668 \"a - \"z / \"A - \"Z \u5b8c\u5168\u7531\u7528\u6237\u6307\u5b9a\u5185\u5bb9\u7684\u5bc4\u5b58\u5668 4\u4e2a\u53ea\u8bfb\u5bc4\u5b58\u5668 \". \"% \"# \": \u7f13\u5b58\u6700\u8fd1\u63d2\u5165\u6587\u672c\u3001\u5f53\u524d\u6587\u4ef6\u540d\u3001\u5f53\u524d\u4ea4\u66ff\u6587\u4ef6\u540d\u3001\u4e0a\u6b21\u6267\u884c ex \u547d\u4ee4 \u8868\u8fbe\u5f0f\u5bc4\u5b58\u5668 \"= \u4f7f\u7528 VIM \u5f3a\u5927\u7684\u8868\u8fbe\u5f0f\u529f\u80fd \u9009\u62e9\u53ca\u62d6\u62fd\u5bc4\u5b58\u5668 \"* \"+ \"~ \u5b58\u53d6 GUI \u9009\u62e9\u6587\u672c\uff0c\u7cfb\u7edf\u526a\u5207\u677f\uff08clipboard\uff09\u53ef\u7528\u65f6\u4e0e\u5916\u90e8\u5e94\u7528\u4ea4\u4e92\uff0c \"* \"+ \"~ \u5206\u522b\u4e3a\u9f20\u6807\u9009\u4e2d\u533a\u57df\uff0c\u7cfb\u7edf\u526a\u5207\u677f\uff0c\u88ab\u62d6\u62fd\u7684\u6587\u672c \u9ed1\u6d1e\u5bc4\u5b58\u5668 \"_ \u7c7b\u4f3cLinux\u4e2d\u7684/dev/null\u6587\u4ef6\uff0c\u53ea\u8fdb\u4e0d\u51fa\uff0c\u53ef\u7528\u6765\u6ee4\u6389\u5f71\u54cd\u9ed8\u8ba4\u5bc4\u5b58\u5668\u7684\u5185\u5bb9 \u6700\u540e\u641c\u7d22\u5bc4\u5b58\u5668 \"/ \u7f13\u5b58\u4f7f\u7528\u8fc7\u7684\u6700\u540e\u7684\u641c\u7d22\u5185\u5bb9","title":"\u5bc4\u5b58\u5668"},{"location":"RH134/day1/#_5","text":"","title":"\u8ba1\u5212\u4efb\u52a1"},{"location":"RH134/day1/#at","text":"\u547d\u4ee4 \u4f5c\u7528 atq at -l \u67e5\u770b\u4efb\u52a1 at -c \u67e5\u770b\u4efb\u52a1\u6267\u884c\u7684\u547d\u4ee4 atrm at -r at -d \u5220\u9664\u4efb\u52a1 at -f \u4ece\u6587\u4ef6\u8bfb\u53d6\u4efb\u52a1\u800c\u4e0d\u662f\u6807\u51c6\u8f93\u5165 at -q \u6307\u5b9a\u4efb\u52a1\u961f\u5217\uff0c\u8303\u56f4 a-z\uff0c\u9ed8\u8ba4\u662f at -m \u4efb\u52a1\u5b8c\u6210\u540e\u53d1\u9001\u90ae\u4ef6 at -M \u4e0d\u53d1\u9001\u90ae\u4ef6 at now+1min at> echo a minute passed at> <EOT> #ctrl+d \u65f6\u95f4\u683c\u5f0f\uff1a /usr/share/doc/at-3.1.13/timespec * MINUTE HOUR * NOON MIDNIGHT TEATIME * AM PM * NOW * NEXT * TODAY TOMORROW * MINUTE HOUR DAY WEEK MONTH YEAR","title":"at \u4e00\u6b21\u6027\u8ba1\u5212\u4efb\u52a1"},{"location":"RH134/day1/#cron","text":"\u547d\u4ee4 \u4f5c\u7528 crontab -l \u5217\u51fa\u5f53\u524d\u7528\u6237\u8ba1\u5212\u4efb\u52a1 crontab -r \u5220\u9664\u5f53\u524d\u7528\u6237\u6240\u6709\u8ba1\u5212\u4efb\u52a1 crontab -e \u7f16\u8f91\u5f53\u524d\u7528\u6237\u8ba1\u5212\u4efb\u52a1 crontab -u \u4e3a\u5176\u4ed6\u7528\u6237\u521b\u5efa\u4efb\u52a1\uff08\u4ec5 root\uff09 crontab <filename> \u5220\u9664\u6240\u6709\u4efb\u52a1\uff0c\u4ece <filename> \u6587\u4ef6\u8bfb\u53d6\u4efb\u52a1\uff0c\u672a\u6307\u5b9a\u6587\u4ef6\u4ece stdin \u8bfb\u53d6 \u4efb\u52a1\u683c\u5f0f \u5206 \u65f6 \u65e5 \u6708 \u5468 COMMAND * \u8868\u793a\u59cb\u7ec8/\u65e0\u5173\u7d27\u8981 \u6570\u5b57\u6307\u5b9a\u5206\u949f\u6570\uff0c\u5c0f\u65f6\u6570\uff0c\u65e5\u671f\uff0c\u5de5\u4f5c\u65e5\u7b49\uff080 \u8868\u793a\u5468\u65e5\uff0c1 \u8868\u793a\u5468\u4e00... ...\uff0c7 \u4e5f\u8868\u793a\u5468\u65e5\uff09 \u53ef\u4ee5\u7528\u4e09\u4e2a\u5b57\u6bcd\u8868\u793a\u6708\u4efd\u6216\u5de5\u4f5c\u65e5 x-y \u8868\u793a\u8303\u56f4\uff0c\u4ece x \u5230 y \uff08\u542b\uff09 x,y \u8868\u793a\u5217\u8868\uff0c x \uff0c y \u4e3a\u5217\u8868\u4e2d\u5355\u4e2a\u5143\u7d20 */x \u8868\u793a\u65f6\u95f4\u95f4\u9694\u4e3a x \u547d\u4ee4\u4e2d\u672a\u8f6c\u4e49\u7684 % \u4f1a\u88ab\u4f5c\u4e3a\u65b0\u884c\u5904\u7406","title":"cron \u5468\u671f\u6027\u8ba1\u5212\u4efb\u52a1"},{"location":"RH134/day1/#systemd-tmpfile","text":"/etc/tmpfiles.d/*.conf #\u7ba1\u7406\u5458\u53ef\u4fee\u6539\u7684\u914d\u7f6e\u6587\u4ef6 /usr/lib/tmpfiles.d/*.conf #rpm\u8f6f\u4ef6\u5b89\u88c5\u7684\u65f6\u5019\uff0c\u81ea\u52a8\u66f4\u65b0\u7684\u914d\u7f6e\u6587\u4ef6\uff0c\u4e0d\u80fd\u66f4\u6539 /run/tmpfiles.d/*.conf #daemon\u5e94\u7528\u7a0b\u5e8f\u81ea\u5df1\u7ba1\u7406\u7684\u914d\u7f6e\u6587\u4ef6 \u914d\u7f6e\u6587\u4ef6\u683c\u5f0f \u7c7b\u578b \u8def\u5f84 \u6743\u9650 \u7528\u6237\uff08UID\uff09 \u7ec4\uff08GID\uff09 \u671f\u9650 \u53c2\u6570 \u521b\u5efa\u6587\u4ef6\u6216\u76ee\u5f55\u5e76\u8bbe\u7f6e\u76f8\u5e94\u7684 \u5c5e\u4e3b/\u5c5e\u7ec4\u3001\u6743\u9650\u3002 systemd-tmpfiles --create \u6e05\u7406\u6240\u6709\u8fc7\u671f\u7684\u6587\u4ef6\u4e0e\u76ee\u5f55\u3002 systemd-tmpfiles --clean \u5220\u9664 D, R \u6807\u8bb0\u7684\u76ee\u5f55\u4e2d\u7684\u5185\u5bb9\uff0c\u4ee5\u53ca r, R \u6807\u8bb0\u7684\u76ee\u5f55\u4e0e\u6587\u4ef6\u81ea\u8eab\u3002 systemd-tmpfiles --remove \u4e2d\u6587\u53c2\u8003\u624b\u518c\uff1a http://www.jinbuguo.com/systemd/tmpfiles.d.html","title":"systemd-tmpfile"},{"location":"RH134/day2/","text":"\u7b2c2\u5929 \u8fdb\u7a0b\u4f18\u5148\u7ea7 Linux \u5b9e\u73b0\u4e86 140 \u4e2a\u4f18\u5148\u7ea7\u8303\u56f4\uff0c\u53d6\u503c\u8303\u56f4\u662f\u4ece -100~39\uff0c\u8fd9\u4e2a\u503c\u8d8a\u5c0f\uff0c\u4f18\u5148\u7ea7\u8d8a\u9ad8 \u7528\u6237\u4e0d\u53ef\u63a7 priority\uff08PR\uff09\u503c\uff0c\u4f46\u53ef\u4ee5\u5b9a\u4e49 nice\uff08NI\uff09\u503c nice \u503c\u7684 -20~19\uff0c\u6620\u5c04\u5230\u5b9e\u9645\u7684\u4f18\u5148\u7ea7\u8303\u56f4\u662f 0~39 nice\uff08NI\uff09\u53cd\u5e94\u8fdb\u7a0b\u4f18\u5148\u7ea7\u72b6\u6001\u7684\u503c\uff0c\u5176\u53d6\u503c\u8303\u56f4\u662f -20 \u81f3 19\uff0c\u4e00\u5171 40 \u4e2a\u7ea7\u522b nice \u503c\u8d8a\u5c0f\uff0c\u8868\u793a\u8fdb\u7a0b\u201d\u4f18\u5148\u7ea7\u201d\u8d8a\u9ad8\uff0c\u800c\u503c\u8d8a\u5927\u4f18\u5148\u7ea7\u8d8a\u4f4e \u666e\u901a\u7528\u6237\u53ea\u80fd\u63d0\u5347\u4f7f\u7528\u6b63\u7684 nice \u7ea7\u522b\uff0c\u4e14\u53ea\u80fd\u63d0\u5347 nice \u7ea7\u522b\uff0c\u5373\u53ea\u80fd\u964d\u4f4e\u4f18\u5148\u7ea7 root \u7528\u6237\u53ef\u4ee5\u4f7f\u7528\u5b8c\u6574 nice \u7ea7\u522b nice -n NICE_LEVEL COMMAND \u547d\u4ee4\u7528\u4e8e\u65b0\u5efa\u8fdb\u7a0b\u65f6\u6307\u5b9a\u4f18\u5148\u7ea7 renice -n NICE_LEVEL PID \u4fee\u6539\u8fd0\u884c\u4e2d\u8fdb\u7a0b\u7684\u4f18\u5148\u7ea7\u3002 ACL \u8bbf\u95ee\u63a7\u5236\u5217\u8868 ACL \u5141\u8bb8\u5411\u6587\u4ef6\u5206\u914d\u7ec6\u5316\u6743\u9650\uff0c\u9664\u6807\u51c6\u7684\u5c5e\u4e3b\u3001\u5c5e\u7ec4\u548c\u5176\u4ed6\u6587\u4ef6\u6743\u9650\u5916\uff0c\u8fd8\u53ef\u4ee5\u7ed9\u7279\u5b9a\u7528\u6237\u548c\u7279\u5b9a\u7684\u7ec4\uff0c\u4ee5\u53ca\u7531 UID \u6216 GID \u786e\u5b9a\u7684\u7528\u6237\u548c\u7ec4\u6388\u4e88\u6743\u9650\u3002 ls -l \u5217\u51fa\u5185\u5bb9\u6743\u9650\u90e8\u5206\u540e\u9762\u4e3a + \u4ee3\u8868\u6b64\u6587\u4ef6\u6216\u76ee\u5f55\u6709 acl \u6743\u9650 getfacl \u7528\u4e8e\u67e5\u770b acl \u8be6\u7ec6\u4fe1\u606f setfacl \u7528\u4e8e\u4fee\u6539 acl \u6743\u9650 getfacl -R directory > bakfile \u53ef\u4ee5\u5c06\u8f93\u51fa\u7ed3\u679c\u4fdd\u5b58\u4e3a\u6587\u4ef6\uff0c -p \u9009\u9879\u4f7f\u7528\u7edd\u5bf9\u8def\u5f84 setfacl --restore=bakfile \u53ef\u4ee5\u8bfb\u53d6\u4fdd\u5b58\u7684\u6587\u4ef6\u8fdb\u884c\u6062\u590d \u6700\u5927\u6709\u6548\u6743\u9650 mask \u9650\u5236\u901a\u8fc7 acl \u8d4b\u4e88\u7279\u5b9a\u7528\u6237\u6216\u7ec4\u7684\u6743\u9650 setfacl \u9009\u9879 \u9009\u9879 \u4f5c\u7528 -m \u8bbe\u5b9a ACL \u6743\u9650 -x \u5220\u9664\u6307\u5b9a\u7684 ACL \u6743\u9650 -b \u5220\u9664\u6240\u6709\u7684 ACL \u6743\u9650 -d \u8bbe\u5b9a\u9ed8\u8ba4 ACL \u6743\u9650\uff0c\u53ea\u5bf9\u76ee\u5f55\u751f\u6548\uff0c\u76ee\u5f55\u4e2d\u65b0\u5efa\u7acb\u7684\u6587\u4ef6\u62e5\u6709\u6b64\u9ed8\u8ba4\u6743\u9650 -k \u5220\u9664\u9ed8\u8ba4 ACL \u6743\u9650 -R \u9012\u5f52\u8bbe\u5b9a ACL \u6743\u9650\uff0c ACL \u6743\u9650\u4f1a\u5bf9\u76ee\u5f55\u4e0b\u7684\u6240\u6709\u5b50\u6587\u4ef6\u751f\u6548 SELinux SELinux \u662f\u7528\u4e8e\u786e\u5b9a\u8fdb\u7a0b\u53ef\u4ee5\u8bbf\u95ee\u90a3\u4e9b\u6587\u4ef6\u3001\u76ee\u5f55\u548c\u7aef\u53e3\u7684\u4e00\u7ec4\u5b89\u5168\u89c4\u5219\u3002 \u6bcf\u4e2a\u6587\u4ef6\u3001\u8fdb\u7a0b\u548c\u7aef\u53e3\u90fd\u5177\u6709\u7279\u522b\u7684\u5b89\u5168\u6807\u7b7e\uff0c\u79f0\u4e3a SELinux \u4e0a\u4e0b\u6587\uff0c\u7528\u6765\u786e\u5b9a\u67d0\u4e2a\u8fdb\u7a0b\u80fd\u5426\u8bbf\u95ee\u6587\u4ef6\uff0c\u76ee\u5f55\u548c\u7aef\u53e3\u3002 SELinux \u6807\u7b7e\u5177\u6709\u591a\u79cd\u4e0a\u4e0b\u6587\uff1a\u7528\u6237\u3001\u89d2\u8272\u3001\u7c7b\u578b\u548c\u654f\u611f\u5ea6\uff0cSELinux \u76ee\u6807\u7b56\u7565\u6839\u636e\u7c7b\u578b\u4e0a\u4e0b\u6587\u5236\u5b9a\u89c4\u5219\u3002 1. \u6587\u4ef6\u76ee\u5f55\u4e0a\u4e0b\u6587 \u67e5\u770b\u6587\u95f4\u6216\u76ee\u5f55\u5f53\u524d\u7684\u4e0a\u4e0b\u6587 ls -Zd /PATH \u4fee\u6539\u6587\u4ef6\u6216\u76ee\u5f55\u5f53\u524d\u7684\u4e0a\u4e0b\u6587 chcon -R -t TYPT /PATH \u67e5\u770b SELinux \u5236\u5b9a\u7684\u6587\u4ef6\u6216\u76ee\u5f55\u4e0a\u4e0b\u6587\u7b56\u7565 semanage fcontext -l | grep TYPE \u5236\u5b9a\u65b0\u7684\u6587\u4ef6\u6216\u76ee\u5f55\u4e0a\u4e0b\u6587\u7b56\u7565 semanage fcontext -a -t TYPE '/PATH(/.*)?' \u5220\u9664\u4e0a\u4e0b\u6587\u5c06 -a \u6539\u4e3a -d \u6839\u636e SELinux \u7b56\u7565\u4fee\u6b63\u6587\u4ef6\u6216\u76ee\u5f55\u7684\u4e0a\u4e0b\u6587 restorecon -Rv /PATH 2.\u7aef\u53e3\u4e0a\u4e0b\u6587 \u67e5\u770b SELinux \u5236\u5b9a\u7684\u7aef\u53e3\u4e0a\u4e0b\u6587 semanage port -l | grep TYPE \u6dfb\u52a0\u7aef\u53e3\u5230\u7aef\u53e3\u4e0a\u4e0b\u6587 semanage port -a -t TYPE -p tcp/udp/icmp PORT \u5220\u9664\u7aef\u53e3\u5c06 -a \u6539\u4e3a -d 3.\u5e03\u5c14\u503c \u67e5\u770b SELinux \u5236\u5b9a\u7684\u5e03\u5c14\u503c semanage boolean -l | grep TYPE \u6216\u8005 getsebool -a | grep TYPE \u4fee\u6539 SElinux \u7684\u5e03\u5c14\u503c semanage boolean --modify TYPE --on \u6216\u8005 setsebool -P TYPE on on \u4e3a\u542f\u7528\u5e03\u5c14\u503c\uff0c off \u4e3a\u5173\u95ed\u5e03\u5c14\u503c","title":"\u7b2c2\u5929"},{"location":"RH134/day2/#2","text":"","title":"\u7b2c2\u5929"},{"location":"RH134/day2/#_1","text":"Linux \u5b9e\u73b0\u4e86 140 \u4e2a\u4f18\u5148\u7ea7\u8303\u56f4\uff0c\u53d6\u503c\u8303\u56f4\u662f\u4ece -100~39\uff0c\u8fd9\u4e2a\u503c\u8d8a\u5c0f\uff0c\u4f18\u5148\u7ea7\u8d8a\u9ad8 \u7528\u6237\u4e0d\u53ef\u63a7 priority\uff08PR\uff09\u503c\uff0c\u4f46\u53ef\u4ee5\u5b9a\u4e49 nice\uff08NI\uff09\u503c nice \u503c\u7684 -20~19\uff0c\u6620\u5c04\u5230\u5b9e\u9645\u7684\u4f18\u5148\u7ea7\u8303\u56f4\u662f 0~39 nice\uff08NI\uff09\u53cd\u5e94\u8fdb\u7a0b\u4f18\u5148\u7ea7\u72b6\u6001\u7684\u503c\uff0c\u5176\u53d6\u503c\u8303\u56f4\u662f -20 \u81f3 19\uff0c\u4e00\u5171 40 \u4e2a\u7ea7\u522b nice \u503c\u8d8a\u5c0f\uff0c\u8868\u793a\u8fdb\u7a0b\u201d\u4f18\u5148\u7ea7\u201d\u8d8a\u9ad8\uff0c\u800c\u503c\u8d8a\u5927\u4f18\u5148\u7ea7\u8d8a\u4f4e \u666e\u901a\u7528\u6237\u53ea\u80fd\u63d0\u5347\u4f7f\u7528\u6b63\u7684 nice \u7ea7\u522b\uff0c\u4e14\u53ea\u80fd\u63d0\u5347 nice \u7ea7\u522b\uff0c\u5373\u53ea\u80fd\u964d\u4f4e\u4f18\u5148\u7ea7 root \u7528\u6237\u53ef\u4ee5\u4f7f\u7528\u5b8c\u6574 nice \u7ea7\u522b nice -n NICE_LEVEL COMMAND \u547d\u4ee4\u7528\u4e8e\u65b0\u5efa\u8fdb\u7a0b\u65f6\u6307\u5b9a\u4f18\u5148\u7ea7 renice -n NICE_LEVEL PID \u4fee\u6539\u8fd0\u884c\u4e2d\u8fdb\u7a0b\u7684\u4f18\u5148\u7ea7\u3002","title":"\u8fdb\u7a0b\u4f18\u5148\u7ea7"},{"location":"RH134/day2/#acl","text":"ACL \u5141\u8bb8\u5411\u6587\u4ef6\u5206\u914d\u7ec6\u5316\u6743\u9650\uff0c\u9664\u6807\u51c6\u7684\u5c5e\u4e3b\u3001\u5c5e\u7ec4\u548c\u5176\u4ed6\u6587\u4ef6\u6743\u9650\u5916\uff0c\u8fd8\u53ef\u4ee5\u7ed9\u7279\u5b9a\u7528\u6237\u548c\u7279\u5b9a\u7684\u7ec4\uff0c\u4ee5\u53ca\u7531 UID \u6216 GID \u786e\u5b9a\u7684\u7528\u6237\u548c\u7ec4\u6388\u4e88\u6743\u9650\u3002 ls -l \u5217\u51fa\u5185\u5bb9\u6743\u9650\u90e8\u5206\u540e\u9762\u4e3a + \u4ee3\u8868\u6b64\u6587\u4ef6\u6216\u76ee\u5f55\u6709 acl \u6743\u9650 getfacl \u7528\u4e8e\u67e5\u770b acl \u8be6\u7ec6\u4fe1\u606f setfacl \u7528\u4e8e\u4fee\u6539 acl \u6743\u9650 getfacl -R directory > bakfile \u53ef\u4ee5\u5c06\u8f93\u51fa\u7ed3\u679c\u4fdd\u5b58\u4e3a\u6587\u4ef6\uff0c -p \u9009\u9879\u4f7f\u7528\u7edd\u5bf9\u8def\u5f84 setfacl --restore=bakfile \u53ef\u4ee5\u8bfb\u53d6\u4fdd\u5b58\u7684\u6587\u4ef6\u8fdb\u884c\u6062\u590d \u6700\u5927\u6709\u6548\u6743\u9650 mask \u9650\u5236\u901a\u8fc7 acl \u8d4b\u4e88\u7279\u5b9a\u7528\u6237\u6216\u7ec4\u7684\u6743\u9650 setfacl \u9009\u9879 \u9009\u9879 \u4f5c\u7528 -m \u8bbe\u5b9a ACL \u6743\u9650 -x \u5220\u9664\u6307\u5b9a\u7684 ACL \u6743\u9650 -b \u5220\u9664\u6240\u6709\u7684 ACL \u6743\u9650 -d \u8bbe\u5b9a\u9ed8\u8ba4 ACL \u6743\u9650\uff0c\u53ea\u5bf9\u76ee\u5f55\u751f\u6548\uff0c\u76ee\u5f55\u4e2d\u65b0\u5efa\u7acb\u7684\u6587\u4ef6\u62e5\u6709\u6b64\u9ed8\u8ba4\u6743\u9650 -k \u5220\u9664\u9ed8\u8ba4 ACL \u6743\u9650 -R \u9012\u5f52\u8bbe\u5b9a ACL \u6743\u9650\uff0c ACL \u6743\u9650\u4f1a\u5bf9\u76ee\u5f55\u4e0b\u7684\u6240\u6709\u5b50\u6587\u4ef6\u751f\u6548","title":"ACL \u8bbf\u95ee\u63a7\u5236\u5217\u8868"},{"location":"RH134/day2/#selinux","text":"SELinux \u662f\u7528\u4e8e\u786e\u5b9a\u8fdb\u7a0b\u53ef\u4ee5\u8bbf\u95ee\u90a3\u4e9b\u6587\u4ef6\u3001\u76ee\u5f55\u548c\u7aef\u53e3\u7684\u4e00\u7ec4\u5b89\u5168\u89c4\u5219\u3002 \u6bcf\u4e2a\u6587\u4ef6\u3001\u8fdb\u7a0b\u548c\u7aef\u53e3\u90fd\u5177\u6709\u7279\u522b\u7684\u5b89\u5168\u6807\u7b7e\uff0c\u79f0\u4e3a SELinux \u4e0a\u4e0b\u6587\uff0c\u7528\u6765\u786e\u5b9a\u67d0\u4e2a\u8fdb\u7a0b\u80fd\u5426\u8bbf\u95ee\u6587\u4ef6\uff0c\u76ee\u5f55\u548c\u7aef\u53e3\u3002 SELinux \u6807\u7b7e\u5177\u6709\u591a\u79cd\u4e0a\u4e0b\u6587\uff1a\u7528\u6237\u3001\u89d2\u8272\u3001\u7c7b\u578b\u548c\u654f\u611f\u5ea6\uff0cSELinux \u76ee\u6807\u7b56\u7565\u6839\u636e\u7c7b\u578b\u4e0a\u4e0b\u6587\u5236\u5b9a\u89c4\u5219\u3002","title":"SELinux"},{"location":"RH134/day2/#1","text":"","title":"1. \u6587\u4ef6\u76ee\u5f55\u4e0a\u4e0b\u6587"},{"location":"RH134/day2/#_2","text":"ls -Zd /PATH","title":"\u67e5\u770b\u6587\u95f4\u6216\u76ee\u5f55\u5f53\u524d\u7684\u4e0a\u4e0b\u6587"},{"location":"RH134/day2/#_3","text":"chcon -R -t TYPT /PATH","title":"\u4fee\u6539\u6587\u4ef6\u6216\u76ee\u5f55\u5f53\u524d\u7684\u4e0a\u4e0b\u6587"},{"location":"RH134/day2/#selinux_1","text":"semanage fcontext -l | grep TYPE","title":"\u67e5\u770b SELinux \u5236\u5b9a\u7684\u6587\u4ef6\u6216\u76ee\u5f55\u4e0a\u4e0b\u6587\u7b56\u7565"},{"location":"RH134/day2/#_4","text":"semanage fcontext -a -t TYPE '/PATH(/.*)?' \u5220\u9664\u4e0a\u4e0b\u6587\u5c06 -a \u6539\u4e3a -d","title":"\u5236\u5b9a\u65b0\u7684\u6587\u4ef6\u6216\u76ee\u5f55\u4e0a\u4e0b\u6587\u7b56\u7565"},{"location":"RH134/day2/#selinux_2","text":"restorecon -Rv /PATH","title":"\u6839\u636e SELinux \u7b56\u7565\u4fee\u6b63\u6587\u4ef6\u6216\u76ee\u5f55\u7684\u4e0a\u4e0b\u6587"},{"location":"RH134/day2/#2_1","text":"","title":"2.\u7aef\u53e3\u4e0a\u4e0b\u6587"},{"location":"RH134/day2/#selinux_3","text":"semanage port -l | grep TYPE","title":"\u67e5\u770b SELinux \u5236\u5b9a\u7684\u7aef\u53e3\u4e0a\u4e0b\u6587"},{"location":"RH134/day2/#_5","text":"semanage port -a -t TYPE -p tcp/udp/icmp PORT \u5220\u9664\u7aef\u53e3\u5c06 -a \u6539\u4e3a -d","title":"\u6dfb\u52a0\u7aef\u53e3\u5230\u7aef\u53e3\u4e0a\u4e0b\u6587"},{"location":"RH134/day2/#3","text":"","title":"3.\u5e03\u5c14\u503c"},{"location":"RH134/day2/#selinux_4","text":"semanage boolean -l | grep TYPE \u6216\u8005 getsebool -a | grep TYPE","title":"\u67e5\u770b SELinux \u5236\u5b9a\u7684\u5e03\u5c14\u503c"},{"location":"RH134/day2/#selinux_5","text":"semanage boolean --modify TYPE --on \u6216\u8005 setsebool -P TYPE on on \u4e3a\u542f\u7528\u5e03\u5c14\u503c\uff0c off \u4e3a\u5173\u95ed\u5e03\u5c14\u503c","title":"\u4fee\u6539 SElinux \u7684\u5e03\u5c14\u503c"},{"location":"RH134/day3/","text":"\u7b2c3\u5929 \u5206\u533a\u7ba1\u7406 MBR \u5206\u533a\u65b9\u6848\uff08BIOS \u5f15\u5bfc\uff09 \u5206\u533a\u5de5\u5177 fdisk \u53ef\u4ee5\u5f15\u5bfc 32 \u4f4d \u6216 64 \u4f4d\u7684\u7cfb\u7edf \u4e3b\u5f15\u5bfc\u8bb0\u5f55\u5305\u542b 64 \u5b57\u8282\u786c\u76d8\u5206\u533a\u8868\uff0c\u6bcf\u4e2a\u5206\u533a\u4fe1\u606f\u9700\u8981 16 \u5b57\u8282 \u6700\u591a 4 \u4e2a\u4e3b\u5206\u533a\uff0c\u53ef\u4ee5\u628a\u4e00\u4e2a\u4e3b\u5206\u533a\u4f5c\u4e3a\u6269\u5c55\u5206\u533a\uff0c\u6269\u5c55\u5206\u533a\u53ef\u5206\u4e3a\u82e5\u5e72\u903b\u8f91\u5206\u533a \u4e3b\u5206\u533a\u53ef\u4ee5\u6fc0\u6d3b\u6210\u4e3a\u6d3b\u52a8\u5206\u533a\uff0c\u7528\u6765\u5f15\u5bfc\u7cfb\u7edf \u6269\u5c55\u5206\u533a\u4e0d\u80fd\u76f4\u63a5\u4f7f\u7528\uff0c\u5fc5\u987b\u5206\u4e3a\u903b\u8f91\u5206\u533a\u624d\u53ef\u4ee5\u4f7f\u7528 2T \u4ee5\u4e0a\u786c\u76d8\u4e0d\u9002\u7528 GPT \u5206\u533a\u65b9\u6848\uff08UEFI \u5f15\u5bfc\uff09 \u5206\u533a\u5de5\u5177 gdisk \u53ea\u80fd\u5f15\u5bfc 64 \u4f4d\u7cfb\u7edf \u6700\u591a 128 \u4e2a\u5206\u533a\uff0c\u5168\u662f\u4e3b\u5206\u533a \u6700\u5927\u652f\u6301 18 EB\uff0c1EB = 1024PB\uff0c1PB =1024TB \u683c\u5f0f\u5316\u3001\u6302\u8f7d lsblk \u67e5\u770b\u5757\u8bbe\u5907 blkid \u67e5\u770b\u5757\u8bbe\u5907 UUID\uff08\u5224\u65ad\u662f\u5426\u6709\u6587\u4ef6\u7cfb\u7edf\uff09 mkfs.FileSystem \u683c\u5f0f\u5316\u6307\u5b9a\u5757\u8bbe\u5907\uff0c\u4e3a\u5176\u6dfb\u52a0\u6587\u4ef6\u7cfb\u7edf mount \u7528\u4e8e\u4e34\u65f6\u6302\u8f7d\u6307\u5b9a\u6587\u4ef6\u7cfb\u7edf\uff0c umount \u7528\u4e8e\u5378\u8f7d\u6587\u4ef6\u7cfb\u7edf mount -a \u4f1a\u6839\u636e /etc/fstab \u6587\u4ef6\u6302\u8f7d\u6240\u6709\u6587\u4ef6\u7cfb\u7edf /etc/fstab \u6587\u4ef6\u6dfb\u52a0\u5bf9\u5e94\u6587\u4ef6\u7cfb\u7edf\u53ef\u5b9e\u73b0\u5f00\u673a\u81ea\u52a8\u6302\u8f7d \u4f7f\u7528 autofs \u53ef\u5b9e\u73b0\u6309\u9700\u81ea\u52a8\u6302\u8f7d autofs yum -y install autofs vim /etc/auto.master mnt\uff08\u6302\u8f7d\u76ee\u5f55\u4e0a\u7ea7\u76ee\u5f55\uff09 /etc/automount\uff08\u6620\u5c04\u6587\u4ef6\uff09 vim /etc/automount \u6302\u8f7d\u76ee\u5f55 -fstype=\u6587\u4ef6\u7cfb\u7edf\u7c7b\u578b :/dev/sd... systemctl restart autofs systemctl enable autofs SWAP \u4ea4\u6362\u7a7a\u95f4 \u4ea4\u6362\u7a7a\u95f4\u7528\u4e8e\u6269\u5145\u7cfb\u7edf RAM\uff0c\u5e94\u5c06\u4ea4\u6362\u7a7a\u95f4\u4f7f\u7528\u4fdd\u6301\u6700\u4f4e\u9650\u5ea6 \u4ea4\u6362\u7a7a\u95f4\u7684\u6587\u4ef6\u7cfb\u7edf\u4e3a swap\uff0c\u683c\u5f0f\u5316\u4f7f\u7528 mkswap \u547d\u4ee4 swapon \u7528\u4e8e\u4e34\u65f6\u6fc0\u6d3b\u4ea4\u6362\u7a7a\u95f4 swapon -a \u4f1a\u6839\u636e /etc/fstab \u6587\u4ef6\u6fc0\u6d3b\u6240\u6709\u4ea4\u6362\u7a7a\u95f4 swapon -s \u67e5\u770b\u76ee\u524d\u6fc0\u6d3b\u7684\u4ea4\u6362\u7a7a\u95f4 swapoff \u7528\u4e8e\u53d6\u6d88\u6307\u5b9a\u4ea4\u6362\u7a7a\u95f4 /etc/fstab \u6587\u4ef6\u6dfb\u52a0\u5bf9\u5e94\u4ea4\u6362\u7a7a\u95f4\u53ef\u5b9e\u73b0\u5f00\u673a\u81ea\u52a8\u6fc0\u6d3b\uff0c\u6302\u8f7d\u70b9\u4e3a swap \u903b\u8f91\u5377 \u6545\u969c\u6392\u9664 \u7cfb\u7edf\u542f\u52a8 BIOS/UEFI \u786c\u4ef6\u81ea\u68c0 \u542f\u52a8\u52a0\u8f7d\u5668\uff08grub2\uff09 kernel \u548c initramfs \u521d\u59cb\u5316 systemd \u6267\u884c\u9ed8\u8ba4 target \u90e8\u5206 target \u76ee\u6807 \u7528\u9014 graphical.target \u56fe\u5f62\u5316\u754c\u9762 multi-user.target \u5b57\u7b26\u884c\u754c\u9762 rescue.target \u57fa\u672c\u7cfb\u7edf\u521d\u59cb\u5316\u5b8c\u6210 emergency.target initramfs \u56de\u8f6c\u5b8c\u6210\uff0c\u7cfb\u7edf\u53ea\u8bfb\u65b9\u5f0f\u6302\u8f7d\u4e0e / \u4e0a \u91cd\u7f6e root \u5bc6\u7801 \u5f00\u673a\u542f\u52a8\u83dc\u5355\u6309e linux16 \u7ed3\u5c3e\u52a0 rd.break Ctrl+x \u6267\u884c mount -o remount,rw /sysroot chroot /sysroot echo redhat | passwd --stdin root touch /.autorelabel exit exit /etc/fstab \u6587\u4ef6\u6545\u969c \u5f00\u673a\u542f\u52a8\u83dc\u5355\u6309e linux16 \u7ed3\u5c3e\u52a0 systemd.unit=emergency.target Ctrl+x \u6267\u884c \u8f93\u5165 root \u5bc6\u7801 mount -o remount,rw / vim /etc/fstab \u4fee\u6b63\u9519\u8bef reboot /boot/grub2/grub.cfg \u6545\u969c \u4f7f\u7528\u5916\u90e8\u4ecb\u8d28\u5f15\u5bfc\u5b89\u88c5\u955c\u50cf \u9009\u62e9 Troubleshooting \u9009\u62e9 Rescue a CentOS system \u9009\u62e9 1\uff09Continue chroot /mnt/sysimage grub2-mkconfig > /boot/grub2/grub.cfg exit exit /boot \u8bef\u5220 \u4f7f\u7528\u5916\u90e8\u4ecb\u8d28\u5f15\u5bfc\u5b89\u88c5\u955c\u50cf \u9009\u62e9 Troubleshooting \u9009\u62e9 Rescue a CentOS system \u9009\u62e9 1\uff09Continue chroot /mnt/sysimage \u91cd\u65b0\u5b89\u88c5 kernel \u5305\uff08yum reinstall kernel \u6216 rpm --reinstall -vh /PATH_TO_CD/Packages/kernel*.rpm\uff09 grub2-install /dev/sda grub2-mkconfig > /boot/grub2/grub.cfg exit exit","title":"\u7b2c3\u5929"},{"location":"RH134/day3/#3","text":"","title":"\u7b2c3\u5929"},{"location":"RH134/day3/#_1","text":"","title":"\u5206\u533a\u7ba1\u7406"},{"location":"RH134/day3/#mbr-bios","text":"\u5206\u533a\u5de5\u5177 fdisk \u53ef\u4ee5\u5f15\u5bfc 32 \u4f4d \u6216 64 \u4f4d\u7684\u7cfb\u7edf \u4e3b\u5f15\u5bfc\u8bb0\u5f55\u5305\u542b 64 \u5b57\u8282\u786c\u76d8\u5206\u533a\u8868\uff0c\u6bcf\u4e2a\u5206\u533a\u4fe1\u606f\u9700\u8981 16 \u5b57\u8282 \u6700\u591a 4 \u4e2a\u4e3b\u5206\u533a\uff0c\u53ef\u4ee5\u628a\u4e00\u4e2a\u4e3b\u5206\u533a\u4f5c\u4e3a\u6269\u5c55\u5206\u533a\uff0c\u6269\u5c55\u5206\u533a\u53ef\u5206\u4e3a\u82e5\u5e72\u903b\u8f91\u5206\u533a \u4e3b\u5206\u533a\u53ef\u4ee5\u6fc0\u6d3b\u6210\u4e3a\u6d3b\u52a8\u5206\u533a\uff0c\u7528\u6765\u5f15\u5bfc\u7cfb\u7edf \u6269\u5c55\u5206\u533a\u4e0d\u80fd\u76f4\u63a5\u4f7f\u7528\uff0c\u5fc5\u987b\u5206\u4e3a\u903b\u8f91\u5206\u533a\u624d\u53ef\u4ee5\u4f7f\u7528 2T \u4ee5\u4e0a\u786c\u76d8\u4e0d\u9002\u7528","title":"MBR \u5206\u533a\u65b9\u6848\uff08BIOS \u5f15\u5bfc\uff09"},{"location":"RH134/day3/#gpt-uefi","text":"\u5206\u533a\u5de5\u5177 gdisk \u53ea\u80fd\u5f15\u5bfc 64 \u4f4d\u7cfb\u7edf \u6700\u591a 128 \u4e2a\u5206\u533a\uff0c\u5168\u662f\u4e3b\u5206\u533a \u6700\u5927\u652f\u6301 18 EB\uff0c1EB = 1024PB\uff0c1PB =1024TB","title":"GPT \u5206\u533a\u65b9\u6848\uff08UEFI \u5f15\u5bfc\uff09"},{"location":"RH134/day3/#_2","text":"lsblk \u67e5\u770b\u5757\u8bbe\u5907 blkid \u67e5\u770b\u5757\u8bbe\u5907 UUID\uff08\u5224\u65ad\u662f\u5426\u6709\u6587\u4ef6\u7cfb\u7edf\uff09 mkfs.FileSystem \u683c\u5f0f\u5316\u6307\u5b9a\u5757\u8bbe\u5907\uff0c\u4e3a\u5176\u6dfb\u52a0\u6587\u4ef6\u7cfb\u7edf mount \u7528\u4e8e\u4e34\u65f6\u6302\u8f7d\u6307\u5b9a\u6587\u4ef6\u7cfb\u7edf\uff0c umount \u7528\u4e8e\u5378\u8f7d\u6587\u4ef6\u7cfb\u7edf mount -a \u4f1a\u6839\u636e /etc/fstab \u6587\u4ef6\u6302\u8f7d\u6240\u6709\u6587\u4ef6\u7cfb\u7edf /etc/fstab \u6587\u4ef6\u6dfb\u52a0\u5bf9\u5e94\u6587\u4ef6\u7cfb\u7edf\u53ef\u5b9e\u73b0\u5f00\u673a\u81ea\u52a8\u6302\u8f7d \u4f7f\u7528 autofs \u53ef\u5b9e\u73b0\u6309\u9700\u81ea\u52a8\u6302\u8f7d","title":"\u683c\u5f0f\u5316\u3001\u6302\u8f7d"},{"location":"RH134/day3/#autofs","text":"yum -y install autofs vim /etc/auto.master mnt\uff08\u6302\u8f7d\u76ee\u5f55\u4e0a\u7ea7\u76ee\u5f55\uff09 /etc/automount\uff08\u6620\u5c04\u6587\u4ef6\uff09 vim /etc/automount \u6302\u8f7d\u76ee\u5f55 -fstype=\u6587\u4ef6\u7cfb\u7edf\u7c7b\u578b :/dev/sd... systemctl restart autofs systemctl enable autofs","title":"autofs"},{"location":"RH134/day3/#swap","text":"\u4ea4\u6362\u7a7a\u95f4\u7528\u4e8e\u6269\u5145\u7cfb\u7edf RAM\uff0c\u5e94\u5c06\u4ea4\u6362\u7a7a\u95f4\u4f7f\u7528\u4fdd\u6301\u6700\u4f4e\u9650\u5ea6 \u4ea4\u6362\u7a7a\u95f4\u7684\u6587\u4ef6\u7cfb\u7edf\u4e3a swap\uff0c\u683c\u5f0f\u5316\u4f7f\u7528 mkswap \u547d\u4ee4 swapon \u7528\u4e8e\u4e34\u65f6\u6fc0\u6d3b\u4ea4\u6362\u7a7a\u95f4 swapon -a \u4f1a\u6839\u636e /etc/fstab \u6587\u4ef6\u6fc0\u6d3b\u6240\u6709\u4ea4\u6362\u7a7a\u95f4 swapon -s \u67e5\u770b\u76ee\u524d\u6fc0\u6d3b\u7684\u4ea4\u6362\u7a7a\u95f4 swapoff \u7528\u4e8e\u53d6\u6d88\u6307\u5b9a\u4ea4\u6362\u7a7a\u95f4 /etc/fstab \u6587\u4ef6\u6dfb\u52a0\u5bf9\u5e94\u4ea4\u6362\u7a7a\u95f4\u53ef\u5b9e\u73b0\u5f00\u673a\u81ea\u52a8\u6fc0\u6d3b\uff0c\u6302\u8f7d\u70b9\u4e3a swap","title":"SWAP \u4ea4\u6362\u7a7a\u95f4"},{"location":"RH134/day3/#_3","text":"","title":"\u903b\u8f91\u5377"},{"location":"RH134/day3/#_4","text":"","title":"\u6545\u969c\u6392\u9664"},{"location":"RH134/day3/#_5","text":"BIOS/UEFI \u786c\u4ef6\u81ea\u68c0 \u542f\u52a8\u52a0\u8f7d\u5668\uff08grub2\uff09 kernel \u548c initramfs \u521d\u59cb\u5316 systemd \u6267\u884c\u9ed8\u8ba4 target","title":"\u7cfb\u7edf\u542f\u52a8"},{"location":"RH134/day3/#target","text":"\u76ee\u6807 \u7528\u9014 graphical.target \u56fe\u5f62\u5316\u754c\u9762 multi-user.target \u5b57\u7b26\u884c\u754c\u9762 rescue.target \u57fa\u672c\u7cfb\u7edf\u521d\u59cb\u5316\u5b8c\u6210 emergency.target initramfs \u56de\u8f6c\u5b8c\u6210\uff0c\u7cfb\u7edf\u53ea\u8bfb\u65b9\u5f0f\u6302\u8f7d\u4e0e / \u4e0a","title":"\u90e8\u5206 target"},{"location":"RH134/day3/#root","text":"\u5f00\u673a\u542f\u52a8\u83dc\u5355\u6309e linux16 \u7ed3\u5c3e\u52a0 rd.break Ctrl+x \u6267\u884c mount -o remount,rw /sysroot chroot /sysroot echo redhat | passwd --stdin root touch /.autorelabel exit exit","title":"\u91cd\u7f6e root \u5bc6\u7801"},{"location":"RH134/day3/#etcfstab","text":"\u5f00\u673a\u542f\u52a8\u83dc\u5355\u6309e linux16 \u7ed3\u5c3e\u52a0 systemd.unit=emergency.target Ctrl+x \u6267\u884c \u8f93\u5165 root \u5bc6\u7801 mount -o remount,rw / vim /etc/fstab \u4fee\u6b63\u9519\u8bef reboot","title":"/etc/fstab \u6587\u4ef6\u6545\u969c"},{"location":"RH134/day3/#bootgrub2grubcfg","text":"\u4f7f\u7528\u5916\u90e8\u4ecb\u8d28\u5f15\u5bfc\u5b89\u88c5\u955c\u50cf \u9009\u62e9 Troubleshooting \u9009\u62e9 Rescue a CentOS system \u9009\u62e9 1\uff09Continue chroot /mnt/sysimage grub2-mkconfig > /boot/grub2/grub.cfg exit exit","title":"/boot/grub2/grub.cfg \u6545\u969c"},{"location":"RH134/day3/#boot","text":"\u4f7f\u7528\u5916\u90e8\u4ecb\u8d28\u5f15\u5bfc\u5b89\u88c5\u955c\u50cf \u9009\u62e9 Troubleshooting \u9009\u62e9 Rescue a CentOS system \u9009\u62e9 1\uff09Continue chroot /mnt/sysimage \u91cd\u65b0\u5b89\u88c5 kernel \u5305\uff08yum reinstall kernel \u6216 rpm --reinstall -vh /PATH_TO_CD/Packages/kernel*.rpm\uff09 grub2-install /dev/sda grub2-mkconfig > /boot/grub2/grub.cfg exit exit","title":"/boot \u8bef\u5220"},{"location":"RH134/day4/","text":"\u7b2c4\u5929 Firewalld \u9632\u706b\u5899 \u67e5\u770b\u89c4\u5219 # \u67e5\u770b\u6240\u6709\u533a\u57df firewall-cmd --get-zones # \u67e5\u770b\u9ed8\u8ba4\u533a\u57df firewall-cmd --get-default-zone # \u4fee\u6539\u9ed8\u8ba4\u533a\u57df firewall-cmd --set-default-zone=ZONE_NAME # \u67e5\u770b\u9ed8\u8ba4\u533a\u57df\u89c4\u5219 firewall-cmd --list-all # \u67e5\u770b\u6307\u5b9a\u533a\u57df\u89c4\u5219 firewall-cmd --list-all --zone=ZONE_NAME # \u67e5\u770b\u6240\u6709\u533a\u57df\u89c4\u5219 firewall-cmd --list-all-zones # \u67e5\u770b\u6240\u6709\u9632\u706b\u5899\u53ef\u5f00\u653e\u7684\u670d\u52a1 firewall-cmd --get-services \u6dfb\u52a0\u89c4\u5219 \u8fd0\u884c\u65f6\u751f\u6548 # \u6dfb\u52a0\u7aef\u53e3\u5230\u6307\u5b9a\u533a\u57df firewall-cmd --add-port=PORT/PROTOCOL --zone=ZONE_NAME # \u6dfb\u52a0\u670d\u52a1\u5230\u6307\u5b9a\u533a\u57df firewall-cmd --add-service=SERVICE_NAME --zone=ZONE_NAME # \u6dfb\u52a0\u7f51\u7edc\u5230\u6307\u5b9a\u533a\u57df firewall-cmd --add-source=IP_ADDR/NETMASK --zone=ZONE_NAME # \u6dfb\u52a0\u7f51\u5361\u8bbe\u5907\u5230\u6307\u5b9a\u533a\u57df firewall-cmd --add-interface=DEVICE --zone=ZONE_NAME # \u6dfb\u52a0\u5bcc\u89c4\u5219 firewall-cmd --add-rich-rule='rule FIREWALLD.RICHLANGUAGE' \u5e38\u7528\u5bcc\u89c4\u5219 family= \u534f\u8bae\u7c07 ipv4/ipv6 source address= \u6e90\u5730\u5740 service name= \u670d\u52a1\u540d port port= protocol= \u534f\u8bae\u52a0\u7aef\u53e3\u53f7 fordward-port port= protocol= \u8f6c\u53d1\u7aef\u53e3 to-port= \u76ee\u6807\u7aef\u53e3 \u91cd\u8f7d\u540e\u751f\u6548 firewall-cmd --permanent --add-port=PORT/PROTOCOL --zone=ZONE_NAME --zone=ZONE_NAME firewall-cmd --permanent --add-service=SERVICE_NAME --zone=ZONE_NAME --zone=ZONE_NAME firewall-cmd --permanent --add-source=IP_ADDR/NETMASK --zone=ZONE_NAME --zone=ZONE_NAME firewall-cmd --permanent --add-interface=DEVICE --zone=ZONE_NAME --zone=ZONE_NAME firewall-cmd --permanent --add-rich-rule='rule FIREWALLD.RICHLANGUAGE'","title":"\u7b2c4\u5929"},{"location":"RH134/day4/#4","text":"","title":"\u7b2c4\u5929"},{"location":"RH134/day4/#firewalld","text":"","title":"Firewalld \u9632\u706b\u5899"},{"location":"RH134/day4/#_1","text":"# \u67e5\u770b\u6240\u6709\u533a\u57df firewall-cmd --get-zones # \u67e5\u770b\u9ed8\u8ba4\u533a\u57df firewall-cmd --get-default-zone # \u4fee\u6539\u9ed8\u8ba4\u533a\u57df firewall-cmd --set-default-zone=ZONE_NAME # \u67e5\u770b\u9ed8\u8ba4\u533a\u57df\u89c4\u5219 firewall-cmd --list-all # \u67e5\u770b\u6307\u5b9a\u533a\u57df\u89c4\u5219 firewall-cmd --list-all --zone=ZONE_NAME # \u67e5\u770b\u6240\u6709\u533a\u57df\u89c4\u5219 firewall-cmd --list-all-zones # \u67e5\u770b\u6240\u6709\u9632\u706b\u5899\u53ef\u5f00\u653e\u7684\u670d\u52a1 firewall-cmd --get-services","title":"\u67e5\u770b\u89c4\u5219"},{"location":"RH134/day4/#_2","text":"","title":"\u6dfb\u52a0\u89c4\u5219"},{"location":"RH134/day4/#_3","text":"# \u6dfb\u52a0\u7aef\u53e3\u5230\u6307\u5b9a\u533a\u57df firewall-cmd --add-port=PORT/PROTOCOL --zone=ZONE_NAME # \u6dfb\u52a0\u670d\u52a1\u5230\u6307\u5b9a\u533a\u57df firewall-cmd --add-service=SERVICE_NAME --zone=ZONE_NAME # \u6dfb\u52a0\u7f51\u7edc\u5230\u6307\u5b9a\u533a\u57df firewall-cmd --add-source=IP_ADDR/NETMASK --zone=ZONE_NAME # \u6dfb\u52a0\u7f51\u5361\u8bbe\u5907\u5230\u6307\u5b9a\u533a\u57df firewall-cmd --add-interface=DEVICE --zone=ZONE_NAME # \u6dfb\u52a0\u5bcc\u89c4\u5219 firewall-cmd --add-rich-rule='rule FIREWALLD.RICHLANGUAGE'","title":"\u8fd0\u884c\u65f6\u751f\u6548"},{"location":"RH134/day4/#_4","text":"family= \u534f\u8bae\u7c07 ipv4/ipv6 source address= \u6e90\u5730\u5740 service name= \u670d\u52a1\u540d port port= protocol= \u534f\u8bae\u52a0\u7aef\u53e3\u53f7 fordward-port port= protocol= \u8f6c\u53d1\u7aef\u53e3 to-port= \u76ee\u6807\u7aef\u53e3","title":"\u5e38\u7528\u5bcc\u89c4\u5219"},{"location":"RH134/day4/#_5","text":"firewall-cmd --permanent --add-port=PORT/PROTOCOL --zone=ZONE_NAME --zone=ZONE_NAME firewall-cmd --permanent --add-service=SERVICE_NAME --zone=ZONE_NAME --zone=ZONE_NAME firewall-cmd --permanent --add-source=IP_ADDR/NETMASK --zone=ZONE_NAME --zone=ZONE_NAME firewall-cmd --permanent --add-interface=DEVICE --zone=ZONE_NAME --zone=ZONE_NAME firewall-cmd --permanent --add-rich-rule='rule FIREWALLD.RICHLANGUAGE'","title":"\u91cd\u8f7d\u540e\u751f\u6548"},{"location":"RH134/day5/","text":"\u7b2c5\u5929 PXE & Kickstart \u6279\u91cf\u5b89\u88c5 PXE Client\u5411DHCP\u53d1\u9001\u8bf7\u6c42 PXE Client\u4ece\u81ea\u5df1\u7684PXE\u7f51\u5361\u542f\u52a8\uff0c\u901a\u8fc7PXE BootROM(\u81ea\u542f\u52a8\u82af\u7247)\u4f1a\u4ee5UDP(\u7b80\u5355\u7528\u6237\u6570\u636e\u62a5\u534f\u8bae)\u53d1\u9001\u4e00\u4e2a\u5e7f\u64ad\u8bf7\u6c42\uff0c\u5411\u672c\u7f51\u7edc\u4e2d\u7684DHCP\u670d\u52a1\u5668\u7d22\u53d6IP\u3002 DHCP\u670d\u52a1\u5668\u63d0\u4f9b\u4fe1\u606f DHCP\u670d\u52a1\u5668\u6536\u5230\u5ba2\u6237\u7aef\u7684\u8bf7\u6c42\uff0c\u9a8c\u8bc1\u662f\u5426\u6765\u81f3\u5408\u6cd5\u7684PXE Client\u7684\u8bf7\u6c42\uff0c\u9a8c\u8bc1\u901a\u8fc7\u5b83\u5c06\u7ed9\u5ba2\u6237\u7aef\u4e00\u4e2a\u201c\u63d0\u4f9b\u201d\u54cd\u5e94\uff0c\u8fd9\u4e2a\u201c\u63d0\u4f9b\u201d\u54cd\u5e94\u4e2d\u5305\u542b\u4e86\u4e3a\u5ba2\u6237\u7aef\u5206\u914d\u7684IP\u5730\u5740\u3001pxelinux\u542f\u52a8\u7a0b\u5e8f(TFTP)\u4f4d\u7f6e\uff0c\u4ee5\u53ca\u914d\u7f6e\u6587\u4ef6\u6240\u5728\u4f4d\u7f6e\u3002 PXE\u5ba2\u6237\u7aef\u8bf7\u6c42\u4e0b\u8f7d\u542f\u52a8\u6587\u4ef6 \u5ba2\u6237\u7aef\u6536\u5230\u670d\u52a1\u5668\u7684\u201c\u56de\u5e94\u201d\u540e\uff0c\u4f1a\u56de\u5e94\u4e00\u4e2a\u5e27\uff0c\u4ee5\u8bf7\u6c42\u4f20\u9001\u542f\u52a8\u6240\u9700\u6587\u4ef6\u3002\u8fd9\u4e9b\u542f\u52a8\u6587\u4ef6\u5305\u62ec\uff1apxelinux.0\u3001pxelinux.cfg/default\u3001vmlinuz\u3001initrd.img\u7b49\u6587\u4ef6\u3002 Boot Server\u54cd\u5e94\u5ba2\u6237\u7aef\u8bf7\u6c42\u5e76\u4f20\u9001\u6587\u4ef6 \u5f53\u670d\u52a1\u5668\u6536\u5230\u5ba2\u6237\u7aef\u7684\u8bf7\u6c42\u540e\uff0c\u4ed6\u4eec\u4e4b\u95f4\u4e4b\u540e\u5c06\u6709\u66f4\u591a\u7684\u4fe1\u606f\u5728\u5ba2\u6237\u7aef\u4e0e\u670d\u52a1\u5668\u4e4b\u95f4\u4f5c\u5e94\u7b54, \u7528\u4ee5\u51b3\u5b9a\u542f\u52a8\u53c2\u6570\u3002BootROM\u7531TFTP\u901a\u8baf\u534f\u8bae\u4eceBoot Server\u4e0b\u8f7d\u542f\u52a8\u5b89\u88c5\u7a0b\u5e8f\u6240\u5fc5\u987b\u7684\u6587\u4ef6(pxelinux.0\u3001pxelinux.cfg/default)\u3002default\u6587\u4ef6\u4e0b\u8f7d\u5b8c\u6210\u540e\uff0c\u4f1a\u6839\u636e\u8be5\u6587\u4ef6\u4e2d\u5b9a\u4e49\u7684\u5f15\u5bfc\u987a\u5e8f\uff0c\u542f\u52a8Linux\u5b89\u88c5\u7a0b\u5e8f\u7684\u5f15\u5bfc\u5185\u6838\u3002 \u8bf7\u6c42\u4e0b\u8f7d\u81ea\u52a8\u5e94\u7b54\u6587\u4ef6 \u5ba2\u6237\u7aef\u901a\u8fc7pxelinux.cfg/default\u6587\u4ef6\u6210\u529f\u7684\u5f15\u5bfcLinux\u5b89\u88c5\u5185\u6838\u540e\uff0c\u5b89\u88c5\u7a0b\u5e8f\u9996\u5148\u5fc5\u987b\u786e\u5b9a\u4f60\u901a\u8fc7\u4ec0\u4e48\u5b89\u88c5\u4ecb\u8d28\u6765\u5b89\u88c5linux\uff0c\u5982\u679c\u662f\u901a\u8fc7\u7f51\u7edc\u5b89\u88c5(NFS, FTP, HTTP)\uff0c\u5219\u4f1a\u5728\u8fd9\u4e2a\u65f6\u5019\u521d\u59cb\u5316\u7f51\u7edc\uff0c\u5e76\u5b9a\u4f4d\u5b89\u88c5\u6e90\u4f4d\u7f6e\u3002\u63a5\u7740\u4f1a\u8bfb\u53d6default\u6587\u4ef6\u4e2d\u6307\u5b9a\u7684\u81ea\u52a8\u5e94\u7b54\u6587\u4ef6ks.cfg\u6240\u5728\u4f4d\u7f6e\uff0c\u6839\u636e\u8be5\u4f4d\u7f6e\u8bf7\u6c42\u4e0b\u8f7d\u8be5\u6587\u4ef6\u3002 \u8fd9\u91cc\u6709\u4e2a\u95ee\u9898\uff0c\u5728\u7b2c2\u6b65\u548c\u7b2c5\u6b65\u521d\u59cb\u53162\u6b21\u7f51\u7edc\u4e86\uff0c\u8fd9\u662f\u7531\u4e8ePXE\u83b7\u53d6\u7684\u662f\u5b89\u88c5\u7528\u7684\u5185\u6838\u4ee5\u53ca\u5b89\u88c5\u7a0b\u5e8f\u7b49\uff0c\u800c\u5b89\u88c5\u7a0b\u5e8f\u8981\u83b7\u53d6\u7684\u662f\u5b89\u88c5\u7cfb\u7edf\u6240\u9700\u7684\u4e8c\u8fdb\u5236\u5305\u4ee5\u53ca\u914d\u7f6e\u6587\u4ef6\u3002\u56e0\u6b64PXE\u6a21\u5757\u548c\u5b89\u88c5\u7a0b\u5e8f\u662f\u76f8\u5bf9\u72ec\u7acb\u7684\uff0cPXE\u7684\u7f51\u7edc\u914d\u7f6e\u5e76\u4e0d\u80fd\u4f20\u9012\u7ed9\u5b89\u88c5\u7a0b\u5e8f\uff0c\u4ece\u800c\u8fdb\u884c\u4e24\u6b21\u83b7\u53d6IP\u5730\u5740\u8fc7\u7a0b\uff0c\u4f46IP\u5730\u5740\u5728DHCP\u7684\u79df\u671f\u5185\u662f\u4e00\u6837\u7684\u3002 \u5ba2\u6237\u7aef\u5b89\u88c5\u64cd\u4f5c\u7cfb\u7edf \u5c06ks.cfg\u6587\u4ef6\u4e0b\u8f7d\u56de\u6765\u540e\uff0c\u901a\u8fc7\u8be5\u6587\u4ef6\u627e\u5230OS Server\uff0c\u5e76\u6309\u7167\u8be5\u6587\u4ef6\u7684\u914d\u7f6e\u8bf7\u6c42\u4e0b\u8f7d\u5b89\u88c5\u8fc7\u7a0b\u9700\u8981\u7684\u8f6f\u4ef6\u5305\u3002 OS Server\u548c\u5ba2\u6237\u7aef\u5efa\u7acb\u8fde\u63a5\u540e\uff0c\u5c06\u5f00\u59cb\u4f20\u8f93\u8f6f\u4ef6\u5305\uff0c\u5ba2\u6237\u7aef\u5c06\u5f00\u59cb\u5b89\u88c5\u64cd\u4f5c\u7cfb\u7edf\u3002\u5b89\u88c5\u5b8c\u6210\u540e\uff0c\u5c06\u63d0\u793a\u91cd\u65b0\u5f15\u5bfc\u8ba1\u7b97\u673a\u3002 \u5b89\u88c5\u8f6f\u4ef6\u5305 [root@server ~]# yum -y install tftp-server dhcp syslinux httpd \u914d\u7f6e dhcp [root@server ~]# vim /etc/dhcp/dhcpd.conf subnet 172.25.254.0 netmask 255.255.255.0 { range 172.25.254.1 172.25.254.250; option routers 172.25.254.254; default-lease-time 600; max-lease-time 7200; filename \"/pxelinux.0\"; } [root@server ~]# systemctl restart dhcpd [root@server ~]# systemctl enable dhcpd \u5173\u95ed\u9632\u706b\u5899\u548c SELinux [root@server ~]# systemctl stop firewalld [root@server ~]# systemctl disable firewalld [root@server ~]# setenforce 0 [root@server ~]# vim /etc/selinux/config SELINUX=disabled \u914d\u7f6e tftp [root@server ~]# vim /etc/xinetd.d/tftp service tftp { socket_type = dgram protocol = udp wait = yes user = root server = /usr/sbin/in.tftpd server_args = -s /var/lib/tftpboot disable = no per_source = 11 cps = 100 2 flags = IPv4 } [root@server ~]# systemctl restart tftp [root@server ~]# systemctl enable tftp \u914d\u7f6e pxe \u5f15\u5bfc\u6587\u4ef6 [root@server ~]# cp /usr/share/syslinux/pxelinux.0 /var/lib/tftpboot/ [root@server ~]# mkdir /var/www/html/cdrom [root@server ~]# mount /dev/sr0 /var/www/html/cdrom [root@server ~]# cp /var/www/html/cdrom/isolinux/{vmlinuz,initrd.img} /var/lib/tftpboot/ [root@server ~]# mkdir /var/lib/tftpboot/pxelinux.cfg [root@server ~]# cp /var/www/html/cdrom/isolinux/isolinux.cfg /var/lib/tftpboot/pxelinux.cfg/default [root@server ~]# vim /var/lib/tftpboot/pxelinux.cfg/default default linux ... ... label linux menu label ^Install CentOS 7 kernel vmlinuz append initrd=initrd.img inst.stage2=http://172.25.254.254/cdrom ks=http://172.25.254.254/ks.cfg quiet ... ... \u51c6\u5907 Kickstart \u65e0\u4eba\u503c\u5b88\u6587\u4ef6 [root@server ~]# cp anaconda-ks.cfg /var/www/html/ks.cfg #version=DEVEL # System authorization information auth --enableshadow --passalgo=sha512 # Use CDROM installation media url --url=http://172.25.254.254/cdrom # Use graphical install graphical # Run the Setup Agent on first boot firstboot --enable ignoredisk --only-use=sda # Keyboard layouts keyboard --vckeymap=us --xlayouts='us' # System language lang en_US.UTF-8 # Network information network --bootproto=dhcp --device=ens33 --onboot=off --ipv6=auto --no-activate network --hostname=localhost.localdomain # Root password rootpw --iscrypted $6$BJfADb7EusYxHOyu$aKf2OgGT3qSOKdwgvUd8y3ZI4T4ZWe40DZ4ZfN4PEA8ceFuuauBGVUsqM12RYu36w8SwdKzjbXz2kt.NdxSmn. # System services services --disabled=\"chronyd\" # System timezone timezone Asia/Shanghai --isUtc --nontp # System bootloader configuration bootloader --append=\" crashkernel=auto\" --location=mbr --boot-drive=sda autopart --type=lvm # Partition clearing information clearpart --none --initlabel %packages @^minimal @core kexec-tools %end %addon com_redhat_kdump --enable --reserve-mb='auto' %end %anaconda pwpolicy root --minlen=6 --minquality=1 --notstrict --nochanges --notempty pwpolicy user --minlen=6 --minquality=1 --notstrict --nochanges --emptyok pwpolicy luks --minlen=6 --minquality=1 --notstrict --nochanges --notempty %end \u542f\u52a8 apache\uff0c\u6d4b\u8bd5\u80fd\u5426\u8bbf\u95ee\u5b89\u88c5\u6e90\u548c ks \u6587\u4ef6 [root@server ~]# systemctl restart httpd [root@server ~]# systemctl enable httpd \u6d4f\u89c8\u5668\u8bbf\u95ee 172.25.254.254/cdrom \u548c 172.25.254.254/ks.cfg \u88f8\u673a\u7f51\u7edc\u5f15\u5bfc\u5b89\u88c5\u7cfb\u7edf","title":"\u7b2c5\u5929"},{"location":"RH134/day5/#5","text":"","title":"\u7b2c5\u5929"},{"location":"RH134/day5/#pxe-kickstart","text":"PXE Client\u5411DHCP\u53d1\u9001\u8bf7\u6c42 PXE Client\u4ece\u81ea\u5df1\u7684PXE\u7f51\u5361\u542f\u52a8\uff0c\u901a\u8fc7PXE BootROM(\u81ea\u542f\u52a8\u82af\u7247)\u4f1a\u4ee5UDP(\u7b80\u5355\u7528\u6237\u6570\u636e\u62a5\u534f\u8bae)\u53d1\u9001\u4e00\u4e2a\u5e7f\u64ad\u8bf7\u6c42\uff0c\u5411\u672c\u7f51\u7edc\u4e2d\u7684DHCP\u670d\u52a1\u5668\u7d22\u53d6IP\u3002 DHCP\u670d\u52a1\u5668\u63d0\u4f9b\u4fe1\u606f DHCP\u670d\u52a1\u5668\u6536\u5230\u5ba2\u6237\u7aef\u7684\u8bf7\u6c42\uff0c\u9a8c\u8bc1\u662f\u5426\u6765\u81f3\u5408\u6cd5\u7684PXE Client\u7684\u8bf7\u6c42\uff0c\u9a8c\u8bc1\u901a\u8fc7\u5b83\u5c06\u7ed9\u5ba2\u6237\u7aef\u4e00\u4e2a\u201c\u63d0\u4f9b\u201d\u54cd\u5e94\uff0c\u8fd9\u4e2a\u201c\u63d0\u4f9b\u201d\u54cd\u5e94\u4e2d\u5305\u542b\u4e86\u4e3a\u5ba2\u6237\u7aef\u5206\u914d\u7684IP\u5730\u5740\u3001pxelinux\u542f\u52a8\u7a0b\u5e8f(TFTP)\u4f4d\u7f6e\uff0c\u4ee5\u53ca\u914d\u7f6e\u6587\u4ef6\u6240\u5728\u4f4d\u7f6e\u3002 PXE\u5ba2\u6237\u7aef\u8bf7\u6c42\u4e0b\u8f7d\u542f\u52a8\u6587\u4ef6 \u5ba2\u6237\u7aef\u6536\u5230\u670d\u52a1\u5668\u7684\u201c\u56de\u5e94\u201d\u540e\uff0c\u4f1a\u56de\u5e94\u4e00\u4e2a\u5e27\uff0c\u4ee5\u8bf7\u6c42\u4f20\u9001\u542f\u52a8\u6240\u9700\u6587\u4ef6\u3002\u8fd9\u4e9b\u542f\u52a8\u6587\u4ef6\u5305\u62ec\uff1apxelinux.0\u3001pxelinux.cfg/default\u3001vmlinuz\u3001initrd.img\u7b49\u6587\u4ef6\u3002 Boot Server\u54cd\u5e94\u5ba2\u6237\u7aef\u8bf7\u6c42\u5e76\u4f20\u9001\u6587\u4ef6 \u5f53\u670d\u52a1\u5668\u6536\u5230\u5ba2\u6237\u7aef\u7684\u8bf7\u6c42\u540e\uff0c\u4ed6\u4eec\u4e4b\u95f4\u4e4b\u540e\u5c06\u6709\u66f4\u591a\u7684\u4fe1\u606f\u5728\u5ba2\u6237\u7aef\u4e0e\u670d\u52a1\u5668\u4e4b\u95f4\u4f5c\u5e94\u7b54, \u7528\u4ee5\u51b3\u5b9a\u542f\u52a8\u53c2\u6570\u3002BootROM\u7531TFTP\u901a\u8baf\u534f\u8bae\u4eceBoot Server\u4e0b\u8f7d\u542f\u52a8\u5b89\u88c5\u7a0b\u5e8f\u6240\u5fc5\u987b\u7684\u6587\u4ef6(pxelinux.0\u3001pxelinux.cfg/default)\u3002default\u6587\u4ef6\u4e0b\u8f7d\u5b8c\u6210\u540e\uff0c\u4f1a\u6839\u636e\u8be5\u6587\u4ef6\u4e2d\u5b9a\u4e49\u7684\u5f15\u5bfc\u987a\u5e8f\uff0c\u542f\u52a8Linux\u5b89\u88c5\u7a0b\u5e8f\u7684\u5f15\u5bfc\u5185\u6838\u3002 \u8bf7\u6c42\u4e0b\u8f7d\u81ea\u52a8\u5e94\u7b54\u6587\u4ef6 \u5ba2\u6237\u7aef\u901a\u8fc7pxelinux.cfg/default\u6587\u4ef6\u6210\u529f\u7684\u5f15\u5bfcLinux\u5b89\u88c5\u5185\u6838\u540e\uff0c\u5b89\u88c5\u7a0b\u5e8f\u9996\u5148\u5fc5\u987b\u786e\u5b9a\u4f60\u901a\u8fc7\u4ec0\u4e48\u5b89\u88c5\u4ecb\u8d28\u6765\u5b89\u88c5linux\uff0c\u5982\u679c\u662f\u901a\u8fc7\u7f51\u7edc\u5b89\u88c5(NFS, FTP, HTTP)\uff0c\u5219\u4f1a\u5728\u8fd9\u4e2a\u65f6\u5019\u521d\u59cb\u5316\u7f51\u7edc\uff0c\u5e76\u5b9a\u4f4d\u5b89\u88c5\u6e90\u4f4d\u7f6e\u3002\u63a5\u7740\u4f1a\u8bfb\u53d6default\u6587\u4ef6\u4e2d\u6307\u5b9a\u7684\u81ea\u52a8\u5e94\u7b54\u6587\u4ef6ks.cfg\u6240\u5728\u4f4d\u7f6e\uff0c\u6839\u636e\u8be5\u4f4d\u7f6e\u8bf7\u6c42\u4e0b\u8f7d\u8be5\u6587\u4ef6\u3002 \u8fd9\u91cc\u6709\u4e2a\u95ee\u9898\uff0c\u5728\u7b2c2\u6b65\u548c\u7b2c5\u6b65\u521d\u59cb\u53162\u6b21\u7f51\u7edc\u4e86\uff0c\u8fd9\u662f\u7531\u4e8ePXE\u83b7\u53d6\u7684\u662f\u5b89\u88c5\u7528\u7684\u5185\u6838\u4ee5\u53ca\u5b89\u88c5\u7a0b\u5e8f\u7b49\uff0c\u800c\u5b89\u88c5\u7a0b\u5e8f\u8981\u83b7\u53d6\u7684\u662f\u5b89\u88c5\u7cfb\u7edf\u6240\u9700\u7684\u4e8c\u8fdb\u5236\u5305\u4ee5\u53ca\u914d\u7f6e\u6587\u4ef6\u3002\u56e0\u6b64PXE\u6a21\u5757\u548c\u5b89\u88c5\u7a0b\u5e8f\u662f\u76f8\u5bf9\u72ec\u7acb\u7684\uff0cPXE\u7684\u7f51\u7edc\u914d\u7f6e\u5e76\u4e0d\u80fd\u4f20\u9012\u7ed9\u5b89\u88c5\u7a0b\u5e8f\uff0c\u4ece\u800c\u8fdb\u884c\u4e24\u6b21\u83b7\u53d6IP\u5730\u5740\u8fc7\u7a0b\uff0c\u4f46IP\u5730\u5740\u5728DHCP\u7684\u79df\u671f\u5185\u662f\u4e00\u6837\u7684\u3002 \u5ba2\u6237\u7aef\u5b89\u88c5\u64cd\u4f5c\u7cfb\u7edf \u5c06ks.cfg\u6587\u4ef6\u4e0b\u8f7d\u56de\u6765\u540e\uff0c\u901a\u8fc7\u8be5\u6587\u4ef6\u627e\u5230OS Server\uff0c\u5e76\u6309\u7167\u8be5\u6587\u4ef6\u7684\u914d\u7f6e\u8bf7\u6c42\u4e0b\u8f7d\u5b89\u88c5\u8fc7\u7a0b\u9700\u8981\u7684\u8f6f\u4ef6\u5305\u3002 OS Server\u548c\u5ba2\u6237\u7aef\u5efa\u7acb\u8fde\u63a5\u540e\uff0c\u5c06\u5f00\u59cb\u4f20\u8f93\u8f6f\u4ef6\u5305\uff0c\u5ba2\u6237\u7aef\u5c06\u5f00\u59cb\u5b89\u88c5\u64cd\u4f5c\u7cfb\u7edf\u3002\u5b89\u88c5\u5b8c\u6210\u540e\uff0c\u5c06\u63d0\u793a\u91cd\u65b0\u5f15\u5bfc\u8ba1\u7b97\u673a\u3002","title":"PXE &amp; Kickstart \u6279\u91cf\u5b89\u88c5"},{"location":"RH134/day5/#_1","text":"[root@server ~]# yum -y install tftp-server dhcp syslinux httpd","title":"\u5b89\u88c5\u8f6f\u4ef6\u5305"},{"location":"RH134/day5/#dhcp","text":"[root@server ~]# vim /etc/dhcp/dhcpd.conf subnet 172.25.254.0 netmask 255.255.255.0 { range 172.25.254.1 172.25.254.250; option routers 172.25.254.254; default-lease-time 600; max-lease-time 7200; filename \"/pxelinux.0\"; } [root@server ~]# systemctl restart dhcpd [root@server ~]# systemctl enable dhcpd","title":"\u914d\u7f6e dhcp"},{"location":"RH134/day5/#selinux","text":"[root@server ~]# systemctl stop firewalld [root@server ~]# systemctl disable firewalld [root@server ~]# setenforce 0 [root@server ~]# vim /etc/selinux/config SELINUX=disabled","title":"\u5173\u95ed\u9632\u706b\u5899\u548c SELinux"},{"location":"RH134/day5/#tftp","text":"[root@server ~]# vim /etc/xinetd.d/tftp service tftp { socket_type = dgram protocol = udp wait = yes user = root server = /usr/sbin/in.tftpd server_args = -s /var/lib/tftpboot disable = no per_source = 11 cps = 100 2 flags = IPv4 } [root@server ~]# systemctl restart tftp [root@server ~]# systemctl enable tftp","title":"\u914d\u7f6e tftp"},{"location":"RH134/day5/#pxe","text":"[root@server ~]# cp /usr/share/syslinux/pxelinux.0 /var/lib/tftpboot/ [root@server ~]# mkdir /var/www/html/cdrom [root@server ~]# mount /dev/sr0 /var/www/html/cdrom [root@server ~]# cp /var/www/html/cdrom/isolinux/{vmlinuz,initrd.img} /var/lib/tftpboot/ [root@server ~]# mkdir /var/lib/tftpboot/pxelinux.cfg [root@server ~]# cp /var/www/html/cdrom/isolinux/isolinux.cfg /var/lib/tftpboot/pxelinux.cfg/default [root@server ~]# vim /var/lib/tftpboot/pxelinux.cfg/default default linux ... ... label linux menu label ^Install CentOS 7 kernel vmlinuz append initrd=initrd.img inst.stage2=http://172.25.254.254/cdrom ks=http://172.25.254.254/ks.cfg quiet ... ...","title":"\u914d\u7f6e pxe \u5f15\u5bfc\u6587\u4ef6"},{"location":"RH134/day5/#kickstart","text":"[root@server ~]# cp anaconda-ks.cfg /var/www/html/ks.cfg #version=DEVEL # System authorization information auth --enableshadow --passalgo=sha512 # Use CDROM installation media url --url=http://172.25.254.254/cdrom # Use graphical install graphical # Run the Setup Agent on first boot firstboot --enable ignoredisk --only-use=sda # Keyboard layouts keyboard --vckeymap=us --xlayouts='us' # System language lang en_US.UTF-8 # Network information network --bootproto=dhcp --device=ens33 --onboot=off --ipv6=auto --no-activate network --hostname=localhost.localdomain # Root password rootpw --iscrypted $6$BJfADb7EusYxHOyu$aKf2OgGT3qSOKdwgvUd8y3ZI4T4ZWe40DZ4ZfN4PEA8ceFuuauBGVUsqM12RYu36w8SwdKzjbXz2kt.NdxSmn. # System services services --disabled=\"chronyd\" # System timezone timezone Asia/Shanghai --isUtc --nontp # System bootloader configuration bootloader --append=\" crashkernel=auto\" --location=mbr --boot-drive=sda autopart --type=lvm # Partition clearing information clearpart --none --initlabel %packages @^minimal @core kexec-tools %end %addon com_redhat_kdump --enable --reserve-mb='auto' %end %anaconda pwpolicy root --minlen=6 --minquality=1 --notstrict --nochanges --notempty pwpolicy user --minlen=6 --minquality=1 --notstrict --nochanges --emptyok pwpolicy luks --minlen=6 --minquality=1 --notstrict --nochanges --notempty %end","title":"\u51c6\u5907 Kickstart \u65e0\u4eba\u503c\u5b88\u6587\u4ef6"},{"location":"RH134/day5/#apache-ks","text":"[root@server ~]# systemctl restart httpd [root@server ~]# systemctl enable httpd \u6d4f\u89c8\u5668\u8bbf\u95ee 172.25.254.254/cdrom \u548c 172.25.254.254/ks.cfg","title":"\u542f\u52a8 apache\uff0c\u6d4b\u8bd5\u80fd\u5426\u8bbf\u95ee\u5b89\u88c5\u6e90\u548c ks \u6587\u4ef6"},{"location":"RH134/day5/#_2","text":"","title":"\u88f8\u673a\u7f51\u7edc\u5f15\u5bfc\u5b89\u88c5\u7cfb\u7edf"},{"location":"RH254/","text":"RH254 \u94fe\u8def\u805a\u5408\uff0c\u6865\u63a5 DNS \u670d\u52a1 WEB \u865a\u62df\u4e3b\u673a MariDB \u6570\u636e\u5e93 Mail \u670d\u52a1 FTP \u6587\u4ef6\u4f20\u8f93 NFS\uff0cSAMBA \u6587\u4ef6\u5171\u4eab iSCSI \u5757\u8bbe\u5907\u5171\u4eab Docker \u5bb9\u5668","title":"RH254"},{"location":"RH254/#rh254","text":"\u94fe\u8def\u805a\u5408\uff0c\u6865\u63a5 DNS \u670d\u52a1 WEB \u865a\u62df\u4e3b\u673a MariDB \u6570\u636e\u5e93 Mail \u670d\u52a1 FTP \u6587\u4ef6\u4f20\u8f93 NFS\uff0cSAMBA \u6587\u4ef6\u5171\u4eab iSCSI \u5757\u8bbe\u5907\u5171\u4eab Docker \u5bb9\u5668","title":"RH254"},{"location":"RH254/day1/","text":"\u7b2c1\u5929 \u94fe\u8def\u805a\u5408\u548c\u6865\u63a5 broadcast \u4f20\u8f93\u6765\u81ea\u6240\u6709\u7aef\u53e3\u7684\u6bcf\u4e2a\u5305 roundrobin \u8f6e\u8bad\u65b9\u5f0f\u4f20\u8f93\u6765\u81ea\u6bcf\u4e2a\u7aef\u53e3\u7684\u5305 activebackup \u4e3b\u5907\u6a21\u5f0f\uff0c\u53ef\u7528\u4e8e\u6545\u969c\u8f6c\u79fb loadbalance \u8d1f\u8f7d\u5747\u8861\uff0c\u76d1\u63a7\u6d41\u91cf\u4f7f\u7528\u54c8\u5e0c\u51fd\u6570\u4e3a\u6570\u636e\u5305\u9009\u62e9\u7aef\u53e3\u65f6\u8fbe\u5230\u5747\u8861 lacp 802.3ad \u94fe\u8def\u805a\u5408\u63a7\u5236\u534f\u8bae\uff0c\u53ef\u4ee5\u8fbe\u5230\u548c loadbalance \u76f8\u540c\u6548\u679c # \u65b0\u5efa\u8fde\u63a5\u5e76\u521b\u5efa team \u8bbe\u5907 nmcli con add con-name teamcon type team ifname teamdev config '{\"runner\":{\"name\":\"activebackup\"}}' # \u8bbe\u7f6e IP \u5730\u5740 nmcli con mod teamcon ipv4.method manual ipv4.addresses IP_ADDR/MASK ipv4.gateway GW_IP # \u6dfb\u52a0\u9644\u5c5e\u7aef\u53e3 nmcli con add con-name team-port1 type team-slave ifname DEVICE_NAME master teamdev nmcli con add con-name team-port2 type team-slave ifname DEVICE_NAME master teamdev # \u521b\u5efa\u6865\u8bbe\u5907 nmcli con add con-name brcon type bridge ifname brdev # \u6dfb\u52a0\u9644\u5c5e\u8bbe\u5907 nmcli con add con-name br-port1 type bridge-slave ifname DEVICE_NAME master brdev # \u7981\u6b62 team \u81ea\u52a8\u83b7\u53d6 ip nmcli con mod teamcon ipv4.method disabled ipv6.method ignore # \u6865\u63a5 team nmcli con mod teamcon master brdev","title":"\u7b2c1\u5929"},{"location":"RH254/day1/#1","text":"","title":"\u7b2c1\u5929"},{"location":"RH254/day1/#_1","text":"broadcast \u4f20\u8f93\u6765\u81ea\u6240\u6709\u7aef\u53e3\u7684\u6bcf\u4e2a\u5305 roundrobin \u8f6e\u8bad\u65b9\u5f0f\u4f20\u8f93\u6765\u81ea\u6bcf\u4e2a\u7aef\u53e3\u7684\u5305 activebackup \u4e3b\u5907\u6a21\u5f0f\uff0c\u53ef\u7528\u4e8e\u6545\u969c\u8f6c\u79fb loadbalance \u8d1f\u8f7d\u5747\u8861\uff0c\u76d1\u63a7\u6d41\u91cf\u4f7f\u7528\u54c8\u5e0c\u51fd\u6570\u4e3a\u6570\u636e\u5305\u9009\u62e9\u7aef\u53e3\u65f6\u8fbe\u5230\u5747\u8861 lacp 802.3ad \u94fe\u8def\u805a\u5408\u63a7\u5236\u534f\u8bae\uff0c\u53ef\u4ee5\u8fbe\u5230\u548c loadbalance \u76f8\u540c\u6548\u679c # \u65b0\u5efa\u8fde\u63a5\u5e76\u521b\u5efa team \u8bbe\u5907 nmcli con add con-name teamcon type team ifname teamdev config '{\"runner\":{\"name\":\"activebackup\"}}' # \u8bbe\u7f6e IP \u5730\u5740 nmcli con mod teamcon ipv4.method manual ipv4.addresses IP_ADDR/MASK ipv4.gateway GW_IP # \u6dfb\u52a0\u9644\u5c5e\u7aef\u53e3 nmcli con add con-name team-port1 type team-slave ifname DEVICE_NAME master teamdev nmcli con add con-name team-port2 type team-slave ifname DEVICE_NAME master teamdev # \u521b\u5efa\u6865\u8bbe\u5907 nmcli con add con-name brcon type bridge ifname brdev # \u6dfb\u52a0\u9644\u5c5e\u8bbe\u5907 nmcli con add con-name br-port1 type bridge-slave ifname DEVICE_NAME master brdev # \u7981\u6b62 team \u81ea\u52a8\u83b7\u53d6 ip nmcli con mod teamcon ipv4.method disabled ipv6.method ignore # \u6865\u63a5 team nmcli con mod teamcon master brdev","title":"\u94fe\u8def\u805a\u5408\u548c\u6865\u63a5"},{"location":"RH254/day2/","text":"\u7b2c2\u5929 DNS \u670d\u52a1 \u4e3b\u670d\u52a1\u5668 \u5b89\u88c5\u8f6f\u4ef6\u5305 [root@server ~]# yum -y install bind bind-untils \u5bf9\u5916\u63d0\u4f9b\u670d\u52a1\uff0c\u9ed8\u8ba4\u53ea\u89e3\u6790 localhost [root@server ~]# vim /etc/named.conf ... ... listen-on port 53 { any; }; listen-on-v6 port 53 { any; }; allow-query { any; }; ... ... zone \"google.com\" IN { type master; file \"google\"; }; zone \"3.128.192.in-addr.arpa\" IN { type master; file \"google-reverse\"; } \u521b\u5efa\u89e3\u6790\u6570\u636e\u6587\u4ef6 [root@server ~]# chmod g+s /var/named [root@server ~]# cd /var/named [root@server named]# cp named.empty google [root@server named]# cp named.empty google-reverse [root@server named]# vim google $TTL 3H @ IN SOA ns.google.com. root.google.com. ( 0 ; serial 1D ; refresh 1H ; retry 1W ; expire 3H ) ; minimum NS ns.google.com. ns A 192.168.3.11 @ A 192.168.3.11 www A 192.168.3.11 [root@server named]# vim google-reverse $TTL 3H @ IN SOA ns.google.com. root.google.com. ( 0 ; serial 1D ; refresh 1H ; retry 1W ; expire 3H ) ; minimum NS ns.google.com. ns A 192.168.3.11 11 PTR www.google.com. 11 PTR google.com. \u68c0\u6d4b\u914d\u7f6e\u6587\u4ef6\u8bed\u6cd5 [root@server named]# named-checkconf [root@server named]# named-checkzone google.com google [root@server named]# named-checkzone 3.128.192.in-addr.arpa google-reverse [root@server named]# systemctl restart named [root@server named]# systemctl enable named \u5ba2\u6237\u7aef\u4fee\u6539\u672c\u5730 DNS echo \"nameserver 192.168.3.11\" > /etc/resolv.conf \u4e3b\u4ece\u670d\u52a1\u5668 \u4e3b\u670d\u52a1\u5668\u6dfb\u52a0\u4ece\u670d\u52a1\u5668\u53c2\u6570 allow-transfer { SLAVE_IP; }; allow-update { none; }; also-notify { SLAVE_IP; }; \u4ece\u670d\u52a1\u5668\u521b\u5efa\u4e0e\u4e3b\u670d\u52a1\u5668\u76f8\u540c\u7684 zone type slave; masters { MASTER_IP }; masterfile-format text; allow-notify { MASTER_IP; }; WEB \u670d\u52a1\u5668 \u5b89\u88c5 apache [root@server0 ~]# yum -y install httpd \u62f7\u8d1d\u865a\u62df\u4e3b\u673a\u6a21\u677f [root@server0 ~]# cp /usr/share/doc/httpd-2.4.6/httpd-vhosts.conf /etc/httpd/conf.d/vhosts.conf \u521b\u5efa\u7f51\u7ad9\u76ee\u5f55\u5e76\u6dfb\u52a0\u9996\u9875 [root@server0 ~]# echo \"<h1>this is /var/www/html</h1>\" > /var/www/html/index.html [root@server0 ~]# mkdir /www [root@server0 ~]# echo \"<h1>this is /www</h1>\" > /www/index.html [root@server0 ~]# mkdir /var/www/webapp [root@server0 ~]# echo \"<h1>this is /var/www/webapp</h1>\" > /var/www/webapp/index.html \u914d\u7f6e\u865a\u62df\u4e3b\u673a [root@server0 ~]# vim /etc/httpd/conf.d/vhosts.conf 1.\u57fa\u4e8e domain <VirtualHost *:80> DocumentRoot \"/var/www/html\" ServerName server0.example.com </VirtualHost> <VirtualHost *:80> DocumentRoot \"/www\" ServerName www0.example.com </VirtualHost> <VirtualHost *:80> DocumentRoot \"/var/www/webapp\" ServerName webapp0.example.com </VirtualHost> <Directory \"/www\"> Require all granted </Directory> [root@server0 ~]# firewall-cmd --add-port=80/tcp [root@server0 ~]# firewall-cmd --add-port=80/tcp --permanent [root@server0 ~]# semanage fcontext -a -t httpd_sys_content_t '/www(/.*)?' [root@server0 ~]# restorecon -Rv /www/ 2.\u57fa\u4e8e ip <VirtualHost *:80> DocumentRoot \"/var/www/html\" ServerName 172.25.0.11 </VirtualHost> <VirtualHost *:80> DocumentRoot \"/www\" ServerName 172.25.0.12 </VirtualHost> <VirtualHost *:80> DocumentRoot \"/var/www/webapp\" ServerName 172.25.0.13 </VirtualHost> <Directory \"/www\"> Require all granted </Directory> 3.\u57fa\u4e8e port <VirtualHost *:80> DocumentRoot \"/var/www/html\" ServerName 172.25.0.11 </VirtualHost> listen 888 <VirtualHost *:888> DocumentRoot \"/www\" ServerName 172.25.0.11 </VirtualHost> listen 8888 <VirtualHost *:8888> DocumentRoot \"/var/www/webapp\" ServerName 172.25.0.11 </VirtualHost> <Directory \"/www\"> Require all granted </Directory> [root@server0 ~]# semanage port -a -t http_port_t -p tcp 888 [root@server0 ~]# semanage port -a -t http_port_t -p tcp 8888 [root@server0 ~]# firewall-cmd --add-port=888/tcp --add=port=8888/tcp [root@server0 ~]# firewall-cmd --add-port=888/tcp --add=port=8888/tcp --permanent \u4fee\u6539\u914d\u7f6e\u6587\u4ef6\u52a1\u5fc5\u91cd\u542f\u670d\u52a1\u5e94\u7528\u65b0\u914d\u7f6e [root@server0 ~]# systemctl restart httpd http \u7684 SSL/TLS \u52a0\u5bc6\uff08https\uff09 X.509\u662f\u4e00\u4e2a\u6807\u51c6\uff0c\u89c4\u8303\u4e86\u516c\u5f00\u79d8\u94a5\u8ba4\u8bc1\u3001\u8bc1\u4e66\u540a\u9500\u5217\u8868\u3001\u6388\u6743\u51ed\u8bc1\u3001\u51ed\u8bc1\u8def\u5f84\u9a8c\u8bc1\u7b97\u6cd5\u7b49\u3002 X.509\u8bc1\u4e66\u5305\u542b\u4e09\u4e2a\u6587\u4ef6\uff1akey\uff0ccsr\uff0ccrt key\u662f\u670d\u52a1\u5668\u4e0a\u7684\u79c1\u94a5\u6587\u4ef6\uff0c\u7528\u4e8e\u5bf9\u53d1\u9001\u7ed9\u5ba2\u6237\u7aef\u6570\u636e\u7684\u52a0\u5bc6\uff0c\u4ee5\u53ca\u5bf9\u4ece\u5ba2\u6237\u7aef\u63a5\u6536\u5230\u6570\u636e\u7684\u89e3\u5bc6 csr\u662f\u8bc1\u4e66\u7b7e\u540d\u8bf7\u6c42\u6587\u4ef6\uff0c\u7528\u4e8e\u63d0\u4ea4\u7ed9\u8bc1\u4e66\u9881\u53d1\u673a\u6784\uff08CA\uff09\u5bf9\u8bc1\u4e66\u7b7e\u540d crt\u662f\u7531\u8bc1\u4e66\u9881\u53d1\u673a\u6784\uff08CA\uff09\u7b7e\u540d\u540e\u7684\u8bc1\u4e66\uff0c\u6216\u8005\u662f\u5f00\u53d1\u8005\u81ea\u7b7e\u540d\u7684\u8bc1\u4e66\uff0c\u5305\u542b\u8bc1\u4e66\u6301\u6709\u4eba\u7684\u4fe1\u606f\uff0c\u6301\u6709\u4eba\u7684\u516c\u94a5\uff0c\u4ee5\u53ca\u7b7e\u7f72\u8005\u7684\u7b7e\u540d\u7b49\u4fe1\u606f \u7b2c\u4e00\u6b65\uff1a\u751f\u6210\u5ba2\u6237\u7aef\u7684\u5bc6\u94a5\uff0c\u5373\u5ba2\u6237\u7aef\u7684\u516c\u79c1\u5bc6\u94a5\u5bf9\uff0c\u4e14\u8981\u4fdd\u8bc1\u79c1\u94a5\u53ea\u6709\u5ba2\u6237\u7aef\u81ea\u5df1\u62e5\u6709\u3002 \u7b2c\u4e8c\u6b65\uff1a\u7528\u5ba2\u6237\u7aef\u7684\u79c1\u94a5\u52a0\u5bc6\u5ba2\u6237\u7aef\u5ba2\u6237\u7aef\u81ea\u8eab\u7684\u4fe1\u606f(\u56fd\u5bb6\u3001\u673a\u6784\u3001\u57df\u540d\u3001\u90ae\u7bb1\u7b49)\uff0c\u751f\u6210 csr \u8bc1\u4e66\u8bf7\u6c42\u6587\u4ef6\u3002\u5176\u4e2d\u5ba2\u6237\u7aef\u7684\u516c\u94a5\u548c\u5ba2\u6237\u7aef\u4fe1\u606f\u662f\u660e\u6587\u4fdd\u5b58\u5728\u8bc1\u4e66\u8bf7\u6c42\u6587\u4ef6\u4e2d\u7684\uff0c\u800c\u5ba2\u6237\u7aef\u79c1\u94a5\u7684\u4f5c\u7528\u662f\u5bf9\u5ba2\u6237\u7aef\u516c\u94a5\u53ca\u5ba2\u6237\u7aef\u4fe1\u606f\u505a\u7b7e\u540d\uff0c\u81ea\u8eab\u662f\u4e0d\u5305\u542b\u5728\u8bc1\u4e66\u8bf7\u6c42\u4e2d\u7684\u3002\u7136\u540e\u628a\u8bc1\u4e66\u8bf7\u6c42\u6587\u4ef6\u53d1\u9001\u7ed9CA\u673a\u6784\u3002 \u7b2c\u4e09\u6b65\uff1aCA\u673a\u6784\u63a5\u6536\u5230\u5ba2\u6237\u7aef\u7684\u8bc1\u4e66\u8bf7\u6c42\u6587\u4ef6\u540e\uff0c\u9996\u5148\u6821\u9a8c\u5176\u7b7e\u540d\uff0c\u7136\u540e\u5ba1\u6838\u5ba2\u6237\u7aef\u7684\u4fe1\u606f\uff0c\u6700\u540eCA\u673a\u6784\u4f7f\u7528\u81ea\u5df1\u7684\u79c1\u94a5\u4e3a\u8bc1\u4e66\u8bf7\u6c42\u6587\u4ef6\u7b7e\u540d\uff0c\u751f\u6210\u8bc1\u4e66\u6587\u4ef6\uff0c\u4e0b\u53d1\u7ed9\u5ba2\u6237\u7aef\u3002\u6b64\u8bc1\u4e66\u5c31\u662f\u5ba2\u6237\u7aef\u7684\u8eab\u4efd\u8bc1\uff0c\u6765\u8868\u660e\u7528\u6237\u7684\u8eab\u4efd\u3002 # ca \u751f\u6210\u79c1\u94a5\u548c\u516c\u94a5 openssl genrsa -out /etc/pki/CA/private/cakey.pem 2048 openssl rsa -in /etc/pki/CA/private/cakey.pem -pubout -out /etc/pki/CA/private/ca.pub # ca \u81ea\u7b7e\u540d\u8bc1\u4e66 openssl req -new -x509 -key /etc/pki/CA/private/cakey.pem -out /etc/pki/CA/cacert.pem -days 3650 # index.txt \u662f\u7d22\u5f15\u6587\u4ef6\uff0c\u7528\u4e0e\u5339\u914d\u8bc1\u4e66\u7f16\u53f7 # serial \u662f\u8bc1\u4e66\u5e8f\u5217\u53f7\u6587\u4ef6\uff0c\u53ea\u5728\u9996\u6b21\u751f\u6210\u8bc1\u4e66\u65f6\u8d4b\u503c touch /etc/pki/CA/{index.txt,serial} echo 01 > /etc/pki/CA/serial # ca \u4e3a\u670d\u52a1\u5668\u7b7e\u53d1\u8bc1\u4e66 openssl ca -in server.csr -out server.crt -cert /etc/pki/CA/cacert.pem -keyfile /etc/pki/CA/private/cakey.pem -days 365 # \u670d\u52a1\u5668\u751f\u6210\u79c1\u94a5\u548c\u516c\u94a5 openssl genrsa -out /etc/pki/tls/private/server.key 2048 openssl rsa -in /etc/pki/tls/private/ca.key -pubout -out /etc/pki/tls/private/ca.pub openssl req -new -key /etc/pki/tls/private/server.key -out server.csr \u5ba2\u6237\u7aef \u5ba2\u6237\u7aef\u5728\u6d4f\u89c8\u5668\u4e2d\u901a\u8fc7\u8bbf\u95ee\u7f51\u7ad9\u5185\u5bb9\uff0c\u6ce8\u610f http \u548c https","title":"\u7b2c2\u5929"},{"location":"RH254/day2/#2","text":"","title":"\u7b2c2\u5929"},{"location":"RH254/day2/#dns","text":"\u4e3b\u670d\u52a1\u5668","title":"DNS \u670d\u52a1"},{"location":"RH254/day2/#_1","text":"[root@server ~]# yum -y install bind bind-untils","title":"\u5b89\u88c5\u8f6f\u4ef6\u5305"},{"location":"RH254/day2/#localhost","text":"[root@server ~]# vim /etc/named.conf ... ... listen-on port 53 { any; }; listen-on-v6 port 53 { any; }; allow-query { any; }; ... ... zone \"google.com\" IN { type master; file \"google\"; }; zone \"3.128.192.in-addr.arpa\" IN { type master; file \"google-reverse\"; }","title":"\u5bf9\u5916\u63d0\u4f9b\u670d\u52a1\uff0c\u9ed8\u8ba4\u53ea\u89e3\u6790 localhost"},{"location":"RH254/day2/#_2","text":"[root@server ~]# chmod g+s /var/named [root@server ~]# cd /var/named [root@server named]# cp named.empty google [root@server named]# cp named.empty google-reverse [root@server named]# vim google $TTL 3H @ IN SOA ns.google.com. root.google.com. ( 0 ; serial 1D ; refresh 1H ; retry 1W ; expire 3H ) ; minimum NS ns.google.com. ns A 192.168.3.11 @ A 192.168.3.11 www A 192.168.3.11 [root@server named]# vim google-reverse $TTL 3H @ IN SOA ns.google.com. root.google.com. ( 0 ; serial 1D ; refresh 1H ; retry 1W ; expire 3H ) ; minimum NS ns.google.com. ns A 192.168.3.11 11 PTR www.google.com. 11 PTR google.com.","title":"\u521b\u5efa\u89e3\u6790\u6570\u636e\u6587\u4ef6"},{"location":"RH254/day2/#_3","text":"[root@server named]# named-checkconf [root@server named]# named-checkzone google.com google [root@server named]# named-checkzone 3.128.192.in-addr.arpa google-reverse [root@server named]# systemctl restart named [root@server named]# systemctl enable named","title":"\u68c0\u6d4b\u914d\u7f6e\u6587\u4ef6\u8bed\u6cd5"},{"location":"RH254/day2/#dns_1","text":"echo \"nameserver 192.168.3.11\" > /etc/resolv.conf \u4e3b\u4ece\u670d\u52a1\u5668 \u4e3b\u670d\u52a1\u5668\u6dfb\u52a0\u4ece\u670d\u52a1\u5668\u53c2\u6570 allow-transfer { SLAVE_IP; }; allow-update { none; }; also-notify { SLAVE_IP; }; \u4ece\u670d\u52a1\u5668\u521b\u5efa\u4e0e\u4e3b\u670d\u52a1\u5668\u76f8\u540c\u7684 zone type slave; masters { MASTER_IP }; masterfile-format text; allow-notify { MASTER_IP; };","title":"\u5ba2\u6237\u7aef\u4fee\u6539\u672c\u5730 DNS"},{"location":"RH254/day2/#web","text":"","title":"WEB \u670d\u52a1\u5668"},{"location":"RH254/day2/#apache","text":"[root@server0 ~]# yum -y install httpd","title":"\u5b89\u88c5 apache"},{"location":"RH254/day2/#_4","text":"[root@server0 ~]# cp /usr/share/doc/httpd-2.4.6/httpd-vhosts.conf /etc/httpd/conf.d/vhosts.conf","title":"\u62f7\u8d1d\u865a\u62df\u4e3b\u673a\u6a21\u677f"},{"location":"RH254/day2/#_5","text":"[root@server0 ~]# echo \"<h1>this is /var/www/html</h1>\" > /var/www/html/index.html [root@server0 ~]# mkdir /www [root@server0 ~]# echo \"<h1>this is /www</h1>\" > /www/index.html [root@server0 ~]# mkdir /var/www/webapp [root@server0 ~]# echo \"<h1>this is /var/www/webapp</h1>\" > /var/www/webapp/index.html","title":"\u521b\u5efa\u7f51\u7ad9\u76ee\u5f55\u5e76\u6dfb\u52a0\u9996\u9875"},{"location":"RH254/day2/#_6","text":"[root@server0 ~]# vim /etc/httpd/conf.d/vhosts.conf","title":"\u914d\u7f6e\u865a\u62df\u4e3b\u673a"},{"location":"RH254/day2/#1-domain","text":"<VirtualHost *:80> DocumentRoot \"/var/www/html\" ServerName server0.example.com </VirtualHost> <VirtualHost *:80> DocumentRoot \"/www\" ServerName www0.example.com </VirtualHost> <VirtualHost *:80> DocumentRoot \"/var/www/webapp\" ServerName webapp0.example.com </VirtualHost> <Directory \"/www\"> Require all granted </Directory> [root@server0 ~]# firewall-cmd --add-port=80/tcp [root@server0 ~]# firewall-cmd --add-port=80/tcp --permanent [root@server0 ~]# semanage fcontext -a -t httpd_sys_content_t '/www(/.*)?' [root@server0 ~]# restorecon -Rv /www/","title":"1.\u57fa\u4e8e domain"},{"location":"RH254/day2/#2-ip","text":"<VirtualHost *:80> DocumentRoot \"/var/www/html\" ServerName 172.25.0.11 </VirtualHost> <VirtualHost *:80> DocumentRoot \"/www\" ServerName 172.25.0.12 </VirtualHost> <VirtualHost *:80> DocumentRoot \"/var/www/webapp\" ServerName 172.25.0.13 </VirtualHost> <Directory \"/www\"> Require all granted </Directory>","title":"2.\u57fa\u4e8e ip"},{"location":"RH254/day2/#3-port","text":"<VirtualHost *:80> DocumentRoot \"/var/www/html\" ServerName 172.25.0.11 </VirtualHost> listen 888 <VirtualHost *:888> DocumentRoot \"/www\" ServerName 172.25.0.11 </VirtualHost> listen 8888 <VirtualHost *:8888> DocumentRoot \"/var/www/webapp\" ServerName 172.25.0.11 </VirtualHost> <Directory \"/www\"> Require all granted </Directory> [root@server0 ~]# semanage port -a -t http_port_t -p tcp 888 [root@server0 ~]# semanage port -a -t http_port_t -p tcp 8888 [root@server0 ~]# firewall-cmd --add-port=888/tcp --add=port=8888/tcp [root@server0 ~]# firewall-cmd --add-port=888/tcp --add=port=8888/tcp --permanent","title":"3.\u57fa\u4e8e port"},{"location":"RH254/day2/#_7","text":"[root@server0 ~]# systemctl restart httpd","title":"\u4fee\u6539\u914d\u7f6e\u6587\u4ef6\u52a1\u5fc5\u91cd\u542f\u670d\u52a1\u5e94\u7528\u65b0\u914d\u7f6e"},{"location":"RH254/day2/#http-ssltls-https","text":"X.509\u662f\u4e00\u4e2a\u6807\u51c6\uff0c\u89c4\u8303\u4e86\u516c\u5f00\u79d8\u94a5\u8ba4\u8bc1\u3001\u8bc1\u4e66\u540a\u9500\u5217\u8868\u3001\u6388\u6743\u51ed\u8bc1\u3001\u51ed\u8bc1\u8def\u5f84\u9a8c\u8bc1\u7b97\u6cd5\u7b49\u3002 X.509\u8bc1\u4e66\u5305\u542b\u4e09\u4e2a\u6587\u4ef6\uff1akey\uff0ccsr\uff0ccrt key\u662f\u670d\u52a1\u5668\u4e0a\u7684\u79c1\u94a5\u6587\u4ef6\uff0c\u7528\u4e8e\u5bf9\u53d1\u9001\u7ed9\u5ba2\u6237\u7aef\u6570\u636e\u7684\u52a0\u5bc6\uff0c\u4ee5\u53ca\u5bf9\u4ece\u5ba2\u6237\u7aef\u63a5\u6536\u5230\u6570\u636e\u7684\u89e3\u5bc6 csr\u662f\u8bc1\u4e66\u7b7e\u540d\u8bf7\u6c42\u6587\u4ef6\uff0c\u7528\u4e8e\u63d0\u4ea4\u7ed9\u8bc1\u4e66\u9881\u53d1\u673a\u6784\uff08CA\uff09\u5bf9\u8bc1\u4e66\u7b7e\u540d crt\u662f\u7531\u8bc1\u4e66\u9881\u53d1\u673a\u6784\uff08CA\uff09\u7b7e\u540d\u540e\u7684\u8bc1\u4e66\uff0c\u6216\u8005\u662f\u5f00\u53d1\u8005\u81ea\u7b7e\u540d\u7684\u8bc1\u4e66\uff0c\u5305\u542b\u8bc1\u4e66\u6301\u6709\u4eba\u7684\u4fe1\u606f\uff0c\u6301\u6709\u4eba\u7684\u516c\u94a5\uff0c\u4ee5\u53ca\u7b7e\u7f72\u8005\u7684\u7b7e\u540d\u7b49\u4fe1\u606f \u7b2c\u4e00\u6b65\uff1a\u751f\u6210\u5ba2\u6237\u7aef\u7684\u5bc6\u94a5\uff0c\u5373\u5ba2\u6237\u7aef\u7684\u516c\u79c1\u5bc6\u94a5\u5bf9\uff0c\u4e14\u8981\u4fdd\u8bc1\u79c1\u94a5\u53ea\u6709\u5ba2\u6237\u7aef\u81ea\u5df1\u62e5\u6709\u3002 \u7b2c\u4e8c\u6b65\uff1a\u7528\u5ba2\u6237\u7aef\u7684\u79c1\u94a5\u52a0\u5bc6\u5ba2\u6237\u7aef\u5ba2\u6237\u7aef\u81ea\u8eab\u7684\u4fe1\u606f(\u56fd\u5bb6\u3001\u673a\u6784\u3001\u57df\u540d\u3001\u90ae\u7bb1\u7b49)\uff0c\u751f\u6210 csr \u8bc1\u4e66\u8bf7\u6c42\u6587\u4ef6\u3002\u5176\u4e2d\u5ba2\u6237\u7aef\u7684\u516c\u94a5\u548c\u5ba2\u6237\u7aef\u4fe1\u606f\u662f\u660e\u6587\u4fdd\u5b58\u5728\u8bc1\u4e66\u8bf7\u6c42\u6587\u4ef6\u4e2d\u7684\uff0c\u800c\u5ba2\u6237\u7aef\u79c1\u94a5\u7684\u4f5c\u7528\u662f\u5bf9\u5ba2\u6237\u7aef\u516c\u94a5\u53ca\u5ba2\u6237\u7aef\u4fe1\u606f\u505a\u7b7e\u540d\uff0c\u81ea\u8eab\u662f\u4e0d\u5305\u542b\u5728\u8bc1\u4e66\u8bf7\u6c42\u4e2d\u7684\u3002\u7136\u540e\u628a\u8bc1\u4e66\u8bf7\u6c42\u6587\u4ef6\u53d1\u9001\u7ed9CA\u673a\u6784\u3002 \u7b2c\u4e09\u6b65\uff1aCA\u673a\u6784\u63a5\u6536\u5230\u5ba2\u6237\u7aef\u7684\u8bc1\u4e66\u8bf7\u6c42\u6587\u4ef6\u540e\uff0c\u9996\u5148\u6821\u9a8c\u5176\u7b7e\u540d\uff0c\u7136\u540e\u5ba1\u6838\u5ba2\u6237\u7aef\u7684\u4fe1\u606f\uff0c\u6700\u540eCA\u673a\u6784\u4f7f\u7528\u81ea\u5df1\u7684\u79c1\u94a5\u4e3a\u8bc1\u4e66\u8bf7\u6c42\u6587\u4ef6\u7b7e\u540d\uff0c\u751f\u6210\u8bc1\u4e66\u6587\u4ef6\uff0c\u4e0b\u53d1\u7ed9\u5ba2\u6237\u7aef\u3002\u6b64\u8bc1\u4e66\u5c31\u662f\u5ba2\u6237\u7aef\u7684\u8eab\u4efd\u8bc1\uff0c\u6765\u8868\u660e\u7528\u6237\u7684\u8eab\u4efd\u3002 # ca \u751f\u6210\u79c1\u94a5\u548c\u516c\u94a5 openssl genrsa -out /etc/pki/CA/private/cakey.pem 2048 openssl rsa -in /etc/pki/CA/private/cakey.pem -pubout -out /etc/pki/CA/private/ca.pub # ca \u81ea\u7b7e\u540d\u8bc1\u4e66 openssl req -new -x509 -key /etc/pki/CA/private/cakey.pem -out /etc/pki/CA/cacert.pem -days 3650 # index.txt \u662f\u7d22\u5f15\u6587\u4ef6\uff0c\u7528\u4e0e\u5339\u914d\u8bc1\u4e66\u7f16\u53f7 # serial \u662f\u8bc1\u4e66\u5e8f\u5217\u53f7\u6587\u4ef6\uff0c\u53ea\u5728\u9996\u6b21\u751f\u6210\u8bc1\u4e66\u65f6\u8d4b\u503c touch /etc/pki/CA/{index.txt,serial} echo 01 > /etc/pki/CA/serial # ca \u4e3a\u670d\u52a1\u5668\u7b7e\u53d1\u8bc1\u4e66 openssl ca -in server.csr -out server.crt -cert /etc/pki/CA/cacert.pem -keyfile /etc/pki/CA/private/cakey.pem -days 365 # \u670d\u52a1\u5668\u751f\u6210\u79c1\u94a5\u548c\u516c\u94a5 openssl genrsa -out /etc/pki/tls/private/server.key 2048 openssl rsa -in /etc/pki/tls/private/ca.key -pubout -out /etc/pki/tls/private/ca.pub openssl req -new -key /etc/pki/tls/private/server.key -out server.csr","title":"http \u7684 SSL/TLS \u52a0\u5bc6\uff08https\uff09"},{"location":"RH254/day2/#_8","text":"\u5ba2\u6237\u7aef\u5728\u6d4f\u89c8\u5668\u4e2d\u901a\u8fc7\u8bbf\u95ee\u7f51\u7ad9\u5185\u5bb9\uff0c\u6ce8\u610f http \u548c https","title":"\u5ba2\u6237\u7aef"},{"location":"RH254/day3/","text":"\u7b2c3\u5929 FTP \u6587\u4ef6\u4f20\u8f93 server \u5b89\u88c5 vsftpd [root@server ~]# yum -y install vsftpd \u914d\u7f6e\u6587\u4ef6 /etc/vsftpd/vsftpd.conf 1. \u533f\u540d\u8bbf\u95ee anonymous_enable=YES \u5f00\u542f\u533f\u540d\u8bbf\u95ee anon_umask=022 \u533f\u540d\u7528\u6237\u4e0a\u4f20\u7684 umask \u503c anon_upload_enable=YES \u5141\u8bb8\u533f\u540d\u7528\u6237\u4e0a\u4f20\u6587\u4ef6 anon_mkdir_write_enable=YES \u5141\u8bb8\u533f\u540d\u7528\u6237\u521b\u5efa\u76ee\u5f55 anon_other_write_enable=YES \u5141\u8bb8\u533f\u540d\u7528\u6237\u4fee\u6539\u6216\u5220\u9664\u76ee\u5f55 2. \u672c\u5730\u7528\u6237 anonymous_enable=NO \u7981\u6b62\u533f\u540d\u8bbf\u95ee local_enable=YES \u5f00\u542f\u672c\u5730\u672c\u5730\u7528\u6237\u8bbf\u95ee write_enable=YES \u662f\u5426\u6709\u5199\u6743\u9650 local_umask=022 \u672c\u5730\u7528\u6237\u4e0a\u4f20\u6587\u4ef6\u7684 umask \u503c userlist_enable=YES \u4f7f\u7528\u7528\u6237\u5217\u8868\uff0c\u540d\u5355\u6587\u4ef6\u4e3a user_list\uff08\u53ef\u80fd\u662f\u767d\u540d\u5355\uff0c\u4e5f\u53ef\u80fd\u662f\u9ed1\u540d\u5355\uff09\u548c ftpuser\uff08\u59cb\u7ec8\u662f\u9ed1\u540d\u5355\uff09 userlist_deny=YES \u5f00\u542f\u7528\u6237\u4f5c\u7528\u540d\u5355\u6587\u4ef6\u529f\u80fd userlist_enable=YES, userlist_deny=YES user_list \u4e3a\u9ed1\u540d\u5355\uff0c\u7981\u6b62 user_list \u4e2d\u7528\u6237\u767b\u5f55 userlist_enable=YES, userlist_deny=NO user_list \u4e3a\u767d\u540d\u5355\uff0c\u4ec5\u5141\u8bb8 user_list \u4e2d\u7684\u7528\u6237\u767b\u5f55 chroot_local_user=YES \u7528\u6237\u7981\u9522\u5728\u4e3b\u76ee\u5f55\uff0c\u4e0d\u5141\u8bb8\u8df3\u8f6c\u4e0a\u7ea7\u76ee\u5f55 chroot_list_enable=YES \u662f\u5426\u4f7f\u7528\u7981\u9522\u7528\u6237\u5217\u8868 chroot_local_user=YES, chroot_list_enable=YES chroot_list_file \u4e3a\u767d\u540d\u5355\uff0c\u4e0d\u53d7\u9650\u5236 chroot_local_user=NO, chroot_list_enable=YES chroot_list_file \u4e3a\u9ed1\u540d\u5355\uff0c\u53d7\u5230\u9650\u5236 chroot_local_user=YES, chroot_list_enable=NO \u6240\u6709\u7528\u6237\u90fd\u53d7\u5230\u9650\u5236\uff0cchroot_list_file \u65e0\u4f5c\u7528 chroot_local_user=NO, chroot_list_enable=NO \u6240\u6709\u7528\u6237\u90fd\u4e0d\u53d7\u9650\u5236\uff0cchroot_list_file \u65e0\u4f5c\u7528 \u5982\u679c\u7528\u6237\u53d7\u5230\u7981\u9522\uff0c\u90a3\u4e48\u8981\u6dfb\u52a0 allow_writeable_chroot=YES\uff0c\u6216\u8005\u53d6\u6d88\u4e3b\u76ee\u5f55\u7684\u5199\u6743\u9650 3. \u865a\u62df\u7528\u6237 anonymous_enable=NO \u7981\u6b62\u533f\u540d\u8bbf\u95ee local_enable=YES \u5f00\u542f\u672c\u5730\u672c\u5730\u7528\u6237\u8bbf\u95ee guest_enable=YES \u5f00\u542f\u865a\u62df\u7528\u6237\u8bbf\u95ee guest_username=virtftp \u6307\u5b9a\u865a\u62df\u7528\u6237\u4f7f\u7528\u7684\u7cfb\u7edf\u7528\u6237 pam_service_name=ftpvuser \u6307\u5b9aPAM\u6587\u4ef6 user_config_dir=/etc/vsftpd/vusers_conf \u6307\u5b9a\u865a\u62df\u7528\u6237\u914d\u7f6e\u6587\u4ef6 allow_writeable_chroot=YES \u5141\u8bb8\u5199\u5165\u7981\u9522\u7684\u76ee\u5f55 [root@server ~]# useradd virtftp -s /sbin/nologin [root@server ~]# vim /etc/vsftpd/vuser.list virtuser1 redhat virtuser2 redhat [root@server ~]# db_load -T -t hash /etc/vsftpd/vuser.list /etc/vsftpd/vuser.db [root@server ~]# vim /etc/pam.d/ftpvuser auth required pam_userdb.so db=/etc/vsftpd/vuser account required pam_userdb.so db=/etc/vsftpd/vuser [root@server ~]# mkdir /etc/vsftpd/vuser_conf [root@server ~]# vim /etc/vsftpd/vuser_conf/virtuser1 local_root=/home/virtftp/virtuser1 anon_upload_enable=YES anon_mkdir_write_enable=YES anon_other_write_enable=YES [root@server ~]# mkdir /home/virtftp/virtuser1 [root@server ~]# chmod 777 /home/virtftp/virtuser1 desktop \u4f7f\u7528 ftp \u5ba2\u6237\u7aef\u5de5\u5177\u8bbf\u95ee NFS \u5171\u4eab server \u5b89\u88c5\u8f6f\u4ef6\u5305 nfs-utils [root@server ~]# yum -y install nfs-utils \u7f16\u8f91 /etc/exports \u6587\u4ef6\uff0c\u6dfb\u52a0\u5171\u4eab [root@server ~]# vim /etc/exports /nfsshare 192.168.3.*(OPTIONS) \u5e38\u7528 OPTIONS \u5305\u62ec\uff1a * ro \u53ea\u8bfb rw \u8bfb\u5199 * root_squash \u6620\u5c04 root \u4e3a nfs \u533f\u540d\u7528\u6237 no_root_squash \u4e0d\u6620\u5c04 root \u4e3a nfs \u533f\u540d\u7528\u6237 all_squash \u6620\u5c04\u6240\u6709\u7528\u6237\u4e3a nfs \u533f\u540d\u7528\u6237 no_all_squash \u4e0d\u6620\u5c04 nfs \u533f\u540d\u7528\u6237\uff0c\u8bbf\u95ee\u7528\u6237\u4e0e\u672c\u5730\u5339\u914d\uff08UID\uff09 sync \u540c\u6b65 async \u5f02\u6b65 \u91cd\u542f\u670d\u52a1\uff0c\u5f00\u653e\u9632\u706b\u5899\u670d\u52a1 [root@server ~]# systemctl restart nfs-server [root@server ~]# systemctl enable nfs-server [root@server ~]# firewall-cmd --add-service=mountd --add-service=rpc-bind --add-service=nfs [root@server ~]# firewall-cmd --add-service=mountd --add-service=rpc-bind --add-service=nfs --permanent [root@server ~]# exportfs -rfv desktop \u4e34\u65f6\u6302\u8f7d [root@desktop ~]# yum -y install nfs-utils [root@desktop ~]# showmount -e 192.168.3.11 [root@desktop ~]# mkdir /mnt/nfsmount [root@desktop ~]# mount -t nfs 192.168.3.11:/nfsshare /mnt/nfsmount \u5f00\u673a\u81ea\u52a8\u6302\u8f7d [root@desktop ~]# vim /etc/fstab 192.168.3.11:/nfsshare /mnt/nfsmount nfs defaults 0 0 autofs \u6302\u8f7d [root@desktop ~]# yum -y install autofs [root@desktop ~]# vim /etc/auto.master /netshare\uff08\u6302\u8f7d\u76ee\u5f55\u4e0a\u7ea7\u76ee\u5f55\uff09 /etc/netauto\uff08\u6620\u5c04\u6587\u4ef6\uff09 [root@desktop ~]# vim /etc/nfsauto nfsmount -fstype=nfs,rw 192.168.3.11:/nfs samba \u5171\u4eab server \u5b89\u88c5 samba [root@server ~]# yum -y install samba \u65b0\u5efa\u5171\u4eab [root@server ~]# vim /etc/samba/smb.conf workgroup = WORKGROUP hosts allow = 127. 192.168.3. [public] ##\u5171\u4eab\u540d comment = Public Stuff ##\u8bf4\u660e path = /smbpub ##\u8def\u5f84 public = no ##\u516c\u5f00\uff0c\u53ef\u533f\u540d\u8bbf\u95ee writable = yes ##\u662f\u5426\u53ef\u5199 printable = no ##\u662f\u5426\u662f\u6253\u5370\u673a\uff0c\u5982\u679c\u5171\u4eab\u76ee\u5f55\u5fc5\u987b\u4e3ano write list = smbrw ##\u53ef\u5199\u540d\u5355 read list = smbro ##\u53ea\u8bfb\u540d\u5355 browseable = yes ##\u53ef\u6d4f\u89c8 \u521b\u5efa\u5171\u4eab\u76ee\u5f55\uff0c\u8bbe\u7f6e\u6743\u9650 [root@server ~]# mkdir /smbpub [root@server ~]# chmod 777 /smbpub [root@server ~]# semanage fcontext -a -t samba_share_t '/smbpub(/.*)?' [root@server ~]# restorecon -Rv /smbpub/ \u521b\u5efa samba \u7528\u6237 samba \u7528\u6237\u5fc5\u987b\u5728\u7cfb\u7edf\u4e2d\u5b58\u5728\uff0c\u901a\u8fc7 pdbedit \u548c smbclient \u5747\u53ef\u521b\u5efa samba \u7528\u6237 [root@server ~]# useradd -s /sbin/nologin smbrw [root@server ~]# useradd -s /sbin/nologin smbro [root@server ~]# (echo redhat;echo redhat) | pdbedit -a smbrw [root@server ~]# (echo redhat;echo redhat) | smbpasswd -a smbro [root@server ~]# systemctl restart smb nmb [root@server ~]# systemctl enable smb nmb \u5f00\u653e\u9632\u706b\u5899 [root@server ~]# firewall-cmd --add-service=samba --add-service=samba-client [root@server ~]# firewall-cmd --add-service=samba --add-service=samba-client --permanent desktop \u4e34\u65f6\u6302\u8f7d [root@desktop ~]# yum -y install cifs-utils samba-client [root@desktop ~]# mkdir /mnt/smbmount [root@desktop ~]# mount -t cifs -o username=smbrw,password=redhat //192.168.3.11/public /mnt/smbmount \u591a\u7528\u6237\u6302\u8f7d\uff0c\u5f00\u673a\u81ea\u52a8\u6302\u8f7d \u7528\u53ea\u8bfb\u7528\u6237\u6302\u8f7d\uff0c\u4e0d\u540c\u7684\u7528\u6237\u53ef\u4ee5\u66f4\u65b0\u4e0d\u540c\u51ed\u8bc1 /etc/fstab\u6240\u6709\u7528\u6237\u53ef\u8bfb\uff0c\u5c06 samba \u7528\u6237\u548c\u5bc6\u7801\u4fdd\u5b58\u5230 root \u5bb6\u76ee\u5f55\u53ef\u63d0\u9ad8\u5b89\u5168\u6027 [root@desktop ~]# vim /etc/fstab //192.168.3.11/public /mnt/smbpmnt cifs credentials=/root/smbpass,multiuser,sec=ntlmssp 0 0 [root@desktop ~]# echo \"username=smbro\" >> /root/smbpass [root@desktop ~]# echo \"password=redhat\" >> /root/smbpass [root@desktop ~]# mkdir /mnt/smbpub [root@desktop ~]# mount -a [user@desktop ~]# cifscreds add -u smbrw 192.168.3.11 ##\u66f4\u65b0\u7528\u6237\u51ed\u8bc1 autofs \u6302\u8f7d [root@desktop ~]# yum -y install autofs [root@desktop ~]# vim /etc/auto.master /netshare\uff08\u6302\u8f7d\u76ee\u5f55\u4e0a\u7ea7\u76ee\u5f55\uff09 /etc/netauto\uff08\u6620\u5c04\u6587\u4ef6\uff09 [root@desktop ~]# vim /etc/netauto smbmount -fstype=cifs,username=smbro,password=redhat ://192.168.3.11/public samba-client \u4e0a\u4f20\u4e0b\u8f7d [root@desktop ~]# yum -y install samba-client [root@desktop ~]# smbclient //172.25.0.11/public -U smbro%redhat smb: \\> lcd /etc smb: \\> put passwd NT_STATUS_ACCESS_DENIED opening remote file \\passwd [root@desktop ~]# smbclient //172.25.0.11/public -U smbrw%redhat smb: \\> lcd /etc smb: \\> put passwd putting file passwd as \\passwd (2091.6 kb/s) (average 2091.8 kb/s)","title":"\u7b2c3\u5929"},{"location":"RH254/day3/#3","text":"","title":"\u7b2c3\u5929"},{"location":"RH254/day3/#ftp","text":"","title":"FTP \u6587\u4ef6\u4f20\u8f93"},{"location":"RH254/day3/#server","text":"","title":"server"},{"location":"RH254/day3/#vsftpd","text":"[root@server ~]# yum -y install vsftpd \u914d\u7f6e\u6587\u4ef6 /etc/vsftpd/vsftpd.conf","title":"\u5b89\u88c5 vsftpd"},{"location":"RH254/day3/#1","text":"anonymous_enable=YES \u5f00\u542f\u533f\u540d\u8bbf\u95ee anon_umask=022 \u533f\u540d\u7528\u6237\u4e0a\u4f20\u7684 umask \u503c anon_upload_enable=YES \u5141\u8bb8\u533f\u540d\u7528\u6237\u4e0a\u4f20\u6587\u4ef6 anon_mkdir_write_enable=YES \u5141\u8bb8\u533f\u540d\u7528\u6237\u521b\u5efa\u76ee\u5f55 anon_other_write_enable=YES \u5141\u8bb8\u533f\u540d\u7528\u6237\u4fee\u6539\u6216\u5220\u9664\u76ee\u5f55","title":"1.  \u533f\u540d\u8bbf\u95ee"},{"location":"RH254/day3/#2","text":"anonymous_enable=NO \u7981\u6b62\u533f\u540d\u8bbf\u95ee local_enable=YES \u5f00\u542f\u672c\u5730\u672c\u5730\u7528\u6237\u8bbf\u95ee write_enable=YES \u662f\u5426\u6709\u5199\u6743\u9650 local_umask=022 \u672c\u5730\u7528\u6237\u4e0a\u4f20\u6587\u4ef6\u7684 umask \u503c userlist_enable=YES \u4f7f\u7528\u7528\u6237\u5217\u8868\uff0c\u540d\u5355\u6587\u4ef6\u4e3a user_list\uff08\u53ef\u80fd\u662f\u767d\u540d\u5355\uff0c\u4e5f\u53ef\u80fd\u662f\u9ed1\u540d\u5355\uff09\u548c ftpuser\uff08\u59cb\u7ec8\u662f\u9ed1\u540d\u5355\uff09 userlist_deny=YES \u5f00\u542f\u7528\u6237\u4f5c\u7528\u540d\u5355\u6587\u4ef6\u529f\u80fd userlist_enable=YES, userlist_deny=YES user_list \u4e3a\u9ed1\u540d\u5355\uff0c\u7981\u6b62 user_list \u4e2d\u7528\u6237\u767b\u5f55 userlist_enable=YES, userlist_deny=NO user_list \u4e3a\u767d\u540d\u5355\uff0c\u4ec5\u5141\u8bb8 user_list \u4e2d\u7684\u7528\u6237\u767b\u5f55 chroot_local_user=YES \u7528\u6237\u7981\u9522\u5728\u4e3b\u76ee\u5f55\uff0c\u4e0d\u5141\u8bb8\u8df3\u8f6c\u4e0a\u7ea7\u76ee\u5f55 chroot_list_enable=YES \u662f\u5426\u4f7f\u7528\u7981\u9522\u7528\u6237\u5217\u8868 chroot_local_user=YES, chroot_list_enable=YES chroot_list_file \u4e3a\u767d\u540d\u5355\uff0c\u4e0d\u53d7\u9650\u5236 chroot_local_user=NO, chroot_list_enable=YES chroot_list_file \u4e3a\u9ed1\u540d\u5355\uff0c\u53d7\u5230\u9650\u5236 chroot_local_user=YES, chroot_list_enable=NO \u6240\u6709\u7528\u6237\u90fd\u53d7\u5230\u9650\u5236\uff0cchroot_list_file \u65e0\u4f5c\u7528 chroot_local_user=NO, chroot_list_enable=NO \u6240\u6709\u7528\u6237\u90fd\u4e0d\u53d7\u9650\u5236\uff0cchroot_list_file \u65e0\u4f5c\u7528 \u5982\u679c\u7528\u6237\u53d7\u5230\u7981\u9522\uff0c\u90a3\u4e48\u8981\u6dfb\u52a0 allow_writeable_chroot=YES\uff0c\u6216\u8005\u53d6\u6d88\u4e3b\u76ee\u5f55\u7684\u5199\u6743\u9650","title":"2. \u672c\u5730\u7528\u6237"},{"location":"RH254/day3/#3_1","text":"anonymous_enable=NO \u7981\u6b62\u533f\u540d\u8bbf\u95ee local_enable=YES \u5f00\u542f\u672c\u5730\u672c\u5730\u7528\u6237\u8bbf\u95ee guest_enable=YES \u5f00\u542f\u865a\u62df\u7528\u6237\u8bbf\u95ee guest_username=virtftp \u6307\u5b9a\u865a\u62df\u7528\u6237\u4f7f\u7528\u7684\u7cfb\u7edf\u7528\u6237 pam_service_name=ftpvuser \u6307\u5b9aPAM\u6587\u4ef6 user_config_dir=/etc/vsftpd/vusers_conf \u6307\u5b9a\u865a\u62df\u7528\u6237\u914d\u7f6e\u6587\u4ef6 allow_writeable_chroot=YES \u5141\u8bb8\u5199\u5165\u7981\u9522\u7684\u76ee\u5f55 [root@server ~]# useradd virtftp -s /sbin/nologin [root@server ~]# vim /etc/vsftpd/vuser.list virtuser1 redhat virtuser2 redhat [root@server ~]# db_load -T -t hash /etc/vsftpd/vuser.list /etc/vsftpd/vuser.db [root@server ~]# vim /etc/pam.d/ftpvuser auth required pam_userdb.so db=/etc/vsftpd/vuser account required pam_userdb.so db=/etc/vsftpd/vuser [root@server ~]# mkdir /etc/vsftpd/vuser_conf [root@server ~]# vim /etc/vsftpd/vuser_conf/virtuser1 local_root=/home/virtftp/virtuser1 anon_upload_enable=YES anon_mkdir_write_enable=YES anon_other_write_enable=YES [root@server ~]# mkdir /home/virtftp/virtuser1 [root@server ~]# chmod 777 /home/virtftp/virtuser1","title":"3. \u865a\u62df\u7528\u6237"},{"location":"RH254/day3/#desktop-ftp","text":"","title":"desktop \u4f7f\u7528 ftp \u5ba2\u6237\u7aef\u5de5\u5177\u8bbf\u95ee"},{"location":"RH254/day3/#nfs","text":"","title":"NFS \u5171\u4eab"},{"location":"RH254/day3/#server_1","text":"","title":"server"},{"location":"RH254/day3/#nfs-utils","text":"[root@server ~]# yum -y install nfs-utils","title":"\u5b89\u88c5\u8f6f\u4ef6\u5305 nfs-utils"},{"location":"RH254/day3/#etcexports","text":"[root@server ~]# vim /etc/exports /nfsshare 192.168.3.*(OPTIONS) \u5e38\u7528 OPTIONS \u5305\u62ec\uff1a * ro \u53ea\u8bfb rw \u8bfb\u5199 * root_squash \u6620\u5c04 root \u4e3a nfs \u533f\u540d\u7528\u6237 no_root_squash \u4e0d\u6620\u5c04 root \u4e3a nfs \u533f\u540d\u7528\u6237 all_squash \u6620\u5c04\u6240\u6709\u7528\u6237\u4e3a nfs \u533f\u540d\u7528\u6237 no_all_squash \u4e0d\u6620\u5c04 nfs \u533f\u540d\u7528\u6237\uff0c\u8bbf\u95ee\u7528\u6237\u4e0e\u672c\u5730\u5339\u914d\uff08UID\uff09 sync \u540c\u6b65 async \u5f02\u6b65","title":"\u7f16\u8f91 /etc/exports \u6587\u4ef6\uff0c\u6dfb\u52a0\u5171\u4eab"},{"location":"RH254/day3/#_1","text":"[root@server ~]# systemctl restart nfs-server [root@server ~]# systemctl enable nfs-server [root@server ~]# firewall-cmd --add-service=mountd --add-service=rpc-bind --add-service=nfs [root@server ~]# firewall-cmd --add-service=mountd --add-service=rpc-bind --add-service=nfs --permanent [root@server ~]# exportfs -rfv","title":"\u91cd\u542f\u670d\u52a1\uff0c\u5f00\u653e\u9632\u706b\u5899\u670d\u52a1"},{"location":"RH254/day3/#desktop","text":"","title":"desktop"},{"location":"RH254/day3/#_2","text":"[root@desktop ~]# yum -y install nfs-utils [root@desktop ~]# showmount -e 192.168.3.11 [root@desktop ~]# mkdir /mnt/nfsmount [root@desktop ~]# mount -t nfs 192.168.3.11:/nfsshare /mnt/nfsmount","title":"\u4e34\u65f6\u6302\u8f7d"},{"location":"RH254/day3/#_3","text":"[root@desktop ~]# vim /etc/fstab 192.168.3.11:/nfsshare /mnt/nfsmount nfs defaults 0 0","title":"\u5f00\u673a\u81ea\u52a8\u6302\u8f7d"},{"location":"RH254/day3/#autofs","text":"[root@desktop ~]# yum -y install autofs [root@desktop ~]# vim /etc/auto.master /netshare\uff08\u6302\u8f7d\u76ee\u5f55\u4e0a\u7ea7\u76ee\u5f55\uff09 /etc/netauto\uff08\u6620\u5c04\u6587\u4ef6\uff09 [root@desktop ~]# vim /etc/nfsauto nfsmount -fstype=nfs,rw 192.168.3.11:/nfs","title":"autofs \u6302\u8f7d"},{"location":"RH254/day3/#samba","text":"","title":"samba \u5171\u4eab"},{"location":"RH254/day3/#server_2","text":"","title":"server"},{"location":"RH254/day3/#samba_1","text":"[root@server ~]# yum -y install samba","title":"\u5b89\u88c5 samba"},{"location":"RH254/day3/#_4","text":"[root@server ~]# vim /etc/samba/smb.conf workgroup = WORKGROUP hosts allow = 127. 192.168.3. [public] ##\u5171\u4eab\u540d comment = Public Stuff ##\u8bf4\u660e path = /smbpub ##\u8def\u5f84 public = no ##\u516c\u5f00\uff0c\u53ef\u533f\u540d\u8bbf\u95ee writable = yes ##\u662f\u5426\u53ef\u5199 printable = no ##\u662f\u5426\u662f\u6253\u5370\u673a\uff0c\u5982\u679c\u5171\u4eab\u76ee\u5f55\u5fc5\u987b\u4e3ano write list = smbrw ##\u53ef\u5199\u540d\u5355 read list = smbro ##\u53ea\u8bfb\u540d\u5355 browseable = yes ##\u53ef\u6d4f\u89c8","title":"\u65b0\u5efa\u5171\u4eab"},{"location":"RH254/day3/#_5","text":"[root@server ~]# mkdir /smbpub [root@server ~]# chmod 777 /smbpub [root@server ~]# semanage fcontext -a -t samba_share_t '/smbpub(/.*)?' [root@server ~]# restorecon -Rv /smbpub/","title":"\u521b\u5efa\u5171\u4eab\u76ee\u5f55\uff0c\u8bbe\u7f6e\u6743\u9650"},{"location":"RH254/day3/#samba_2","text":"samba \u7528\u6237\u5fc5\u987b\u5728\u7cfb\u7edf\u4e2d\u5b58\u5728\uff0c\u901a\u8fc7 pdbedit \u548c smbclient \u5747\u53ef\u521b\u5efa samba \u7528\u6237 [root@server ~]# useradd -s /sbin/nologin smbrw [root@server ~]# useradd -s /sbin/nologin smbro [root@server ~]# (echo redhat;echo redhat) | pdbedit -a smbrw [root@server ~]# (echo redhat;echo redhat) | smbpasswd -a smbro [root@server ~]# systemctl restart smb nmb [root@server ~]# systemctl enable smb nmb","title":"\u521b\u5efa samba \u7528\u6237"},{"location":"RH254/day3/#_6","text":"[root@server ~]# firewall-cmd --add-service=samba --add-service=samba-client [root@server ~]# firewall-cmd --add-service=samba --add-service=samba-client --permanent","title":"\u5f00\u653e\u9632\u706b\u5899"},{"location":"RH254/day3/#desktop_1","text":"","title":"desktop"},{"location":"RH254/day3/#_7","text":"[root@desktop ~]# yum -y install cifs-utils samba-client [root@desktop ~]# mkdir /mnt/smbmount [root@desktop ~]# mount -t cifs -o username=smbrw,password=redhat //192.168.3.11/public /mnt/smbmount","title":"\u4e34\u65f6\u6302\u8f7d"},{"location":"RH254/day3/#_8","text":"\u7528\u53ea\u8bfb\u7528\u6237\u6302\u8f7d\uff0c\u4e0d\u540c\u7684\u7528\u6237\u53ef\u4ee5\u66f4\u65b0\u4e0d\u540c\u51ed\u8bc1 /etc/fstab\u6240\u6709\u7528\u6237\u53ef\u8bfb\uff0c\u5c06 samba \u7528\u6237\u548c\u5bc6\u7801\u4fdd\u5b58\u5230 root \u5bb6\u76ee\u5f55\u53ef\u63d0\u9ad8\u5b89\u5168\u6027 [root@desktop ~]# vim /etc/fstab //192.168.3.11/public /mnt/smbpmnt cifs credentials=/root/smbpass,multiuser,sec=ntlmssp 0 0 [root@desktop ~]# echo \"username=smbro\" >> /root/smbpass [root@desktop ~]# echo \"password=redhat\" >> /root/smbpass [root@desktop ~]# mkdir /mnt/smbpub [root@desktop ~]# mount -a [user@desktop ~]# cifscreds add -u smbrw 192.168.3.11 ##\u66f4\u65b0\u7528\u6237\u51ed\u8bc1","title":"\u591a\u7528\u6237\u6302\u8f7d\uff0c\u5f00\u673a\u81ea\u52a8\u6302\u8f7d"},{"location":"RH254/day3/#autofs_1","text":"[root@desktop ~]# yum -y install autofs [root@desktop ~]# vim /etc/auto.master /netshare\uff08\u6302\u8f7d\u76ee\u5f55\u4e0a\u7ea7\u76ee\u5f55\uff09 /etc/netauto\uff08\u6620\u5c04\u6587\u4ef6\uff09 [root@desktop ~]# vim /etc/netauto smbmount -fstype=cifs,username=smbro,password=redhat ://192.168.3.11/public","title":"autofs \u6302\u8f7d"},{"location":"RH254/day3/#samba-client","text":"[root@desktop ~]# yum -y install samba-client [root@desktop ~]# smbclient //172.25.0.11/public -U smbro%redhat smb: \\> lcd /etc smb: \\> put passwd NT_STATUS_ACCESS_DENIED opening remote file \\passwd [root@desktop ~]# smbclient //172.25.0.11/public -U smbrw%redhat smb: \\> lcd /etc smb: \\> put passwd putting file passwd as \\passwd (2091.6 kb/s) (average 2091.8 kb/s)","title":"samba-client \u4e0a\u4f20\u4e0b\u8f7d"},{"location":"RH254/day4/","text":"\u7b2c4\u5929 \u8fdc\u7a0b\u5757\u5b58\u50a8 iSCSI server [root@server ~]# yum -y install targetcli [root@server ~]# targetcli >/backstores/block create netdisk1 /dev/sdb >/iscsi create iqn.2019-06.com.example:server >/iscsi/iqn.2019-06.com.example:server/tpg1/acls create iqn.2019-06.com.example:desktop >/iscsi/iqn.2019-06.com.example:server/tpg1/luns create /backstores/server.lv1 >/iscsi/iqn.2019-06.com.example:server/tpg1/portals delete 0.0.0.0 3260 >/iscsi/iqn.2019-06.com.example:server/tpg1/portals create 192.168.3.11 3260 >saveconfig >exit [root@server ~]# systemctl restart target [root@server ~]# systemctl enable target [root@server ~]# firewall-cmd --add-service=iscsi-target [root@server ~]# firewall-cmd --add-service=iscsi-target --permanent desktop [root@desktop ~]# yum -y install iscsi-initiator-utils [root@desktop ~]# vim /etc/iscsi/initiatorname.iscsi InitiatorName=iqn.2019-06.com.example:desktop\uff08ACL\uff09 [root@desktop ~]# iscsiadm -m discovery -t st -p 192.168.3.11 192.168.3.11:3260,1 iqn.2019-06.com.example:server [root@desktop ~]# systemctl restart iscsi iscsid [root@desktop ~]# iscsiadm -m node -T iqn.2019-06.com.example:server -l [root@desktop ~]# systemctl enable iscsi iscsid \u90ae\u4ef6\u670d\u52a1\u5668 \u5e38\u89c1\u7684\u90ae\u4ef6\u534f\u8bae\uff1a \u7b80\u5355\u90ae\u4ef6\u4f20\u8f93\u534f\u8bae\uff08Simple Mail Transfer Protocol\uff0cSMTP\uff09\uff1a\u7528\u4e8e\u53d1\u9001\u548c\u4e2d\u8f6c\u53d1\u51fa\u7684\u7535\u5b50\u90ae\u4ef6\uff0c\u5360\u7528\u670d\u52a1\u5668\u768425/TCP\u7aef\u53e3\u3002 \u90ae\u5c40\u534f\u8bae\u7248\u672c3\uff08Post Office Protocol 3\uff09\uff1a\u7528\u4e8e\u5c06\u7535\u5b50\u90ae\u4ef6\u5b58\u50a8\u5230\u672c\u5730\u4e3b\u673a\uff0c\u5360\u7528\u670d\u52a1\u5668\u7684110/TCP\u7aef\u53e3\u3002 Internet\u6d88\u606f\u8bbf\u95ee\u534f\u8bae\u7248\u672c4\uff08Internet Message Access Protocol 4\uff09\uff1a\u7528\u4e8e\u5728\u672c\u5730\u4e3b\u673a\u4e0a\u8bbf\u95ee\u90ae\u4ef6\uff0c\u5360\u7528\u670d\u52a1\u5668\u7684143/TCP\u7aef\u53e3\u3002 \u7535\u5b50\u90ae\u4ef6\u57fa\u672c\u6982\u5ff5\uff1a MUA\uff08Mail User Agent\uff09\u63a5\u6536\u90ae\u4ef6\u6240\u4f7f\u7528\u7684\u90ae\u4ef6\u5ba2\u6237\u7aef\uff0c\u4f7f\u7528IMAP\u6216POP3\u534f\u8bae\u4e0e\u670d\u52a1\u5668\u901a\u4fe1 MTA\uff08Mail Transfer Agent\uff09 \u901a\u8fc7SMTP\u534f\u8bae\u53d1\u9001\u3001\u8f6c\u53d1\u90ae\u4ef6 MDA\uff08Mail Deliver Agent\uff09\u5c06MTA\u63a5\u6536\u5230\u7684\u90ae\u4ef6\u4fdd\u5b58\u5230\u78c1\u76d8\u6216\u6307\u5b9a\u5730\u65b9\uff0c\u901a\u5e38\u4f1a\u8fdb\u884c\u5783\u573e\u90ae\u4ef6\u53ca\u75c5\u6bd2\u626b\u63cf MRA\uff08Mail Receive Agent\uff09\u8d1f\u8d23\u5b9e\u73b0IMAP\u4e0ePOP3\u534f\u8bae\uff0c\u4e0eMUA\u8fdb\u884c\u4ea4\u4e92 \u5e38\u7528\u7684MUA\u6709\uff1aoutlook\u3001thunderbird\u3001mutt \u5e38\u7528\u7684MTA\u670d\u52a1\u6709\uff1asendmail\u3001postfix \u5e38\u7528\u7684MDA\u6709\uff1aprocmail\u3001dropmail \u5e38\u7528\u7684MRA\u6709\uff1adovecot server \u5b89\u88c5\u8f6f\u4ef6 [root@server0 ~]# yum -y install postfix dovecot bind \u914d\u7f6e DNS \u89e3\u6790 ##\u914d\u7f6e\u7aef\u53e3\u76d1\u542c\u548c\u521b\u5efa\u89e3\u6790\u57df [root@server0 ~]# vim /etc/named.conf listen-on port 53 { any; }; listen-on-v6 port 53 { any; }; allow-query { any; }; zone \"server.com\" IN { type master; file \"server\"; }; zone \"desktop.com\" IN { type master; file \"desktop\"; }; [root@server0 ~]# cp -p /var/named/named.localhost /var/named/server [root@server0 ~]# cp -p /var/named/named.localhost /var/named/desktop [root@server0 ~]# vim /var/named/server $TTL 1D @ IN SOA server.com. root.server.com. ( 0 ; serial 1D ; refresh 1H ; retry 1W ; expire 3H ) ; minimum IN NS ns.server.com. ns IN A 172.25.0.11 mail IN A 172.25.0.11 @ IN A 172.25.0.11 IN MX 10 mail.server.com. [root@server0 ~]# vim /var/named/desktop $TTL 1D @ IN SOA desktop.com. root.desktop.com. ( 0 ; serial 1D ; refresh 1H ; retry 1W ; expire 3H ) ; minimum IN NS ns.desktop.com. ns IN A 172.25.0.10 mail IN A 172.25.0.10 @ IN A 172.25.0.10 IN MX 10 mail.desktop.com. \u68c0\u6d4b\u662f\u5426\u5b58\u5728\u8bed\u6cd5\u9519\u8bef [root@server ~]# named-checkconf [root@server ~]# named-checkzone server.com /var/named/server [root@server ~]# named-checkzone desktop.com /var/named/desktop \u4fee\u6539\u672c\u5730 DNS [root@server ~]# nmcli con modify \"System eth0\" ipv4.dns 172.25.0.11 ipv4.ignore-auto-dns yes [root@server ~]# systemctl restart NetworkManager \u914d\u7f6e postfix [root@server ~]# hostnamectl set-hostname server.example.com [root@server ~]# postconf -e 'myhostname = server.example.com' [root@server ~]# postconf -e 'mydomain = mail.server.com' [root@server ~]# postconf -e 'myorigin = $mydomain' [root@server ~]# postconf -e 'inet_interfaces = all' [root@server ~]# postconf -e 'mydestination = $myhostname, $mydomain, localhost' \u914d\u7f6e dovecot [root@server ~]# vim /etc/dovecot/dovecot.conf protocols = imap pop3 lmtp disable_plaintext_auth = no login_trusted_networks = 172.25.0.0/24 [root@server ~]# vim /etc/dovecot/conf.d/10-mail.conf mail_location = mbox:~/mail:INBOX=/var/mail/%u [root@server ~]# mkdir -p mail/.imap/INBOX [root@server ~]# su - student [student@server ~]$ mkdir -p mail/.imap/INBOX [root@server ~]# systemctl restart postfix dovecot \u9632\u706b\u5899\u5f00\u653e\u670d\u52a1 [root@desktop ~]# firewall-cmd --add-service=smtp --add-service=imap --add-service=pop3 --add-service=dns [root@desktop ~]# firewall-cmd --add-service=smtp --add-service=imap --add-service=pop3 --add-service=dns --permanent desktop \u5b89\u88c5\u8f6f\u4ef6 [root@desktop ~]# yum -y install postfix dovecot \u4fee\u6539\u672c\u5730 DNS [root@desktop ~]# nmcli con modify \"System eth0\" ipv4.dns 172.25.0.11 ipv4.ignore-auto-dns yes [root@desktop ~]# systemctl restart NetworkManager \u914d\u7f6e postfix [root@desktop ~]# hostnamectl set-hostname desktop.example.com [root@desktop ~]# postconf -e 'myhostname = desktop.example.com' [root@desktop ~]# postconf -e 'mydomain = mail.desktop.com' [root@desktop ~]# postconf -e 'myorigin = $mydomain' [root@desktop ~]# postconf -e 'inet_interfaces = all' [root@desktop ~]# postconf -e 'mydestination = $myhostname, $mydomain, localhost' \u914d\u7f6e dovecot [root@desktop ~]# vim /etc/dovecot/dovecot.conf protocols = imap pop3 lmtp disable_plaintext_auth = no login_trusted_networks = 172.25.0.0/24 [root@desktop ~]# vim /etc/dovecot/conf.d/10-mail.conf mail_location = mbox:~/mail:INBOX=/var/mail/%u [root@desktop ~]# mkdir -p mail/.imap/INBOX [root@desktop ~]# su - student [student@desktop ~]$ mkdir -p mail/.imap/INBOX [root@desktop ~]# systemctl restart postfix dovecot \u9632\u706b\u5899\u5f00\u653e\u670d\u52a1 [root@desktop ~]# firewall-cmd --add-service=smtp --add-service=imap --add-service=pop3 [root@desktop ~]# firewall-cmd --add-service=smtp --add-service=imap --add-service=pop3 --permanent \u6d4b\u8bd5 [root@desktop ~]# echo 'test from desktop' | mail -s 'desktop to server' root@mail.server.com [root@server ~]# mail [root@server ~]# echo 'test from server' | mail -s 'server to desktop' root@mail.desktop.coms [root@desktop ~]# mail","title":"\u7b2c4\u5929"},{"location":"RH254/day4/#4","text":"","title":"\u7b2c4\u5929"},{"location":"RH254/day4/#iscsi","text":"","title":"\u8fdc\u7a0b\u5757\u5b58\u50a8 iSCSI"},{"location":"RH254/day4/#server","text":"[root@server ~]# yum -y install targetcli [root@server ~]# targetcli >/backstores/block create netdisk1 /dev/sdb >/iscsi create iqn.2019-06.com.example:server >/iscsi/iqn.2019-06.com.example:server/tpg1/acls create iqn.2019-06.com.example:desktop >/iscsi/iqn.2019-06.com.example:server/tpg1/luns create /backstores/server.lv1 >/iscsi/iqn.2019-06.com.example:server/tpg1/portals delete 0.0.0.0 3260 >/iscsi/iqn.2019-06.com.example:server/tpg1/portals create 192.168.3.11 3260 >saveconfig >exit [root@server ~]# systemctl restart target [root@server ~]# systemctl enable target [root@server ~]# firewall-cmd --add-service=iscsi-target [root@server ~]# firewall-cmd --add-service=iscsi-target --permanent","title":"server"},{"location":"RH254/day4/#desktop","text":"[root@desktop ~]# yum -y install iscsi-initiator-utils [root@desktop ~]# vim /etc/iscsi/initiatorname.iscsi InitiatorName=iqn.2019-06.com.example:desktop\uff08ACL\uff09 [root@desktop ~]# iscsiadm -m discovery -t st -p 192.168.3.11 192.168.3.11:3260,1 iqn.2019-06.com.example:server [root@desktop ~]# systemctl restart iscsi iscsid [root@desktop ~]# iscsiadm -m node -T iqn.2019-06.com.example:server -l [root@desktop ~]# systemctl enable iscsi iscsid","title":"desktop"},{"location":"RH254/day4/#_1","text":"\u5e38\u89c1\u7684\u90ae\u4ef6\u534f\u8bae\uff1a \u7b80\u5355\u90ae\u4ef6\u4f20\u8f93\u534f\u8bae\uff08Simple Mail Transfer Protocol\uff0cSMTP\uff09\uff1a\u7528\u4e8e\u53d1\u9001\u548c\u4e2d\u8f6c\u53d1\u51fa\u7684\u7535\u5b50\u90ae\u4ef6\uff0c\u5360\u7528\u670d\u52a1\u5668\u768425/TCP\u7aef\u53e3\u3002 \u90ae\u5c40\u534f\u8bae\u7248\u672c3\uff08Post Office Protocol 3\uff09\uff1a\u7528\u4e8e\u5c06\u7535\u5b50\u90ae\u4ef6\u5b58\u50a8\u5230\u672c\u5730\u4e3b\u673a\uff0c\u5360\u7528\u670d\u52a1\u5668\u7684110/TCP\u7aef\u53e3\u3002 Internet\u6d88\u606f\u8bbf\u95ee\u534f\u8bae\u7248\u672c4\uff08Internet Message Access Protocol 4\uff09\uff1a\u7528\u4e8e\u5728\u672c\u5730\u4e3b\u673a\u4e0a\u8bbf\u95ee\u90ae\u4ef6\uff0c\u5360\u7528\u670d\u52a1\u5668\u7684143/TCP\u7aef\u53e3\u3002 \u7535\u5b50\u90ae\u4ef6\u57fa\u672c\u6982\u5ff5\uff1a MUA\uff08Mail User Agent\uff09\u63a5\u6536\u90ae\u4ef6\u6240\u4f7f\u7528\u7684\u90ae\u4ef6\u5ba2\u6237\u7aef\uff0c\u4f7f\u7528IMAP\u6216POP3\u534f\u8bae\u4e0e\u670d\u52a1\u5668\u901a\u4fe1 MTA\uff08Mail Transfer Agent\uff09 \u901a\u8fc7SMTP\u534f\u8bae\u53d1\u9001\u3001\u8f6c\u53d1\u90ae\u4ef6 MDA\uff08Mail Deliver Agent\uff09\u5c06MTA\u63a5\u6536\u5230\u7684\u90ae\u4ef6\u4fdd\u5b58\u5230\u78c1\u76d8\u6216\u6307\u5b9a\u5730\u65b9\uff0c\u901a\u5e38\u4f1a\u8fdb\u884c\u5783\u573e\u90ae\u4ef6\u53ca\u75c5\u6bd2\u626b\u63cf MRA\uff08Mail Receive Agent\uff09\u8d1f\u8d23\u5b9e\u73b0IMAP\u4e0ePOP3\u534f\u8bae\uff0c\u4e0eMUA\u8fdb\u884c\u4ea4\u4e92 \u5e38\u7528\u7684MUA\u6709\uff1aoutlook\u3001thunderbird\u3001mutt \u5e38\u7528\u7684MTA\u670d\u52a1\u6709\uff1asendmail\u3001postfix \u5e38\u7528\u7684MDA\u6709\uff1aprocmail\u3001dropmail \u5e38\u7528\u7684MRA\u6709\uff1adovecot","title":"\u90ae\u4ef6\u670d\u52a1\u5668"},{"location":"RH254/day4/#server_1","text":"","title":"server"},{"location":"RH254/day4/#_2","text":"[root@server0 ~]# yum -y install postfix dovecot bind","title":"\u5b89\u88c5\u8f6f\u4ef6"},{"location":"RH254/day4/#dns","text":"##\u914d\u7f6e\u7aef\u53e3\u76d1\u542c\u548c\u521b\u5efa\u89e3\u6790\u57df [root@server0 ~]# vim /etc/named.conf listen-on port 53 { any; }; listen-on-v6 port 53 { any; }; allow-query { any; }; zone \"server.com\" IN { type master; file \"server\"; }; zone \"desktop.com\" IN { type master; file \"desktop\"; }; [root@server0 ~]# cp -p /var/named/named.localhost /var/named/server [root@server0 ~]# cp -p /var/named/named.localhost /var/named/desktop [root@server0 ~]# vim /var/named/server $TTL 1D @ IN SOA server.com. root.server.com. ( 0 ; serial 1D ; refresh 1H ; retry 1W ; expire 3H ) ; minimum IN NS ns.server.com. ns IN A 172.25.0.11 mail IN A 172.25.0.11 @ IN A 172.25.0.11 IN MX 10 mail.server.com. [root@server0 ~]# vim /var/named/desktop $TTL 1D @ IN SOA desktop.com. root.desktop.com. ( 0 ; serial 1D ; refresh 1H ; retry 1W ; expire 3H ) ; minimum IN NS ns.desktop.com. ns IN A 172.25.0.10 mail IN A 172.25.0.10 @ IN A 172.25.0.10 IN MX 10 mail.desktop.com.","title":"\u914d\u7f6e DNS \u89e3\u6790"},{"location":"RH254/day4/#_3","text":"[root@server ~]# named-checkconf [root@server ~]# named-checkzone server.com /var/named/server [root@server ~]# named-checkzone desktop.com /var/named/desktop","title":"\u68c0\u6d4b\u662f\u5426\u5b58\u5728\u8bed\u6cd5\u9519\u8bef"},{"location":"RH254/day4/#dns_1","text":"[root@server ~]# nmcli con modify \"System eth0\" ipv4.dns 172.25.0.11 ipv4.ignore-auto-dns yes [root@server ~]# systemctl restart NetworkManager","title":"\u4fee\u6539\u672c\u5730 DNS"},{"location":"RH254/day4/#postfix","text":"[root@server ~]# hostnamectl set-hostname server.example.com [root@server ~]# postconf -e 'myhostname = server.example.com' [root@server ~]# postconf -e 'mydomain = mail.server.com' [root@server ~]# postconf -e 'myorigin = $mydomain' [root@server ~]# postconf -e 'inet_interfaces = all' [root@server ~]# postconf -e 'mydestination = $myhostname, $mydomain, localhost'","title":"\u914d\u7f6e postfix"},{"location":"RH254/day4/#dovecot","text":"[root@server ~]# vim /etc/dovecot/dovecot.conf protocols = imap pop3 lmtp disable_plaintext_auth = no login_trusted_networks = 172.25.0.0/24 [root@server ~]# vim /etc/dovecot/conf.d/10-mail.conf mail_location = mbox:~/mail:INBOX=/var/mail/%u [root@server ~]# mkdir -p mail/.imap/INBOX [root@server ~]# su - student [student@server ~]$ mkdir -p mail/.imap/INBOX [root@server ~]# systemctl restart postfix dovecot","title":"\u914d\u7f6e dovecot"},{"location":"RH254/day4/#_4","text":"[root@desktop ~]# firewall-cmd --add-service=smtp --add-service=imap --add-service=pop3 --add-service=dns [root@desktop ~]# firewall-cmd --add-service=smtp --add-service=imap --add-service=pop3 --add-service=dns --permanent","title":"\u9632\u706b\u5899\u5f00\u653e\u670d\u52a1"},{"location":"RH254/day4/#desktop_1","text":"","title":"desktop"},{"location":"RH254/day4/#_5","text":"[root@desktop ~]# yum -y install postfix dovecot","title":"\u5b89\u88c5\u8f6f\u4ef6"},{"location":"RH254/day4/#dns_2","text":"[root@desktop ~]# nmcli con modify \"System eth0\" ipv4.dns 172.25.0.11 ipv4.ignore-auto-dns yes [root@desktop ~]# systemctl restart NetworkManager","title":"\u4fee\u6539\u672c\u5730 DNS"},{"location":"RH254/day4/#postfix_1","text":"[root@desktop ~]# hostnamectl set-hostname desktop.example.com [root@desktop ~]# postconf -e 'myhostname = desktop.example.com' [root@desktop ~]# postconf -e 'mydomain = mail.desktop.com' [root@desktop ~]# postconf -e 'myorigin = $mydomain' [root@desktop ~]# postconf -e 'inet_interfaces = all' [root@desktop ~]# postconf -e 'mydestination = $myhostname, $mydomain, localhost'","title":"\u914d\u7f6e postfix"},{"location":"RH254/day4/#dovecot_1","text":"[root@desktop ~]# vim /etc/dovecot/dovecot.conf protocols = imap pop3 lmtp disable_plaintext_auth = no login_trusted_networks = 172.25.0.0/24 [root@desktop ~]# vim /etc/dovecot/conf.d/10-mail.conf mail_location = mbox:~/mail:INBOX=/var/mail/%u [root@desktop ~]# mkdir -p mail/.imap/INBOX [root@desktop ~]# su - student [student@desktop ~]$ mkdir -p mail/.imap/INBOX [root@desktop ~]# systemctl restart postfix dovecot","title":"\u914d\u7f6e dovecot"},{"location":"RH254/day4/#_6","text":"[root@desktop ~]# firewall-cmd --add-service=smtp --add-service=imap --add-service=pop3 [root@desktop ~]# firewall-cmd --add-service=smtp --add-service=imap --add-service=pop3 --permanent","title":"\u9632\u706b\u5899\u5f00\u653e\u670d\u52a1"},{"location":"RH254/day4/#_7","text":"[root@desktop ~]# echo 'test from desktop' | mail -s 'desktop to server' root@mail.server.com [root@server ~]# mail [root@server ~]# echo 'test from server' | mail -s 'server to desktop' root@mail.desktop.coms [root@desktop ~]# mail","title":"\u6d4b\u8bd5"},{"location":"RH254/day5/","text":"\u7b2c5\u5929 mariadb \u6570\u636e\u5e93 \u57fa\u7840\u64cd\u4f5c \u5b89\u88c5 mariadb [root@server ~]# yum -y install mariadb mariadb-server \u542f\u52a8 mariadb \u670d\u52a1 [root@server ~]# systemctl restart mariadb \u521d\u59cb\u5316 \u8bbe\u7f6e root \u5bc6\u7801\uff0c\u79fb\u9664\u533f\u540d\u7528\u6237\uff0c\u5173\u95ed\u8fdc\u7a0b\u8bbf\u95ee\u7b49\u4e00\u7cfb\u5217\u5b89\u5168\u64cd\u4f5c [root@server ~]# mysql_secure_installation \u7528\u6570\u636e\u5e93\u7684root\u7528\u6237\u767b\u5f55\uff0c\u5bc6\u7801\u4e3aredhat [root@server ~]# mysql -uroot -predhat \u67e5\u770b\u6570\u636e\u5e93 MariaDB [(none)]> show databases; +--------------------+ | Database | +--------------------+ | information_schema | | mysql | | performance_schema | +--------------------+ \u521b\u5efa\u6570\u636e\u5e93 MariaDB [(none)]> create database testsql; \u4f7f\u7528\u6570\u636e\u5e93 MariaDB [(none)]> use testsql; MariaDB [testsql]> \u67e5\u770b\u6570\u636e\u8868 MariaDB [testsql]> show tables; \u521b\u5efa\u8868 MariaDB [testsql]> create table user(id int(3),name varchar(30)); \u63d2\u5165\u6570\u636e MariaDB [testsql]> insert into user values(1,'zhangsan'); MariaDB [testsql]> insert into user values(2,'lisi'); MariaDB [testsql]> insert into user values(3,'wangwu'); \u67e5\u770b\u8868\u4e2d\u6570\u636e MariaDB [testsql]> select * from user; +------+----------+ | id | name | +------+----------+ | 1 | zhangsan | | 2 | lisi | | 3 | wangwu | +------+----------+ \u5220\u9664id\u4e3a1\u7684\u6570\u636e MariaDB [testsql]> delete from user where id=1; MariaDB [testsql]> select * from user; +------+--------+ | id | name | +------+--------+ | 2 | lisi | | 3 | wangwu | +------+--------+ \u66f4\u65b0id\u4e3a3\u7684\u6570\u636ename\u5b57\u6bb5\u4e3azhaoliu MariaDB [testsql]> update user set name=\"zhaoliu\" where id=3; MariaDB [testsql]> select * from user; +------+---------+ | id | name | +------+---------+ | 2 | lisi | | 3 | zhaoliu | +------+---------+ \u5220\u9664\u6570\u636e\u8868 MariaDB [testsql]> drop table user; \u5220\u9664testsql\u6570\u636e\u5e93 MariaDB [testsql]> drop database testsql; \u521b\u5efa\u6570\u636e\u5e93\u7528\u6237 MariaDB [(none)]> create user testuser@localhost identified by '1234'; \u8d4b\u4e88\u7528\u6237\u6743\u9650 MariaDB [(none)]> grant select,insert,update,delete on testsql.* to testuser@localhost; \u64a4\u9500\u7528\u6237\u6743\u9650 MariaDB [(none)]> revoke select,insert,update,delete on testsql.* from testuser@localhost; \u5220\u9664\u7528\u6237 MariaDB [(none)]> delete from mysql.user where user='testuser'; \u5237\u65b0\u6743\u9650 MariaDB [(none)]> flush privileges; \u91cd\u7f6e mariadb root \u5bc6\u7801 \u7f16\u8f91 my.cnf \u6587\u4ef6 [root@desktop ~]# vim /etc/my.cnf [mysqld] # \u6dfb\u52a0skip-grant-tables\u5373\u53ef\uff0c\u4fee\u6539\u5b8c\u5bc6\u7801\u540e\u5220\u9664\u6b64\u884c skip-grant-tables \u91cd\u542f\u670d\u52a1\uff0c\u91cd\u65b0\u52a0\u8f7d\u914d\u7f6e\u6587\u4ef6 [root@desktop ~]# systemctl restart mariadb \u76f4\u63a5\u65e0\u5bc6\u7801\u767b\u5f55 [root@desktop ~]# mysql MariaDB [(none)]> \u4fee\u6539root\u5bc6\u7801 MariaDB [(none)]> update mysql.user set password=password('root') where user='root'; \u5237\u65b0\u6743\u9650 MariaDB [(none)]> flush privileges; \u7528\u65b0\u5bc6\u7801\u767b\u5f55 \u4fee\u6539\u5b8c\u5bc6\u7801\u8bb0\u5f97\u5220\u9664 my.cnf \u6587\u4ef6\u91cc\u7684 skip-grant-tables [root@desktop ~]# mysql -uroot -proot MariaDB [(none)]> mariadb \u4e3b\u4ece\u590d\u5236 master \u5f00\u542f\u4e8c\u8fdb\u5236\u65e5\u5fd7 [root@server ~]# vim /etc/my.cnf [mysqld] ... ... server-id=11 log-bin=/var/lib/mysql/master_bin_log binlog_format=mixed [root@server ~]# systemctl restart mariadb \u521b\u5efa\u540c\u6b65\u8d26\u53f7 [root@server ~]# mysql -uroot -predhat MariaDB [(none)]> grant replication slave on *.* to 'slave'@'%' identified by 'redhat'; MariaDB [(none)]> flush privileges; \u5907\u4efd\u6570\u636e\u5e93\uff0c\u67e5\u770b log \u6587\u4ef6\u53ca\u4f4d\u7f6e MariaDB [(none)]> flush tables with read lock; [root@server ~]# mysqldump -uroot -predhat --all-databases > bakdb.sql MariaDB [(none)]> show master status; +----------------------+----------+--------------+------------------+ | File | Position | Binlog_Do_DB | Binlog_Ignore_DB | +----------------------+----------+--------------+------------------+ | master_bin_log.000001 | 328 | | | +----------------------+----------+--------------+------------------+ 1 row in set (0.00 sec) MariaDB [(none)]> unlock tables; slave \u5f00\u542f\u4e8c\u8fdb\u5236\u65e5\u5fd7 [root@desktop ~]# vim /etc/my.cnf [mysqld] ... ... server-id=10 relay-log=/var/lib/mysql/slave_bin_log [root@desktop ~]# systemctl restart mariadb \u5bfc\u5165\u5907\u4efd\u6570\u636e [root@desktop ~]# scp root@192.168.3.11:/root/bakdb.sql . [root@desktop ~]# mysql -uroot -predhat < bakdb.sql \u5f00\u542f slave MariaDB [(none)]> change master to master_host='192.168.3.11',master_user='slave',master_password='redhat',master_log_file='master_bin_log.000001',master_log_pos=328; MariaDB [(none)]> start slave; MariaDB [(none)]> show slave status\\G ... ... Slave_IO_Running: Yes Slave_SQL_Running: Yes ... ...","title":"\u7b2c5\u5929"},{"location":"RH254/day5/#5","text":"","title":"\u7b2c5\u5929"},{"location":"RH254/day5/#mariadb","text":"","title":"mariadb \u6570\u636e\u5e93"},{"location":"RH254/day5/#_1","text":"","title":"\u57fa\u7840\u64cd\u4f5c"},{"location":"RH254/day5/#mariadb_1","text":"[root@server ~]# yum -y install mariadb mariadb-server","title":"\u5b89\u88c5 mariadb"},{"location":"RH254/day5/#mariadb_2","text":"[root@server ~]# systemctl restart mariadb","title":"\u542f\u52a8 mariadb \u670d\u52a1"},{"location":"RH254/day5/#_2","text":"\u8bbe\u7f6e root \u5bc6\u7801\uff0c\u79fb\u9664\u533f\u540d\u7528\u6237\uff0c\u5173\u95ed\u8fdc\u7a0b\u8bbf\u95ee\u7b49\u4e00\u7cfb\u5217\u5b89\u5168\u64cd\u4f5c [root@server ~]# mysql_secure_installation","title":"\u521d\u59cb\u5316"},{"location":"RH254/day5/#rootredhat","text":"[root@server ~]# mysql -uroot -predhat","title":"\u7528\u6570\u636e\u5e93\u7684root\u7528\u6237\u767b\u5f55\uff0c\u5bc6\u7801\u4e3aredhat"},{"location":"RH254/day5/#_3","text":"MariaDB [(none)]> show databases; +--------------------+ | Database | +--------------------+ | information_schema | | mysql | | performance_schema | +--------------------+","title":"\u67e5\u770b\u6570\u636e\u5e93"},{"location":"RH254/day5/#_4","text":"MariaDB [(none)]> create database testsql;","title":"\u521b\u5efa\u6570\u636e\u5e93"},{"location":"RH254/day5/#_5","text":"MariaDB [(none)]> use testsql; MariaDB [testsql]>","title":"\u4f7f\u7528\u6570\u636e\u5e93"},{"location":"RH254/day5/#_6","text":"MariaDB [testsql]> show tables;","title":"\u67e5\u770b\u6570\u636e\u8868"},{"location":"RH254/day5/#_7","text":"MariaDB [testsql]> create table user(id int(3),name varchar(30));","title":"\u521b\u5efa\u8868"},{"location":"RH254/day5/#_8","text":"MariaDB [testsql]> insert into user values(1,'zhangsan'); MariaDB [testsql]> insert into user values(2,'lisi'); MariaDB [testsql]> insert into user values(3,'wangwu');","title":"\u63d2\u5165\u6570\u636e"},{"location":"RH254/day5/#_9","text":"MariaDB [testsql]> select * from user; +------+----------+ | id | name | +------+----------+ | 1 | zhangsan | | 2 | lisi | | 3 | wangwu | +------+----------+","title":"\u67e5\u770b\u8868\u4e2d\u6570\u636e"},{"location":"RH254/day5/#id1","text":"MariaDB [testsql]> delete from user where id=1; MariaDB [testsql]> select * from user; +------+--------+ | id | name | +------+--------+ | 2 | lisi | | 3 | wangwu | +------+--------+","title":"\u5220\u9664id\u4e3a1\u7684\u6570\u636e"},{"location":"RH254/day5/#id3namezhaoliu","text":"MariaDB [testsql]> update user set name=\"zhaoliu\" where id=3; MariaDB [testsql]> select * from user; +------+---------+ | id | name | +------+---------+ | 2 | lisi | | 3 | zhaoliu | +------+---------+","title":"\u66f4\u65b0id\u4e3a3\u7684\u6570\u636ename\u5b57\u6bb5\u4e3azhaoliu"},{"location":"RH254/day5/#_10","text":"MariaDB [testsql]> drop table user;","title":"\u5220\u9664\u6570\u636e\u8868"},{"location":"RH254/day5/#testsql","text":"MariaDB [testsql]> drop database testsql;","title":"\u5220\u9664testsql\u6570\u636e\u5e93"},{"location":"RH254/day5/#_11","text":"MariaDB [(none)]> create user testuser@localhost identified by '1234';","title":"\u521b\u5efa\u6570\u636e\u5e93\u7528\u6237"},{"location":"RH254/day5/#_12","text":"MariaDB [(none)]> grant select,insert,update,delete on testsql.* to testuser@localhost;","title":"\u8d4b\u4e88\u7528\u6237\u6743\u9650"},{"location":"RH254/day5/#_13","text":"MariaDB [(none)]> revoke select,insert,update,delete on testsql.* from testuser@localhost;","title":"\u64a4\u9500\u7528\u6237\u6743\u9650"},{"location":"RH254/day5/#_14","text":"MariaDB [(none)]> delete from mysql.user where user='testuser';","title":"\u5220\u9664\u7528\u6237"},{"location":"RH254/day5/#_15","text":"MariaDB [(none)]> flush privileges;","title":"\u5237\u65b0\u6743\u9650"},{"location":"RH254/day5/#mariadb-root","text":"","title":"\u91cd\u7f6e mariadb root \u5bc6\u7801"},{"location":"RH254/day5/#mycnf","text":"[root@desktop ~]# vim /etc/my.cnf [mysqld] # \u6dfb\u52a0skip-grant-tables\u5373\u53ef\uff0c\u4fee\u6539\u5b8c\u5bc6\u7801\u540e\u5220\u9664\u6b64\u884c skip-grant-tables","title":"\u7f16\u8f91 my.cnf \u6587\u4ef6"},{"location":"RH254/day5/#_16","text":"[root@desktop ~]# systemctl restart mariadb","title":"\u91cd\u542f\u670d\u52a1\uff0c\u91cd\u65b0\u52a0\u8f7d\u914d\u7f6e\u6587\u4ef6"},{"location":"RH254/day5/#_17","text":"[root@desktop ~]# mysql MariaDB [(none)]>","title":"\u76f4\u63a5\u65e0\u5bc6\u7801\u767b\u5f55"},{"location":"RH254/day5/#root","text":"MariaDB [(none)]> update mysql.user set password=password('root') where user='root';","title":"\u4fee\u6539root\u5bc6\u7801"},{"location":"RH254/day5/#_18","text":"MariaDB [(none)]> flush privileges;","title":"\u5237\u65b0\u6743\u9650"},{"location":"RH254/day5/#_19","text":"\u4fee\u6539\u5b8c\u5bc6\u7801\u8bb0\u5f97\u5220\u9664 my.cnf \u6587\u4ef6\u91cc\u7684 skip-grant-tables [root@desktop ~]# mysql -uroot -proot MariaDB [(none)]>","title":"\u7528\u65b0\u5bc6\u7801\u767b\u5f55"},{"location":"RH254/day5/#mariadb_3","text":"","title":"mariadb \u4e3b\u4ece\u590d\u5236"},{"location":"RH254/day5/#master","text":"","title":"master"},{"location":"RH254/day5/#_20","text":"[root@server ~]# vim /etc/my.cnf [mysqld] ... ... server-id=11 log-bin=/var/lib/mysql/master_bin_log binlog_format=mixed [root@server ~]# systemctl restart mariadb","title":"\u5f00\u542f\u4e8c\u8fdb\u5236\u65e5\u5fd7"},{"location":"RH254/day5/#_21","text":"[root@server ~]# mysql -uroot -predhat MariaDB [(none)]> grant replication slave on *.* to 'slave'@'%' identified by 'redhat'; MariaDB [(none)]> flush privileges;","title":"\u521b\u5efa\u540c\u6b65\u8d26\u53f7"},{"location":"RH254/day5/#log","text":"MariaDB [(none)]> flush tables with read lock; [root@server ~]# mysqldump -uroot -predhat --all-databases > bakdb.sql MariaDB [(none)]> show master status; +----------------------+----------+--------------+------------------+ | File | Position | Binlog_Do_DB | Binlog_Ignore_DB | +----------------------+----------+--------------+------------------+ | master_bin_log.000001 | 328 | | | +----------------------+----------+--------------+------------------+ 1 row in set (0.00 sec) MariaDB [(none)]> unlock tables;","title":"\u5907\u4efd\u6570\u636e\u5e93\uff0c\u67e5\u770b log \u6587\u4ef6\u53ca\u4f4d\u7f6e"},{"location":"RH254/day5/#slave","text":"","title":"slave"},{"location":"RH254/day5/#_22","text":"[root@desktop ~]# vim /etc/my.cnf [mysqld] ... ... server-id=10 relay-log=/var/lib/mysql/slave_bin_log [root@desktop ~]# systemctl restart mariadb","title":"\u5f00\u542f\u4e8c\u8fdb\u5236\u65e5\u5fd7"},{"location":"RH254/day5/#_23","text":"[root@desktop ~]# scp root@192.168.3.11:/root/bakdb.sql . [root@desktop ~]# mysql -uroot -predhat < bakdb.sql","title":"\u5bfc\u5165\u5907\u4efd\u6570\u636e"},{"location":"RH254/day5/#slave_1","text":"MariaDB [(none)]> change master to master_host='192.168.3.11',master_user='slave',master_password='redhat',master_log_file='master_bin_log.000001',master_log_pos=328; MariaDB [(none)]> start slave; MariaDB [(none)]> show slave status\\G ... ... Slave_IO_Running: Yes Slave_SQL_Running: Yes ... ...","title":"\u5f00\u542f slave"}]}