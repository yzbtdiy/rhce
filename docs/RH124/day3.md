# 第3天

## <font color=red>权限控制</font>
### 权限查看
```
[root@server ~]# ls -l
-rw-------. 1 root root 1100 Jan 22 10:25 anaconda-ks.cfg
文件类型、权限 硬链接数 所有者名 所属组名 大小 修改时间 文件名
```
### UGO 权限
| 权限  | 文件  | 目录  |
| -------- | ---------- | --------- |
| r（Read，读取）    | 对文件而言，具有读取文件内容的权限。  | 对目录而言，具有浏览目录的权限。   |
| w（Write，写入）   | 对文件而言，具有新增、修改、删除文件内容的权限 | 对目录而言，具有新建、删除、修改、移动目录内文件的权限。 |
| x（eXecute，执行） | 对文件而言，具有执行文件的权限。  | 对目录而言，具有进入该目录的权限。   |

### 特殊权限（UGO+）
| 特殊权限      | 文件  |  目录   |
| ---------- | --------- | ------------ |
| suid（u+s）   | 以文件所有者身份去执行二进制文件，而不是运行文件的用户身份执行。 | 无影响。  |
| sgid（g+s）   | 以文件的所属组身份执行二进制文件。                           | 在该目录中新建的文件或目录所属组继承该目录的所属组。         |
| sticky（o+t） | 无影响。 | 对该目录有写权限的用户仅可以删除自己的文件，无法删除或强制保存更改到其他用户所拥有的的文件，root 用户除外。 |

### 权限修改

**符号关键字**：
```
chmod WhoWhatWhich file|directory
```
* Who：u（所有者），g（所属组），o（其他人），a（所有） 
* What：+，-，=
* Which：r（读），w（写），x（执行）,s（suid，sgid），t（sticky）

> 修改目录可以使用 -R 选项递归

**数值**：

```
chmod [0-7][0-7][0-7][0-7] file|directory
```
* 第一位：特殊权限（u+s:4，g+s:2，o+t:1）
* 第二位：所有者（r:4，w:2，x:1）
* 第三位：所属组（r:4，w:2，x:1）
* 第四位：其他人（r:4，w:2，x:1）

> 若无特殊权限用后三位表示

### umask
* root 默认 umask：0022 
* 普通用户默认 umask：0002
* 文件默认权限：777 - umask
* 目录默认权限：666 - umask

## <font color=red>进程监控</font>

### 什么是进程？
>程序是一个包含可以执行代码的静态的文件。进程是一个开始执行但是还没有结束的程序的实例。
当程序被系统调用到内存以后，系统会给程序分配一定的资源（内存，设备等等）然后进行一系列的复杂操作，使程序变成进程以供系统调用。

### 进程的分类

**系统进程**
>可以执行内存资源分配和进程切换等管理工作，而且该进程的运行不受用户的干预，即使是root用户也不能干预系统进程的运行。

**用户进程**
>通过执行用户程序、应用程序或内核之外的系统程序而产生的进程，此类进程可以在用户的控制下运行或关闭。用户进程可以分为3类：

* **交互进程**：由一个Shell终端其他的进程，在执行过程中，需要与用户进行交互操作，可以运行于前台，也可以运行于后台。
* **批处理进程**：该进程是一个进程集合，负责按顺序启动其他的进程。
* **守护进程**：守护进程是一直运行的一种进程，经常在Linux系统时启动，在系统关闭时终止。它们独立于控制终端且周期性地质学某种任务或等待处理某些发生的时间。例，httpd进程，crond进程等。

### 查看进程

* ps aux    
a 显示现行终端下进程，包括其他用户的    
u 以用户为主显示    
x 显示没有终端的进程    
* ps -ef    
-e 所有进程    
-f 全格式    
* top 实时进程状态

**进程状态**

| 状态 | 描述 |
| --- | --- |
| R | 进程正在执行系统调用<br/>进程已调度，但尚未在 CPU 上 |
| S | 进程在提示符处，需要用户输入<br/>进程正在等待 I/O |
| D | 进程不可中断等待设备响应 |
| T | 进程已被临时停止 |
| Z | 进程刚被终止 |

### 前台、后台作业

* 执行命令时结尾加 `&` 可将任务置于后台执行
* `jobs` 可以查看后台作业
* `bg ID` 可将后台停止作业重新在后台执行
* `fg ID` 可将后台作业置于前台运行

### 进程发送信号

* kill
* killall
* pkill

| 信号编号 | 名称 |作用 |
| --- | --- | --- |
| 1 | SIGHUP | 挂起 |
| 2 | SIGINT | 键盘中断（ctrl+c） |
| 3 | SIGQUIT | 键盘退出 |
| 9 | SIGKILL | 强制终止，无法拦截 |
| 15 | SIGTERM | 友好终止 |
| 18 | SIGCONT | 继续，无法拦截 |
| 19 | SIGSTOP | 停止，无法拦截 |
| 20 | SIGTSTP | 键盘停止（ctrl+z） |


[笨办法学Linux-处理进程, ps,  kill ](ps_kill.md)

